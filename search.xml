<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Resolutions for the Later Half of 2017]]></title>
    <url>%2F2017%2F05%2F16%2FResolutions-for-the-Later-Half-of-2017%2F</url>
    <content type="text"><![CDATA[è®¡åˆ’åšè¿‡æ— æ•°ï¼Œæ¯æ¬¡è®¡åˆ’éƒ½å„æœ‰å„çš„äº®ç‚¹ï¼Œç„¶è€Œå´é€šå¸¸æ³¨å®šæœ‰ä¸€ä¸ªç›¸ä¼¼çš„å¤±è´¥ç»“å±€ã€‚ä½•è°“å¤±è´¥ï¼Ÿè¿™é‡Œå¹¶ä¸è¦æ±‚ç™¾åˆ†ä¹‹ç™¾å®Œæˆè®¡åˆ’ï¼Œå®Œæˆ80%å·¦å³å°±åŸºæœ¬å¯ä»¥ç®—æ˜¯æŒ‘æˆ˜æˆåŠŸã€‚ç„¶è€Œæˆ‘å´å¾ˆå°‘æœ‰å®Œæˆåº¦é«˜äºŽ60%çš„è®¡åˆ’ã€‚ åŽŸå› å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œå¥½å¤§å–œåŠŸï¼Œçœ¼é«˜æ‰‹ä½Žã€‚æ€»æƒ³ç€æŠŠæ‰€æœ‰äº‹æƒ…éƒ½åšå¥½ï¼Œå¾€å¾€æœ€åŽä¸€äº‹æ— æˆã€‚è¿™å‡ å¹´é€æ¸æ¸…æ¥šäº†è‡ªå·±æœ€æ ¸å¿ƒçš„å…´è¶£å’Œç›®æ ‡ï¼Œå¹¶ä¸”æ˜Žç¡®äº†è‡ªå·±çš„æ€§æ ¼å’Œèƒ½åŠ›çš„ä¼˜åŠ£åŠ¿æ‰€åœ¨ï¼Œå¸Œæœ›ä»¥åŽèƒ½å°†æœ‰é™çš„ç²¾åŠ›é›†ä¸­èµ·æ¥ï¼Œç»“åˆè‡ªèº«å®žé™…æƒ…å†µï¼Œè¿½æ±‚å±€éƒ¨æœ€ä¼˜è§£ã€‚ å¸Œæœ›è¿™æ¬¡çš„åŠå¹´è®¡åˆ’èƒ½åŸºæœ¬åšåˆ°è„šè¸å®žåœ°ï¼Œç®—æ˜¯ä¸€ä¸ªæ–°çš„èµ·ç‚¹å§ã€‚ï¼ˆä»¥ä¸‹è®¡åˆ’æŒ‰ä¼˜å…ˆçº§æŽ’åºï¼‰ 1. è°ƒæ•´æ€ç»´æ¨¡å¼ â€‹ é‡ç‚¹ï¼Œæ…¢æ…¢æ¥ï¼Œä¸»è¦æ˜¯ä¸‹é¢è¿™å‡ ç‚¹ï¼š 1.1 ä¸“æ³¨äºŽè‡ªèº«çš„å±€éƒ¨æœ€ä¼˜è§£ï¼Œä¸Žä»–äººæ¯”è¾ƒåªæ˜¯ä¸ºäº†æ›´å®¢è§‚åœ°è¡¡é‡è‡ªèº«æ°´å¹³ä»¥ä¾¿æŸ¥æ¼è¡¥ç¼ºï¼Œè€Œä¸æ˜¯ä¸ºäº†ç«žäº‰ 1.2 æŠ“ä½æ ¸å¿ƒéœ€æ±‚å’Œä¸»è¦çŸ›ç›¾ï¼Œä¸è¦æ€»æƒ³ç€äº‹äº‹å°½å–„å°½ç¾Žï¼Œäººçš„æ—¶é—´ç²¾åŠ›æœ‰é™ï¼Œè¿‡åˆ†é™·äºŽç»†èŠ‚åªä¼šè®©è‡ªå·±è¿·å¤±æ–¹å‘ 1.3 æ˜Žç¡®ä¸»è¦çŸ›ç›¾ä¹‹åŽï¼Œå‡¡æ˜¯å¯¹è‡ªå·±æˆé•¿æœ‰åˆ©ï¼Œå¯¹ä»–äººæ— å®³çš„äº‹æƒ…æ”¾æ‰‹åŽ»å¹²ï¼Œä¸è¦çž»å‰é¡¾åŽï¼Œæ‹’ç»é“å¾·ç»‘æž¶ 1.4 å¯¹è‡ªå·±æœ‰å®¢è§‚ç¨³å®šçš„è®¤è¯†å’Œè¯„ä»·ï¼Œä¸å› ä»–äººçš„æ‰¹è¯„æˆ–è¡¨æ‰¬äº§ç”Ÿè¿‡å¤šçš„è‡ªæˆ‘å¦å®šæˆ–è‡ªæˆ‘è†¨èƒ€ã€‚å­¦ç€çœ‹åˆ°è‡ªå·±çš„è¿›æ­¥ï¼Œå­¦ç€æŽ¥å—è‡ªå·±çš„ä¸è¶³ï¼Œå­¦ç€é¿å…æƒ…ç»ªå†…è€— 2. å¼€å§‹é€‚åº¦è¿åŠ¨ â€‹ ä»ŽåšæŒæŸä¸€é¡¹è¿åŠ¨å¼€å§‹ï¼Œä¸»è¦æ˜¯æ€æƒ³ä¸Šéœ€è¦å¼€å§‹é‡è§†ï¼Œä¸€å‘¨è‡³å°‘ä¿è¯ä¸€æ¬¡è¾ƒå®Œæ•´çš„è¿åŠ¨ï¼ˆä¸¤å°æ—¶ï¼‰ 3. æŠ€æœ¯ä¸Š â€‹ é™¤äº†å­¦ä¹ å·¥ä½œä¸­å¿…å¤‡çš„æŠ€èƒ½å­¦ä¹ ï¼Œä¸šä½™æ—¶é—´é‡ç‚¹èŠ±åœ¨ä»¥ä¸‹å‡ æ–¹é¢ï¼ˆæ³¨æ„ä¼˜å…ˆçº§ï¼‰ 3.1 åšæŒå†™æŠ€æœ¯åšå®¢ï¼Œæ¯å‘¨ä¸€ç¯‡ â€‹ å°½é‡åœ¨å‘¨äº”æˆ–å‘¨å…­å®Œæˆï¼Œé€‰æ‹©æ›´æœ‰ä»·å€¼çš„è¯é¢˜ï¼Œé˜è¿°è®°å½•æœ€æ ¸å¿ƒçš„å†…å®¹ï¼Œä¸è¦è¿‡åˆ†é™·äºŽç»†èŠ‚ 3.2 ç®—æ³•å’Œè®¡ç®—æœºåŸºç¡€çš„å­¦ä¹  â€‹ ç®—æ³•åˆ†ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€ä¸ªæ˜¯åŸºç¡€ç®—æ³•é¢˜è®­ç»ƒï¼Œä»¥LeetCodeä¸ºä¸»ï¼Œå°½é‡æ¯å¤©éƒ½ç»ƒä¸‹æ‰‹ï¼Œæ³¨æ„åˆ†ç±»æ€»ç»“ï¼ŒåŠå¹´ä¸‹æ¥è‡³å°‘150é“ï¼ˆç²¾ç»†åˆ†æžå’Œæ€»ç»“ï¼Œæ€ç»´è®­ç»ƒä¸ºå¯¼å‘ï¼Œéžé¢è¯•å¯¼å‘ï¼‰ã€‚å¦ä¸€æ–¹é¢æ˜¯å…¶ä»–é«˜çº§ç®—æ³•çš„å­¦ä¹ å’Œè¿ç”¨ï¼Œè¿™ä¸€æ–¹é¢ä¸»è¦é€šè¿‡å†™åšå®¢æ¥é©±åŠ¨ â€‹ è®¡ç®—æœºåŸºç¡€ç›®å‰çš„å­¦ä¹ é‡ç‚¹åœ¨äºŽç½‘ç»œå’Œåˆ†å¸ƒå¼è¿™ä¸¤å—ï¼Œç½‘ç»œè¿™ä¸€éƒ¨åˆ†ä¸»è¦é çœ‹ä¹¦ï¼ˆTCP/IPè¯¦è§£å·ä¸€ï¼‰å’Œå†™åšå®¢ï¼Œåˆ†å¸ƒå¼è¿™ä¸€å—å°½é‡è·Ÿç€6.824åšlabï¼ˆæ ¹æ®è‡ªå·±çš„å®žé™…æƒ…å†µè°ƒæ•´è¿›åº¦ï¼Œä¸å¼ºæ±‚è·Ÿå®Œï¼Œä½†æ˜¯è‡³å°‘è·Ÿä¸€åŠï¼‰ 3.3 Javaè¯­è¨€é«˜çº§ç‰¹æ€§ä»¥åŠJVM â€‹ è¯­è¨€æ–¹é¢ï¼Œé‡ç‚¹åœ¨IOã€å¤šçº¿ç¨‹ä»¥åŠè¯­è¨€æ–°ç‰¹æ€§ â€‹ JVMï¼Œé‡ç‚¹ä¸»è¦åœ¨å®žè·µç»éªŒç§¯ç´¯å’Œæ€»ç»“ï¼Œget your hands dirty 3.4 Linux â€‹ Linuxçš„å†…å®¹æ¯”è¾ƒçç¢Žï¼Œä¸»è¦è¿˜æ˜¯ä»¥åŠ¨æ‰‹å®žè·µä¸ºä¸»ï¼Œä¸‹åŠå¹´æœ€æ ¸å¿ƒçš„è®¡åˆ’æ˜¯ç†Ÿç»ƒshellç¼–ç¨‹ 4. ç”Ÿæ´»ä¸Š 4.1 è§„å¾‹ä½œæ¯ â€‹ å°½é‡1ç‚¹ä¹‹å‰ç¡ï¼Œä½¿ç”¨sleep cycleè¿›è¡Œç»Ÿè®¡ â€‹ æ¯æ™šç¡å‰æ˜Žç¡®å½“æ—¥çš„æ”¶èŽ·ï¼Œä»¥åŠç¬¬äºŒå¤©çš„é¦–è¦ä»»åŠ¡ 4.2 çµç¶ â€‹ é‡æ–°ä¸Šè¯¾ï¼ˆä¸å¼ºæ±‚ï¼Œæ—¶é—´ä¸å¤Ÿå°±è‡ªå·±ç»ƒï¼Œå…´è¶£é©±åŠ¨ï¼‰ï¼Œä»¥æŒ‡æ³•ã€å¤æ›²è®­ç»ƒä¸ºä¸»ã€‚åŠå¹´ç›®æ ‡ï¼šæ¯æœˆè‡³å°‘ç»ƒä¸€æ¬¡ï¼Œç»ƒç†Ÿã€Šé€æˆ‘ä¸€æžçŽ«ç‘°èŠ±ã€‹ 4.5 è‹±è¯­å£è¯­ â€‹ æ¯ä¸¤å‘¨å‘¨æœ«ä¸€æ¬¡conversation exchangeï¼ˆéš¾ä»¥è¾¾æˆçš„æƒ…å†µä¸‹ï¼Œè‡³å°‘ä¿è¯æ¯æœˆä¸€æ¬¡ï¼‰ ä¸‹é¢æ€»ç»“æˆè¡¨æ ¼ï¼Œä»¥ä¾¿å¹´ç»ˆçš„æ—¶å€™æŸ¥çœ‹è®¡åˆ’å®Œæˆæƒ…å†µï¼ˆæŒ‰ä¼˜å…ˆçº§æŽ’åºï¼‰ã€‚ Task List 1. ä¸“æ³¨äºŽè‡ªèº«çš„å±€éƒ¨æœ€ä¼˜è§£ 2. æŠ“ä½æ ¸å¿ƒéœ€æ±‚å’Œä¸»è¦çŸ›ç›¾ 3. æ”¾æ‰‹åŽ»å¹²ï¼Œä¸è¦çž»å‰é¡¾åŽï¼Œæ‹’ç»é“å¾·ç»‘æž¶ 4. å¯¹è‡ªå·±æœ‰å®¢è§‚ç¨³å®šçš„è®¤è¯†å’Œè¯„ä»· 5. åšæŒä¸€é¡¹è¿åŠ¨ 6. åšæŒå†™æŠ€æœ¯åšå®¢ï¼Œæ¯å‘¨ä¸€ç¯‡ 7. ç®—æ³•å’Œè®¡ç®—æœºåŸºç¡€çš„å­¦ä¹  8. Javaè¯­è¨€é«˜çº§ç‰¹æ€§ä»¥åŠJVM 9. Linux 10. è§„å¾‹ä½œæ¯ 11. ç»ƒç†Ÿã€Šé€æˆ‘ä¸€æžçŽ«ç‘°èŠ±ã€‹ï¼Œè‡³å°‘æ¯æœˆä¸€æ¬¡ç»ƒä¹  12. conversation exchangeï¼Œè‡³å°‘æ¯æœˆä¸€æ¬¡ è¿˜æ˜¯å†™äº†å¤ªå¤šå…·è±¡çš„ç›®æ ‡ï¼Œå…¶å®žå‡¡æ˜¯â€œæ¯Xä¸€æ¬¡â€è¿™ç§è®¡åˆ’å°±åŸºæœ¬æ˜¯ä½œæ­»ã€‚ä½†æ˜¯æ¯”èµ·ä»¥å‰çš„å„ç§å®ä¼Ÿå£®è§‚ï¼Œæ¯æ¯æƒ³èµ·éƒ½è®©æˆ‘å¿ƒæ½®æ¾Žæ¹ƒçš„è®¡åˆ’ï¼Œè¿™æ¬¡çš„è®¡åˆ’å·²ç»æŽ¥åœ°æ°”å¾ˆå¤šäº†ã€‚æ…¢æ…¢æ¥å§ï¼Œå¹´åº•å†æ¥æ‰“è„¸ã€‚]]></content>
      <categories>
        <category>My Life</category>
        <category>Thinking and Summary</category>
      </categories>
      <tags>
        <tag>Thinking</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Design Pattern-0ã€‘Six Principles for Software Design]]></title>
    <url>%2F2017%2F02%2F16%2F%E3%80%90Design-Pattern-0%E3%80%91Six-Principles-for-Software-Design%2F</url>
    <content type="text"><![CDATA[è®¾è®¡æ¨¡å¼é‡è¦æ€§ä¸è¨€è€Œå–»ï¼Œä½†æ˜¯è®¾è®¡æ¨¡å¼çš„å­¦ä¹ åªæœ‰ç»“åˆå…·ä½“é¡¹ç›®å®žè·µæ‰æœ‰æ„ä¹‰ã€‚è¿™é‡Œæ–°å¼€ã€Design Patternã€‘ç³»åˆ—åšæ–‡æ¥æ€»ç»“è®¾è®¡æ¨¡å¼ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œå¹¶å°½é‡ç»“åˆä¸€äº›å·¥ç¨‹å®žè·µæ¥å¸®åŠ©è‡ªå·±ç†è§£ã€‚ å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Œå°±ä¸å¾—ä¸æåˆ°è½¯ä»¶è®¾è®¡çš„å…­å¤§åŽŸåˆ™ã€‚æœ¬æ–‡ä½œä¸ºã€Design Patternã€‘ç³»åˆ—çš„ç¬¬ä¸€ç¯‡åšæ–‡ï¼Œä¸»è¦å›´ç»•è¿™å…­å¤§è®¾è®¡åŽŸåˆ™å±•å¼€è®¨è®ºï¼š å•ä¸€èŒè´£åŽŸåˆ™(SRP)ï¼Œå¼€é—­åŽŸåˆ™(OCP)ï¼Œé‡Œæ°æ›¿æ¢åŽŸåˆ™(LSP)ï¼Œ ä¾èµ–å€’ç½®åŽŸåˆ™(DIP)ï¼ŒæŽ¥å£éš”ç¦»åŽŸåˆ™(ISP)ï¼Œ è¿ªç±³ç‰¹æ³•åˆ™(LoD) ç±»ä¹‹é—´çš„å…³ç³» åœ¨ä»‹ç»å…­å¤§è®¾è®¡åŽŸåˆ™ä¹‹å‰ï¼Œå…ˆæ¥å›žé¡¾ä¸€ä¸‹ç±»ä¹‹é—´å¸¸è§çš„å…³ç³»ï¼š ä¾èµ–(Dependence)ï¼Œå…³è”(Association)ï¼Œèšåˆ(Aggregation)ï¼Œ ç»„åˆ(Composition) ï¼Œ ç»§æ‰¿(Generalization)ï¼Œå®žçŽ°(Implementation) å¯¹äºŽæœ€åŽä¸¤ç§å…³ç³»ä¸€èˆ¬æ²¡æœ‰äº‰è®®ï¼Œç»§æ‰¿å’Œå®žçŽ°æè¿°äº†ç±»ä¸Žç±»æˆ–ç±»ä¸ŽæŽ¥å£ä¹‹é—´çš„çºµå‘å…³ç³»ï¼Œè€Œå‰å››ç§å…¶å®žéƒ½æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œç”¨ä»¥æè¿°ç±»ä¸Žç±»ä¹‹é—´æˆ–è€…ç±»ä¸ŽæŽ¥å£ä¹‹é—´çš„ç›¸äº’å¼•ç”¨ï¼Œæ˜¯æ¨ªå‘å…³ç³»ï¼Œè€¦åˆåº¦ï¼ˆè¿™é‡Œå¯ä»¥å°†è€¦åˆåº¦ç®€å•ç†è§£ä¸ºä¸€ä¸ªç±»å‘ç”Ÿå˜æ›´æ—¶å¦ä¸€ä¸ªç±»å—å½±å“çš„ç¨‹åº¦ï¼‰çš„å¼ºå¼±ä¾æ¬¡é€’å¢žï¼šä¾èµ– &lt; å…³è” &lt; èšåˆ &lt; ç»„åˆã€‚è¿™å››ç§å…³ç³»çš„ç¡®å®šæ˜¯æ¯”è¾ƒå®¹æ˜“å‡ºçŽ°äº‰è®®çš„ï¼Œç‰¹åˆ«æ˜¯åŽä¸‰ç§ã€‚ ä¸‹é¢ä¸»è¦åˆ†æžä¸‹å‰å››ç§å…³ç³»çš„åŒºåˆ«ä»¥åŠUMLç»˜åˆ¶ï¼š ä¾èµ–ï¼ˆdependenceï¼‰ ä¾èµ–å…³ç³»æ˜¯å‰å››ç§å…³ç³»ä¸­æœ€å®¹æ˜“è¾¨åˆ«çš„å…³ç³»ï¼Œé€šå¸¸é€šè¿‡å±€éƒ¨å˜é‡ï¼Œæ–¹æ³•å½¢å‚ï¼Œé™æ€æ–¹æ³•è°ƒç”¨ç­‰æ–¹å¼å®žçŽ°ç±»ä¸Žç±»ä¹‹é—´çš„å…³è”ã€‚å…·ä½“ä¾‹å­å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324public class Gun&#123; public static void staticShoot()&#123; System.out.println("static shooting"); &#125; public void shoot()&#123; System.out.println("shooting"); &#125;&#125;public class Sniper&#123; //é€šè¿‡å±€éƒ¨å˜é‡å®žçŽ°ä¾èµ– public void tryGun1()&#123; Gun gun = new Gun(); gun.shoot(); &#125; //é€šè¿‡æ–¹æ³•å½¢å‚å®žçŽ°ä¾èµ– public void tryGun2(Gun gun)&#123; gun.shoot(); &#125; //é€šè¿‡é™æ€æ–¹æ³•è°ƒç”¨å®žçŽ°ä¾èµ– public void tryGun3()&#123; Gun.staticShoot(); &#125;&#125; ä¾èµ–å…³ç³»åœ¨UMLä¸­é‡‡ç”¨è™šçº¿+ç®­å¤´è¡¨ç¤ºï¼Œä¸Šä¾‹çš„UMLå›¾å¦‚ä¸‹ï¼š å…³è”ï¼ˆAssociationï¼‰ å…³è”å…³ç³»è¡¨ç¤ºä¸¤ä¸ªç±»å¤„äºŽå¹³çº§å…³ç³»çš„å…³è”ï¼Œæ¯”å¦‚ä½ å’Œä½ çš„åŒäº‹ï¼ŒçŒ«å’Œç‹—ï¼Œè‹¹æžœå’Œæ¢¨ã€‚äº§ç”Ÿå…³è”å…³ç³»åˆæ˜¯ä»…ä»…æ˜¯ä¸ºäº†æ–¹ä¾¿ä¸€ä¸ªç±»ä½¿ç”¨å¦ä¸€ä¸ªç±»çš„æŸäº›å±žæ€§æˆ–æ–¹æ³•ã€‚å…³è”å…³ç³»å¯ä»¥æ˜¯å•å‘çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒå‘çš„ï¼Œé€šè¿‡æˆå‘˜å˜é‡æ¥å®žçŽ°ç±»ä¸Žç±»ä¹‹é—´çš„å…³è”ã€‚ 1234567891011public class Man&#123; private Colleague colleague; public void getInfo()&#123; colleague.getInfo(); &#125;&#125;public class Colleague&#123; public void getInfo()&#123; System.out.println("look!!! lots of information"); &#125;&#125; å…³è”å…³ç³»åœ¨UMLä¸­é‡‡ç”¨å®žçº¿+ç®­å¤´è¡¨ç¤ºï¼Œä¸Šä¾‹çš„UMLå›¾å¦‚ä¸‹ï¼š èšåˆï¼ˆAggregationï¼‰ èšåˆå…³ç³»è¡¨ç¤ºä¸¤ä¸ªç±»å¤„äºŽä»Žå±žæˆ–åŒ…å«å…³ç³»çš„å…³è”ï¼Œæ¯”å¦‚ä½ å’Œä½ çš„ç”µè„‘ï¼Œé—¨å’Œå®ƒçš„é”ï¼Œæ±½è½¦å’Œè½¦è½®ï¼Œå…¬å¸ä¸Žå‘˜å·¥ç­‰ã€‚è¿™æ˜¯ä¸€ç§å¼ºè€¦åˆå…³ç³»ï¼Œä½†æ˜¯æ¶‰åŠåˆ°çš„ä¸¤ä¸ªå¯¹è±¡ä¸ä¸€å®šæœ‰ç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸã€‚é€šè¿‡æˆå‘˜å˜é‡æ¥å®žçŽ°ç±»ä¸Žç±»ä¹‹é—´çš„å…³è”ã€‚ä½†æ˜¯æˆå‘˜å˜é‡çš„èµ‹å€¼ä¸€èˆ¬é€šè¿‡setteræ–¹æ³•æ¥å•ç‹¬å®žçŽ°(å¹¶éžä¸¥æ ¼è¦æ±‚å¦‚æ­¤)ã€‚ 123456789101112131415public class Man&#123; private Computer computer; public void setComputer(Computer computer)&#123; this.computer = computer; &#125; public void startComputer()&#123; computer.start(); &#125;&#125;public class Computer&#123; public void start()&#123; System.out.println("start the computer"); &#125;&#125; èšåˆå…³ç³»åœ¨UMLä¸­é‡‡ç”¨ç©ºå¿ƒè±å½¢+å®žçº¿+ç®­å¤´è¡¨ç¤ºï¼Œä¸Šä¾‹çš„UMLå›¾å¦‚ä¸‹ï¼š ç»„åˆï¼ˆCompositionï¼‰ ç»„åˆå…³ç³»è¡¨ç¤ºä¸¤ä¸ªç±»å¤„äºŽåŒ…å«å…³ç³»çš„å…³ç³»ï¼Œè¿™ä¸¤ä¸ªç±»ç›¸äº’ä¾å­˜ï¼Œæ¯”å¦‚ä½ å’Œä½ çš„æ€æƒ³ï¼Œä¹¦å’Œå®ƒçš„å†…å®¹ç­‰ã€‚è¿™æ˜¯ä¸€ç§æ›´å¼ºçš„è€¦åˆå…³ç³»ï¼Œæ¶‰åŠåˆ°çš„ä¸¤ä¸ªç±»çš„å¯¹è±¡æœ‰ç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸã€‚é€šè¿‡æˆå‘˜å˜é‡æ¥å®žçŽ°ç±»ä¸Žç±»ä¹‹é—´çš„å…³è”ã€‚ä½†æ˜¯æˆå‘˜å˜é‡çš„èµ‹å€¼ä¸€èˆ¬é€šè¿‡æž„é€ å‡½æ•°å®žçŽ°ï¼ˆä½“çŽ°å‡ºç›¸åŒç”Ÿå‘½å‘¨æœŸï¼‰ã€‚ 123456789101112131415public class Man&#123; private Mind mind; public Man(Mind mind)&#123; this.mind = mind; &#125; public void think()&#123; mind.think(); &#125;&#125;public class Mind&#123; public void think()&#123; System.out.println("Mind is thinking"); &#125;&#125; ç»„åˆå…³ç³»åœ¨UMLä¸­é‡‡ç”¨å®žå¿ƒè±å½¢+å®žçº¿+ç®­å¤´è¡¨ç¤ºï¼Œä¸Šä¾‹çš„UMLå›¾å¦‚ä¸‹ï¼š å…³è”å…³ç³»ï¼Œèšåˆå…³ç³»ï¼Œç»„åˆå…³ç³»ï¼Œä¸‰è€…é€šå¸¸éƒ½æ˜¯é€šè¿‡æˆå‘˜å˜é‡æ¥å®žçŽ°ç±»ä¸Žç±»ä¹‹é—´çš„å…³è”ã€‚å› æ­¤æœ‰æ—¶å¾ˆéš¾ä»…ä»…é€šè¿‡ä»£ç å°±è½»æ˜“åŒºåˆ†è¿™ä¸‰ç§å…³ç³»ï¼Œé€šå¸¸æˆ‘ä»¬éœ€è¦ç»“åˆä¸€äº›ä¸Šä¸‹æ–‡è¯­ä¹‰å’Œå¥‘çº¦æ¥åŒºåˆ†è¿™ä¸‰ç§å…³ç³»ã€‚å¯ä»¥å€Ÿç”¨ä¸‹é¢è¿™å¥è¯æ¥å¸®åŠ©ç†è§£ï¼š å…³è”å…³ç³»è¡¨ç¤ºä½¿ç”¨æˆ–å€Ÿç”¨ï¼ˆuses aï¼‰å¦ä¸€ä¸ªç±»ï¼Œèšåˆå…³ç³»æ‹¥æœ‰ï¼ˆhas aï¼‰å¦ä¸€ä¸ªç±»ï¼Œç»„åˆå…³ç³»æ‹¥æœ‰å¹¶ä¸”ä¸å¯æˆ–ç¼ºï¼ˆcontains aï¼‰å¦ä¸€ä¸ªç±»ã€‚ èšåˆå…³ç³»å’Œç»„åˆå…³ç³»å¦‚ä½•è¿›è¡ŒåŒºåˆ†ï¼Ÿ èšåˆå…³ç³»çš„ä¸¤ä¸ªç±»å¯¹åº”çš„å¯¹è±¡ç”Ÿå‘½å‘¨æœŸä¸ä¸€å®šä¸€è‡´ï¼Œå¹¶ä¸”ä¸¤è€…å¹¶ä¸æ˜¯ç›¸äº’ä¾å­˜çš„å…³ç³»ã€‚æ¯”å¦‚ä½ å’Œä½ çš„ç”µè„‘ï¼Œä½ æ²¡äº†ç”µè„‘ä¾ç„¶å¯ä»¥å­˜åœ¨ï¼Œä½ çš„ç”µè„‘æ¢ä¸€ä¸ªä¸»äººåŒæ ·ä¹Ÿå¯ä»¥å­˜åœ¨ã€‚è¿™ç§å…³ç³»æ›´åƒæ˜¯ä¸¤ä¸ªç‹¬ç«‹ä¸ªä½“é€šè¿‡æŸç§å¥‘çº¦ç»‘å®šåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ç§ä¸Šä¸‹çº§æˆ–è€…æ•´ä½“å’Œéƒ¨åˆ†çš„å…³ç³»ï¼›è¿™ç§å¥‘çº¦ä¸€æ—¦æ‰“ç ´ï¼Œä¸¤ä¸ªä¸ªä½“ä¾ç„¶å¯ä»¥ç‹¬ç«‹å­˜åœ¨ã€‚æ¯”å¦‚è¯´å…¬å¸å’Œåº”è˜è€…Aç­¾äº†å·¥ä½œåè®®ï¼Œä¸¤ä¸ªä¸ç›¸å…³çš„ä¸ªäººçŽ°åœ¨å˜æˆäº†æ•´ä½“å’Œéƒ¨åˆ†çš„å…³ç³»ï¼Œä¸€æ—¦Aé€‰æ‹©è¾žèŒï¼Œåˆ™å¥‘çº¦è¢«æ‰“ç ´ï¼Œä½†å…¬å¸å’ŒAä¾ç„¶å¯ä»¥å•ç‹¬å·¥ä½œã€‚ ç»„åˆå…³ç³»çš„ä¸¤ä¸ªç±»å¯¹åº”çš„å¯¹è±¡æœ‰å®Œå…¨ä¸€è‡´ï¼ˆè¡¨ç¤ºéƒ¨åˆ†çš„å¯¹è±¡ä¼šéšç€è¡¨ç¤ºæ•´ä½“çš„å¯¹è±¡çš„æ¶ˆäº¡è€Œæ¶ˆäº¡ï¼‰ã€‚æ¯”å¦‚ä¹¦çƒ§äº†ï¼Œå®ƒçš„å†…å®¹ä¹Ÿéšä¹‹ä¸è§äº†ï¼Œäººä¸åœ¨äº†ï¼Œäººçš„æ€æƒ³ä¹Ÿéšä¹‹æ¶ˆäº¡äº†ã€‚è¿™ç§å…³ç³»æ˜¯ä¸Žç”Ÿä¿±æ¥çš„ï¼Œä¸€æ—¦è¡¨ç¤ºæ•´ä½“çš„å¯¹è±¡æ¶ˆäº¡ï¼Œåˆ™è¡¨ç¤ºéƒ¨åˆ†çš„å¯¹è±¡ä¹Ÿä¼šæ¶ˆäº¡ï¼Œä¸å­˜åœ¨äºŒè€…è„±ç¦»å…³ç³»ç‹¬ç«‹å­˜åœ¨çš„æƒ…å†µã€‚ å•ä¸€èŒè´£åŽŸåˆ™ï¼ˆSingle Responsibility Principle, SRPï¼‰ A class should have only one reason to change è¯¥åŽŸåˆ™çš„æ ¸å¿ƒæ˜¯ï¼šåªæœ‰ä¸€ä¸ªç†ç”±å¯ä»¥å¯¼è‡´ç±»çš„æ›´æ”¹ã€‚æ›´é€šä¿—çš„è¯´ï¼Œå°±æ˜¯è®©ä¸€ä¸ªç±»æœ€å¥½åªè´Ÿè´£ä¸€ä¸ªèŒè´£ã€‚å¦‚æžœè®©ä¸€ä¸ªç±»æ‰¿æ‹…ä¸¤ç§æˆ–ä»¥ä¸ŠèŒè´£æ—¶ï¼Œå½“éœ€æ±‚æ”¹å˜æ—¶ï¼Œå¾ˆå¤šåŽŸå› éƒ½å®¹æ˜“å¯¼è‡´ç±»çš„æ›´æ”¹ï¼ˆæ¯”å¦‚ç¬¬ä¸€ä¸ªèŒè´£çš„éœ€æ±‚å‘ç”Ÿæ”¹å˜ï¼Œç¬¬äºŒä¸ªèŒè´£çš„éœ€æ±‚å‘ç”Ÿæ”¹å˜ç­‰ç­‰ï¼‰ã€‚ è¿™é‡Œä½¿ç”¨ã€ŠAgile Software Development: Principles, Patterns, and Practicesã€‹ä»¥åŠã€Šè®¾è®¡æ¨¡å¼ä¹‹ç¦…ã€‹ä¸­ç”¨åˆ°çš„ç»å…¸ä¾‹å­æ¥å¯¹å•ä¸€èŒè´£æ¨¡å¼è¿›è¡Œä¸¾ä¾‹è®²è§£ã€‚ 123456public interface phone&#123; public void dial(String phoneNumber); public void hangup(); public void send(char c); public char recv();&#125; ä¸Šé¢è¿™ä¸ªæŽ¥å£çš„è®¾è®¡è¿èƒŒäº†å•ä¸€èŒè´£åŽŸåˆ™ï¼Œå°†è´Ÿè´£è¿žæŽ¥ç®¡ç†çš„èŒè´£ä»¥åŠæ•°æ®é€šä¿¡çš„èŒè´£æ··åœ¨äº†åŒä¸€ä¸ªæŽ¥å£ä¸­ã€‚å°†ä¸Šè¿°ä¸¤ä¸ªèŒè´£æ‹†åˆ†ï¼Œé‡æ–°è®¾è®¡æˆä»¥ä¸‹ç»“æž„ï¼š è¿™æ ·ä¸€æ¥ï¼Œè™½ç„¶PhoneImplementationä¸­ä¾ç„¶åŒ…å«äº†ä¸¤ç§èŒè´£ï¼Œä½†æ˜¯åœ¨æŽ¥å£è®¾è®¡æ—¶ä¸¥æ ¼å®žçŽ°äº†å•ä¸€èŒè´£åŽŸåˆ™ã€‚å¹¶ä¸”åœ¨åº”ç”¨çš„å…¶ä»–éƒ¨åˆ†å¯ä»¥ç›´æŽ¥è°ƒç”¨èŒè´£å¯¹åº”çš„æŽ¥å£ï¼Œæ— éœ€è€ƒè™‘å®žçŽ°ç±»çš„ç»†èŠ‚ï¼Œä»ŽæŸç§å±‚åº¦ä¸Šæ¥è¯´ï¼Œä¹Ÿå®žçŽ°äº†è§£è€¦ã€‚ è¿™é‡Œä¸ºä»€ä¹ˆä¸ç›´æŽ¥å°†å•ä¸ªèŒè´£è®¾è®¡æˆå•ä¸ªç±»å‘¢ï¼Ÿè¿™æ ·ä¸å°±èƒ½ä¸¥æ ¼éµå®ˆå•ä¸€èŒè´£åŽŸåˆ™äº†å—ï¼Ÿ å¦‚æžœæŒ‰ç…§ä¸Šé¢çš„è¯´æ³•è®¾è®¡ï¼Œåˆ™ä¼šå‡ºçŽ°ä¸‹é¢è¿™æ ·çš„ç»“æžœï¼š è¿™æ ·è™½ç„¶ä¿è¯äº†SRPï¼Œå´æ˜Žæ˜¾å¢žåŠ äº†æ•´ä¸ªè®¾è®¡ç»“æž„çš„å¤æ‚åº¦ã€‚PhoneImplementationéœ€è¦ä¾èµ–ä¸¤ä¸ªç±»æ‰èƒ½å®Œæˆä¸šåŠ¡ï¼ˆå¼ºè€¦åˆï¼‰ã€‚ å•ä¸€èŒè´£åŽŸåˆ™çœ‹ä¼¼å®¹æ˜“ç†è§£ï¼Œå®žåˆ™éš¾ä»¥æŠŠæ¡ã€‚æœ‰æ—¶è¿‡åˆ†è¿½æ±‚å•ä¸€èŒè´£åŽŸåˆ™å¯èƒ½å¢žåŠ ç¨‹åºè®¾è®¡çš„å¤æ‚åº¦ã€‚é€šå¸¸æƒ…å†µä¼šä¼˜å…ˆä¿è¯æŽ¥å£éµå¾ªå•ä¸€èŒè´£åŽŸåˆ™ï¼Œå°½é‡è®©ç±»å’Œæ–¹æ³•ä¹Ÿéµå¾ªå•ä¸€èŒè´£åŽŸåˆ™ã€‚ å¼€é—­åŽŸåˆ™ï¼ˆOpen Close Principle, OCPï¼‰ Software entities (classes, modules, functions, etc.) should be open for extension and closed for modification å¼€é—­åŽŸåˆ™æ ¸å¿ƒåœ¨äºŽï¼šè½¯ä»¶åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚é€šä¿—æ¥è¯´ï¼Œå°±æ˜¯æŒ‡åº”è¯¥å°½é‡é€šè¿‡æ‰©å±•è½¯ä»¶å®žä½“æ¥è§£å†³éœ€æ±‚å˜åŒ–ï¼Œè€Œéžé€šè¿‡ä¿®æ”¹ä»£ç æ¥å®žçŽ°ã€‚ å¼€é—­åŽŸåˆ™çœ‹ä¼¼æ˜¯ä¸€ä¸ªæ¯”è¾ƒâ€œç¼¥ç¼ˆâ€çš„åŽŸåˆ™ï¼Œå®ƒå…­ä¸ªè®¾è®¡åŽŸåˆ™ä¸­æœ€ä¸ºå®è§‚ä¹Ÿæœ€ä¸ºæ¨¡ç³Šçš„ä¸€ä¸ªã€‚å®žé™…ä¸Šæˆ‘ä»¬å¯ä»¥å°†å…¶å®ƒäº”æ¡è®¾è®¡åŽŸåˆ™çœ‹åšæ˜¯æˆ‘ä»¬åœ¨ä»Žæ— åˆ°æœ‰è®¾è®¡è½¯ä»¶æ—¶åº”éµå®ˆçš„å…·ä½“åŽŸåˆ™ï¼Œè€Œå°†OCPå½“åšæ˜¯è½¯ä»¶è®¾è®¡å®ŒæˆåŽåº”å¯¹éœ€æ±‚å˜åŒ–æ—¶åº”æœ‰çš„è¡¨çŽ°ã€‚å¦‚æžœè¯¥è½¯ä»¶åœ¨åŽŸå§‹è®¾è®¡æ—¶å¾ˆå¥½åœ°éµå®ˆäº†å…¶å®ƒäº”æ¡è®¾è®¡åŽŸåˆ™ï¼Œé‚£ä¹ˆåœ¨åº”å¯¹éœ€æ±‚å˜æ›´æ—¶å°±å¾ˆå®¹æ˜“éµå®ˆOCPäº†ã€‚å»ºè®®å…ˆçœ‹å®Œä¸‹é¢å…¶å®ƒåŽŸåˆ™ä¹‹åŽå†å›žåˆ°è¿™ä¸€éƒ¨åˆ†æ¥çœ‹åº”è¯¥ä¼šæœ‰æ›´å¥½çš„ç†è§£ã€‚ é‰´äºŽç›®å‰èƒ½åŠ›æœ‰é™ï¼Œåœ¨è¿™é‡Œå…ˆæŒ–ä¸ªå‘ï¼Œä»¥åŽåœ¨å®žè·µä¸­æœ‰æ›´æ·±é¢†æ‚Ÿçš„æ—¶å€™ï¼Œæˆ‘å†æ¥è°ˆè°ˆå¯¹å¼€é—­åŽŸåˆ™çš„ç†è§£ã€‚ é‡Œæ°æ›¿æ¢åŽŸåˆ™ï¼ˆLiskov Substitution Principle, LSPï¼‰ Subtypes must be substitutable for their base types é‡Œæ°æ›¿æ¢åŽŸåˆ™çš„æ ¸å¿ƒæ˜¯ï¼šå­ç±»åž‹å¿…é¡»èƒ½æ›¿æ¢ä»–ä»¬çš„çˆ¶ç±»åž‹ã€‚åˆšçœ‹åˆ°è¿™å¥å®šä¹‰æ—¶ï¼Œæˆ‘å¾ˆè‡ªç„¶åœ°æƒ³åˆ°å¤šæ€ï¼Œå¤šæ€çš„ä¸‰å¤§è¦ç´ åœ¨äºŽï¼šç»§æ‰¿ï¼Œé‡å†™ï¼Œçˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ã€‚æƒ³åˆ°è¿™é‡Œï¼Œç†æ‰€å½“ç„¶çš„è®¤ä¸ºå¤šæ€ä¸€å®šæ˜¯æ»¡è¶³LSPçš„ï¼šå¯¹äºŽæ‰€æœ‰å¤šæ€è¿ç”¨ï¼Œå­ç±»ç”±äºŽç»§æ‰¿äº†çˆ¶ç±»çš„æ‰€æœ‰æ–¹æ³•å±žæ€§ï¼Œå› æ­¤å­ç±»æ›¿æ¢çˆ¶ç±»ä¼¼ä¹Žæ˜¯ä¸€ä»¶å†æ­£å¸¸ä¸è¿‡çš„äº‹æƒ…äº†ã€‚å®žé™…ä¸Šè¿™æ˜¯å¯¹é‡Œæ°æ›¿æ¢åŽŸåˆ™çš„ä¸€ç§è¯¯è§£ï¼Œâ€œå¿…é¡»èƒ½æ›¿æ¢â€ï¼ŒæŒ‡çš„ä¸ä»…ä»…æ˜¯ä»£ç ä¸Šèƒ½æ›¿æ¢ï¼ˆæ›¿æ¢åŽç¼–è¯‘ä¸æŠ¥é”™ï¼‰ï¼Œæ›´é‡è¦çš„æ˜¯åŠŸèƒ½ä¸Šèƒ½æ›¿æ¢ï¼ˆæ›¿æ¢åŽç¨‹åºçš„è¿è¡Œé€»è¾‘å’ŒåŠŸèƒ½æ‰§è¡Œä¸ä¼šå‡ºçŽ°é—®é¢˜ï¼‰ã€‚ æ›´é€šä¿—åœ°è¯´ï¼ŒLSPæ˜¯æŒ‡å­ç±»å¯ä»¥ç»§æ‰¿å¹¶æ‹“å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼ˆæ‹“å±•åŠŸèƒ½ï¼Œæ¯”å¦‚å­ç±»å®šä¹‰æ–°çš„æ–¹æ³•å®žçŽ°æ–°åŠŸèƒ½ï¼‰ï¼Œæ›´æ”¹è¿™äº›åŠŸèƒ½çš„å®žçŽ°ç»†èŠ‚ï¼ˆæ¯”å¦‚é‡å†™æŸäº›æ–¹æ³•ï¼‰ï¼Œä½†æ˜¯å­ç±»ä¸å¯ä»¥æ”¹å˜è¿™äº›åŽŸæœ‰çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚é‡å†™æ–¹æ³•æ—¶ä¸ç®¡çˆ¶ç±»è¢«é‡å†™æ–¹æ³•çš„åŽŸå§‹åŠŸèƒ½å¥‘çº¦ï¼Œé‡å†™æ—¶ä¿®æ”¹æ–¹æ³•çš„åŠŸèƒ½ï¼‰ã€‚ ä¸‹é¢æ˜¯è¿èƒŒLSPçš„ä¸€ä¸ªç»å…¸ä¾‹å­ï¼š 123456789101112131415161718public class Base&#123; public void printSelf()&#123; System.out.println("I'm base"); &#125;&#125;public class Derived extends Base&#123; @Override public void printSelf()&#123; &#125;&#125;//å®¢æˆ·ç«¯ä»£ç public class Client&#123; public static void main(String[] args)&#123; Base a = new Derived(); a.printSelf(); &#125;&#125; è¿™æ˜¯ä¸€ä¸ªæ´¾ç”Ÿç±»é€€åŒ–å‡½æ•°çš„ä¾‹å­ã€‚æ´¾ç”Ÿç±»å‡ºäºŽæŸç§åŽŸå› è®¤ä¸ºä¸å†éœ€è¦printSelfæ–¹æ³•äº†ï¼ŒäºŽæ˜¯å°†è¯¥æ–¹æ³•é‡å†™æˆäº†ä¸€ä¸ªç©ºæ–¹æ³•ã€‚ä½†æ˜¯è¿™æ ·ä¸€æ¥ï¼Œå­ç±»é‡å†™çš„æ–¹æ³•å°±æ‰“ç ´äº†çˆ¶ç±»æ–¹æ³•çš„å¥‘çº¦ï¼ˆçˆ¶ç±»æ–¹æ³•çš„é¢„å®šåŠŸèƒ½æ˜¯æ‰“å°è‡ªèº«å®žé™…ç±»åï¼‰ã€‚å°½ç®¡è¿™æ ·é‡å†™å¯¹äºŽæ´¾ç”Ÿç±»è‡ªèº«è€Œè¨€å¾ˆåˆç†ï¼Œä½†æ˜¯å®¢æˆ·ç«¯ä»£ç ä¸€èˆ¬ä¸ä¼šçŸ¥é“ä¹Ÿä¸åœ¨æ„è¿™äº›ç»§æ‰¿å®žçŽ°ç»†èŠ‚ï¼Œå¾ˆå¤šæ—¶å€™è¿˜æ˜¯ä¼šåˆ©ç”¨çˆ¶ç±»æš´éœ²çš„å¥‘çº¦æ¥è°ƒç”¨æ–¹æ³•ï¼šæ¯”å¦‚è°ƒç”¨a.printSelfæ—¶ï¼Œå®¢æˆ·ç«¯é»˜è®¤éµå¾ªçˆ¶ç±»åŠŸèƒ½å¥‘çº¦ï¼Œé»˜è®¤è¿™ä¸ªæ–¹æ³•ç”¨æ¥æ‰“å°è‡ªèº«å®žé™…ç±»åçš„ã€‚ç„¶è€Œå®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“å­ç±»Derivedå·²ç»æ‚„æ‚„æ‰“ç ´äº†è¿™ä¸ªå¥‘çº¦ï¼Œå› æ­¤å®¢æˆ·ç«¯æœ¬æ„æ˜¯æƒ³å®žçŽ°æ‰“å°ç±»åçš„åŠŸèƒ½ï¼Œå´å‘çŽ°å®žé™…è¿è¡Œç»“æžœå¹¶æ²¡æœ‰è¾¾åˆ°é¢„æœŸåŠŸèƒ½ã€‚è¿™ç§å¼‚å¸¸çŽ°è±¡å°±æ˜¯ç”±äºŽè®¾è®¡ç±»æ—¶è¿èƒŒLSPé€ æˆçš„ã€‚ å¯èƒ½è¿™ä¸ªä¾‹å­è¿˜æ˜¯æœ‰äº›æŠ½è±¡ï¼Œä¸‹é¢å†ä¸¾ä¸ªç±»ä¼¼çš„æ›´åŠ å…·ä½“åŒ–çš„ä¾‹å­ï¼ˆæ­¤ä¾‹å­æ¥è‡ªã€Šè®¾è®¡æ¨¡å¼ä¹‹ç¦…ã€‹ï¼Œè¿›è¡Œäº†ç®€åŒ–) 123456789101112131415161718192021222324252627282930313233343536public abstract class AbstractGun&#123; //åŠŸèƒ½å¥‘çº¦: æ­¤æ–¹æ³•æ‰“å°ä¸€å¥è¯æ¥è¡¨ç¤ºå°„å‡» public abstract void shoot();&#125;public class HandGun extends AbstractGun&#123; @Override public void shoot()&#123; System.out.println("shooting with handgun !!!"); &#125;&#125; public class Rifle extends AbstractGun&#123; @Override public void shoot()&#123; System.out.println("shooting with rifle !!!"); &#125;&#125;public class ToyGun extends AbstractGun&#123; @Override //çŽ©å…·æžªæ²¡æœ‰å¿…è¦å†ä½¿ç”¨å°„å‡»åŠŸèƒ½ï¼Œç›´æŽ¥é‡å†™ä¸ºç©ºæ–¹æ³• public void shoot()&#123;&#125;&#125;//å®¢æˆ·ç«¯ä»£ç ï¼Œé»˜è®¤shootæ–¹æ³•æ˜¯ç”¨æ¥æ‰“å°ä¸€å¥è¯è¡¨ç¤ºå°„å‡»çš„//å®¢æˆ·ç«¯æ‰“ç®—åˆ©ç”¨è¯¥å¥‘çº¦ä¸‹çš„shootæ–¹æ³•å®Œæˆä¸€äº›äº‹æƒ…public class Client&#123; AbstractGun[] guns = new AbstractGun[3]; guns[0] = new HandGun(); guns[1] = new Rifle(); guns[2] = new ToyGun(); for(AbstractGun gun: guns)&#123; gun.shoot(); &#125;&#125; ç»“æžœå‘çŽ°æœ‰ä¸€æŠŠæžªæ— æ³•å®Œæˆé¢„æœŸæ•ˆæžœï¼Œè¿™å°±æ˜¯å‰é¢æåˆ°çš„æ´¾ç”Ÿç±»å‡½æ•°é€€åŒ–é€ æˆå­ç±»é‡å†™æ–¹æ³•æ‰“ç ´çˆ¶ç±»æ–¹æ³•åŠŸèƒ½å¥‘çº¦å¸¦æ¥çš„ç»“æžœã€‚ç”±äºŽç±»çš„è®¾è®¡è¿èƒŒäº†LSPï¼Œé€ æˆäº†å®¢æˆ·ç«¯è¿è¡Œå¼‚å¸¸ï¼ˆæ— æ³•è¾¾åˆ°é¢„æœŸåŠŸèƒ½ï¼‰ã€‚ æŒ‰ç…§ç½‘ç»œä¸Šå¾ˆå¤šåšå®¢æµè¡Œçš„è¯´æ³•ï¼ŒLSPåœ¨ä»£ç å®žçŽ°æ—¶é€šå¸¸åŒ…æ‹¬ä¸‹é¢çš„å››å±‚å«ä¹‰ï¼š å­ç±»å¯ä»¥å®žçŽ°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯ä¸èƒ½è¦†ç›–çˆ¶ç±»çš„éžæŠ½è±¡æ–¹æ³• å­ç±»å¯ä»¥å¢žåŠ è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³• å­ç±»é‡è½½çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œå¿…é¡»ä¿è¯å­ç±»æ–¹æ³•çš„å‰ç½®æ¡ä»¶ï¼ˆå³æ–¹æ³•çš„å½¢å‚ï¼‰è¦æ¯”çˆ¶ç±»æ–¹æ³•çš„è¾“å…¥å‚æ•°æ›´å®½æ¾ å­ç±»å®žçŽ°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•æ—¶ï¼Œå¿…é¡»ä¿è¯å­ç±»æ–¹æ³•çš„åŽç½®æ¡ä»¶ï¼ˆå³æ–¹æ³•çš„è¿”å›žå€¼ï¼‰è¦æ¯”çˆ¶ç±»æ›´ä¸¥æ ¼ å¯¹äºŽ2å’Œ4æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œç¬¬4ç‚¹ç›´æŽ¥å°±æ˜¯æ–¹æ³•é‡å†™çš„å¿…è¦æ¡ä»¶ã€‚æˆ‘å¹¶ä¸æ˜¯å¾ˆè®¤åŒç¬¬1ç‚¹ï¼Œå­ç±»å¯ä»¥è¦†ç›–çˆ¶ç±»çš„éžæŠ½è±¡æ–¹æ³•ï¼Œå‰ææ˜¯é‡å†™æ—¶ä¿è¯æ»¡è¶³è¯¥æ–¹æ³•åœ¨çˆ¶ç±»ä¸­å®šä¸‹çš„å¥‘çº¦ï¼Œå³é‡å†™æ—¶ä¸æ›´æ”¹çˆ¶ç±»ä¸­è¯¥æ–¹æ³•å®žçŽ°çš„åŠŸèƒ½å’Œç”¨é€”å³å¯ã€‚ å¯¹äºŽç¬¬3ç‚¹å…¶å®žä¹Ÿä¸éš¾ç†è§£ï¼Œå¦‚æžœå­ç±»çš„é‡è½½æ–¹æ³•çš„å‚æ•°èŒƒå›´å°äºŽçˆ¶ç±»çš„æ–¹æ³•ï¼ˆæ¯”å¦‚é‡è½½æ–¹æ³•çš„å‚æ•°ç±»åž‹æ˜¯çˆ¶ç±»çš„æ–¹æ³•å‚æ•°ç±»åž‹çš„å­ç±»ï¼‰ï¼Œå¾ˆå®¹æ˜“é€ æˆåŽŸæœ¬å®¢æˆ·ç«¯ä»£ç æƒ³è¦è°ƒç”¨çˆ¶ç±»æ–¹æ³•æ—¶è°ƒæˆå­ç±»é‡è½½æ–¹æ³•ï¼ˆç”±äºŽé‡è½½æ–¹æ³•åŒ¹é…ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆåŒ¹é…å‚æ•°èŒƒå›´æœ€å°çš„æ–¹æ³•ï¼Œå¦‚æžœæ‰¾ä¸åˆ°ç²¾å‡†åŒ¹é…çš„æ–¹æ³•ï¼Œåˆ™å°†å‚æ•°è‡ªåŠ¨å‘ä¸Šè½¬åž‹å†å¯»æ‰¾ï¼‰ã€‚ è®¨è®ºäº†è¿™äº›ä¹‹åŽï¼Œæˆ‘ä»¬å†å›žåˆ°å¼€å§‹æ—¶æåˆ°çš„å¤šæ€å’ŒLSPä¹‹é—´çš„å…³ç³»ï¼Œä»Žä¸‹é¢è¿™å‡ ä¸ªæ–¹é¢åˆ†æžï¼Œå°±èƒ½å¾ˆå®¹æ˜“ç†è§£å®ƒä»¬çš„å…³ç³»äº†ï¼š å¤šæ€çš„å®žçŽ°æ˜¯é€šè¿‡å®žçŽ°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•æ—¶ï¼šæ—¶æ»¡è¶³çˆ¶ç±»æ–¹æ³•å¥‘çº¦ï¼Œå®žçŽ°çˆ¶ç±»æ–¹æ³•é¢„å®šçš„åŠŸèƒ½ï¼Œåˆ™ä¸ºåˆç†çš„è®¾è®¡ï¼Œç¬¦åˆLSPã€‚ å¤šæ€çš„å®žçŽ°æ˜¯é€šè¿‡é‡å†™çˆ¶ç±»çš„éžæŠ½è±¡æ–¹æ³•æ—¶ï¼šé‡å†™æ—¶æ»¡è¶³çˆ¶ç±»æ–¹æ³•å¥‘çº¦ï¼Œå®žçŽ°çˆ¶ç±»æ–¹æ³•é¢„å®šçš„åŠŸèƒ½ï¼Œåˆ™ä¸ºåˆç†çš„è®¾è®¡ï¼Œç¬¦åˆLSPã€‚ å¤šæ€çš„å®žçŽ°æ˜¯é€šè¿‡é‡å†™çˆ¶ç±»çš„éžæŠ½è±¡æ–¹æ³•æ—¶ï¼šå¦‚æžœå¿…é¡»é€šè¿‡é‡å†™æ—¶æ‰“ç ´çˆ¶ç±»æ–¹æ³•å¥‘çº¦ï¼Œè¿èƒŒçˆ¶ç±»æ–¹æ³•é¢„å®šåŠŸèƒ½è¿™ç§é€”å¾„æ¥å®žçŽ°æŸç§æ–°çš„åŠŸèƒ½éœ€æ±‚ï¼Œåˆ™æ­¤æ—¶å»ºè®®é‡æ–°æ€è€ƒè®¾è®¡ï¼Œé‡‡ç”¨ä¾èµ–ï¼Œå…³è”ï¼Œèšåˆï¼Œç»„åˆç­‰å…³ç³»ä»£æ›¿ç»§æ‰¿å’Œå¤šæ€æ¥å®žçŽ°è¿™ç§åŠŸèƒ½éœ€æ±‚(æ¯”å¦‚å‰é¢çš„ToyGunçš„ä¾‹å­æœ€å¥½æ›´æ”¹ä¸ºé‡‡ç”¨ä¾èµ–æˆ–å…³è”å…³ç³»æ¥å®žçŽ°ToyGunè€Œéžç›´æŽ¥ç»§æ‰¿AbstractGunå’Œé‡å†™shoot()æ–¹æ³•)ã€‚ å®žé™…ä¸Šå¯¹äºŽLSPåªéœ€è¦è®°ä½ä¸€ç‚¹å°±å¥½ï¼šé‡å†™æ—¶å°½é‡ä¿è¯å­ç±»æ–¹æ³•éµå¾ªçˆ¶ç±»æ–¹æ³•å¥‘çº¦ï¼ˆé¢„å®šåŠŸèƒ½ï¼‰ã€‚ ä¾èµ–å€’ç½®åŽŸåˆ™ï¼ˆDependence Inversion Principle, DIPï¼‰ 1. High-level modules should not depend on low-level modules. Both should depend on abstractions 2. Abstractions should not depend on details. Details should depend on abstractions. ä¾èµ–å€’ç½®åŽŸåˆ™çš„æ ¸å¿ƒè¯´ç™½äº†å°±æ˜¯é¢å‘æŽ¥å£ç¼–ç¨‹ã€‚ä½†æ˜¯ä¸ºå•¥è¦æ•´å‡ºâ€œä¾èµ–å€’ç½®â€è¿™ä¹ˆé«˜å¤§ä¸Šçš„åå­—ï¼Ÿ è¿™æ˜¯ç”±äºŽä¼ ç»Ÿçš„æŸäº›ç»“æž„åŒ–è®¾è®¡å€¾å‘äºŽåˆ›å»ºé«˜å±‚æ¨¡å—ä¾èµ–äºŽåº•å±‚æ¨¡å—çš„ç»“æž„ã€‚éœ€è¦å®šä¹‰å­æ¨¡å—çš„å±‚æ¬¡ä¹‹åŽæ‰èƒ½ç¡®å®šé«˜å±‚æ¬¡çš„è°ƒç”¨é€»è¾‘ã€‚è¿™æ ·ä¸€æ¥ï¼Œé«˜å±‚æ¬¡ä¾èµ–è‡ªå±‚æ¬¡ï¼Œç­–ç•¥ä¾èµ–å®žçŽ°ç»†èŠ‚ã€‚ è€ŒDIPåŽŸåˆ™çš„æ ¸å¿ƒåœ¨äºŽè®©é«˜å±‚æ¬¡æ¨¡å—ç›¸å¯¹ç‹¬ç«‹äºŽå­å±‚æ¬¡æ¨¡å—ï¼Œé€šè¿‡é«˜å±‚æ¬¡ä¾èµ–æŠ½è±¡ï¼Œä½Žå±‚æ¬¡å®žçŽ°æŠ½è±¡ï¼Œæ¥å®žçŽ°é«˜å±‚æ¬¡å¯¹ä½Žå±‚æ¬¡æ¨¡å—çš„è°ƒç”¨ã€‚ æŠ½è±¡å…ˆåˆ¶å®šå¥‘çº¦ï¼ˆè¿™ç§æŠ½è±¡é€šå¸¸è¡¨çŽ°ä¸ºæŽ¥å£ï¼‰ï¼Œé«˜å±‚æ¨¡å—é€šè¿‡å¥‘çº¦æ¥äº†è§£åŠŸèƒ½è¿›è€Œå®žçŽ°è°ƒç”¨ï¼Œå­æ¨¡å—æŒ‰ç…§å¥‘çº¦æ¥å…·ä½“å®žçŽ°æŠ½è±¡ã€‚æ‰€ä»¥ç»å¸¸å°†DIPæ€»ç»“ä¸ºä¸ç®¡æ˜¯é«˜å±‚æ¨¡å—è¿˜æ˜¯åº•å±‚æ¨¡å—éƒ½éœ€è¦é¢å‘æŽ¥å£ç¼–ç¨‹ã€‚è¿™ç§ä¾èµ–å…³ç³»å’Œå‰é¢æè¿°çš„ä¼ ç»Ÿç»“æž„åŒ–è®¾è®¡çš„ä¾èµ–å…³ç³»æ˜¯ç›¸åçš„ï¼Œå› æ­¤è¯¥åŽŸåˆ™è¢«å‘½åä¸ºä¾èµ–å€’ç½®åŽŸåˆ™ã€‚ è¿™é‡Œå…ˆæä¸€ä¸‹ä»€ä¹ˆå«â€œä¾èµ–â€ï¼Œæœ¬æ–‡å¼€å¤´ä¹Ÿæåˆ°è¿‡ç±»ä¹‹é—´çš„å‡ ç§å…³ç³»ï¼ˆä¾èµ–ï¼Œå…³è”ï¼Œèšåˆï¼Œç»„åˆï¼Œç»§æ‰¿ï¼Œå®žçŽ°ï¼‰ï¼Œå®žé™…ä¸Šè¿™å‡ ç§å…³ç³»éƒ½å¯ä»¥è¡¨ç¤ºä¸Šé¢ä¸€æ®µè¯ä¸­çš„â€œä¾èµ–â€è¿™ä¸ªæŠ½è±¡æ¦‚å¿µã€‚é«˜å±‚æ¨¡å—å¯¹æŠ½è±¡çš„ä¾èµ–æ›´åƒæ˜¯ç±»ä¹‹é—´çš„å‰å››ç§å…³ç³»ï¼ˆç‰¹åˆ«æ˜¯ç¬¬ä¸€ç§å…³ç³»ï¼‰ï¼Œé€šè¿‡å±€éƒ¨å˜é‡ï¼Œæ–¹æ³•å‚æ•°ä¼ é€’ï¼Œé™æ€æ–¹æ³•è°ƒç”¨ï¼Œæˆå‘˜å˜é‡ç­‰å®žçŽ°ã€‚è€Œåº•å±‚æ¨¡å—å¯¹æŠ½è±¡çš„ä¾èµ–åˆ™æ˜¯é€šè¿‡ç±»ä¹‹é—´çš„åŽä¸¤ç§å…³ç³»æ¥å®žçŽ°çš„ã€‚ è¯´äº†ä¸€å †æŠ½è±¡æ¦‚å¿µï¼Œä¸å¼„ç‚¹å®žä¾‹ï¼Œæ„Ÿè§‰å°±å¿«é£˜ä¸Šå¤©äº†ã€‚å¦‚æžœè¦ä½ è®¾è®¡ä¸€ä¸ªç®€å•è½¯ä»¶å®žçŽ°è®©ä¸€ä¸ªå¹´è½»é©¾é©¶å‘˜é©¾é©¶æ±½è½¦çš„åŠŸèƒ½ï¼ˆç”¨æ‰“å°å­—ç¬¦ä¸²æ¥è¡¨ç¤ºé©¾é©¶ï¼Œä»¥åŠè½¦ç§»åŠ¨çš„é€Ÿåº¦ï¼‰ã€‚ åº•å±‚æ¨¡å—å®žçŽ°æ¶‰åŠåˆ°çš„ä¸»è¦å¯¹è±¡ï¼ˆè½¦ï¼Œå¹´è½»é©¾é©¶å‘˜ï¼‰ï¼Œç„¶åŽé€šè¿‡è°ƒç”¨åº•å±‚æ¨¡å—çš„ç±»å’Œå…¶æš´éœ²çš„æ–¹æ³•æ¥å®žçŽ°é«˜å±‚æ¨¡å—ä¸»è¦é€»è¾‘ï¼Œä»Žè€Œå®žçŽ°é©¾é©¶ï¼ˆè¿™ç§è®¾è®¡æ€è€ƒè¿‡ç¨‹çœ‹ä¼¼å¾ˆè‡ªç„¶ï¼Œä¹Ÿå®Œå…¨æ»¡è¶³å½“å‰çš„éœ€æ±‚ï¼Œä½†æ˜¯æ˜Žæ˜¾è¿èƒŒäº†DIPï¼‰ã€‚ä¸Šé¢è¿™ç§æ€è€ƒè¿‡ç¨‹å¯¹åº”ä¸‹é¢è¿™ä¸ªè®¾è®¡ï¼š 123456789101112131415161718192021222324//åº•å±‚æ¨¡å—public class Car&#123; private int speed = 100; public void move()&#123; System.out.println("Car move at the speed of " + speed); &#125;&#125;//åº•å±‚æ¨¡å—public class YoungDriver&#123; public void drive(Car car)&#123; System.out.println("A young driver start driving"); car.move(); &#125;&#125;//é«˜å±‚æ¨¡å—public class HighLevelClient&#123; public static void main(String[] args)&#123; Car car = new Car(); YoungDriver driver = new YoungDriver(); driver.drive(car); &#125;&#125; ä¸Šè¿°ä»£ç ç±»å›¾å¦‚ä¸‹ï¼š ä»Žç±»å›¾å¯ä»¥æ¸…æ™°çœ‹åˆ°ï¼Œé«˜å±‚æ¨¡å—HighLevelClientç›´æŽ¥ä¾èµ–äºŽåº•å±‚æ¨¡å—YoungDriverä»¥åŠCarçš„å…·ä½“å®žçŽ°ï¼Œåº•å±‚æ¨¡å—YoungDriverå’ŒCarä¹‹é—´ä¹Ÿæ˜¯ç›´æŽ¥ç›¸äº’ä¾èµ–ã€‚è¿™æ ·çš„è®¾è®¡çœ‹èµ·æ¥å¾ˆç®€æ´ï¼Œä¹Ÿå®Œç¾Žè§£å†³äº†å½“å‰çš„éœ€æ±‚ã€‚ä½†æ˜¯è½¯ä»¶éœ€æ±‚æ€»æ˜¯å¤„äºŽä¸æ–­å˜åŠ¨ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦ç¨å¾®æ”¹åŠ¨æˆ–è€…æ‰©å±•ä¸‹å½“å‰éœ€æ±‚å°±å¯ä»¥è½»æ˜“å‘çŽ°è¿™ç§è®¾è®¡çš„åƒµç¡¬æ€§ï¼ˆrigidityï¼‰å’Œè„†å¼±æ€§ï¼ˆfragilityï¼‰ã€‚ æ¯”å¦‚çŽ°åœ¨ä¸ä»…è¦æ±‚å¹´è½»é©¾é©¶å‘˜é©¾é©¶æ±½è½¦ï¼Œè¿˜è¦å¹´è½»é©¾é©¶å‘˜é©¾é©¶è‡ªè¡Œè½¦ï¼Œå¹¶ä¸”è€å¹´é©¾é©¶å‘˜ä¹Ÿè¦é©¾é©¶è‡ªè¡Œè½¦ã€‚å¾ˆæ˜Žæ˜¾æ­¤æ—¶åº•å±‚éœ€è¦å¤šåŠ ä¸¤ä¸ªç±»Bikeå’ŒOldDriverï¼Œå¹¶ä¸”éœ€è¦å¯¹æ‰€æœ‰ç›´æŽ¥ä¾èµ–åº•å±‚ç»†èŠ‚çš„åœ°æ–¹è¿›è¡Œæ›´æ”¹ï¼Œæ¯”å¦‚HighLevelClientå’ŒYoungDriverç±»ã€‚ä¿®æ”¹åŽçš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253//ã€ä¸å˜ã€‘åº•å±‚æ¨¡å—public class Car&#123; private int speed = 100; public void move()&#123; System.out.println("Car move at the speed of " + speed); &#125;&#125;//ã€æ‰©å±•ã€‘åº•å±‚æ¨¡å—public class Bike&#123; private int speed = 30; public void move()&#123; System.out.println("Bike move at the speed of " + speed); &#125;&#125;//ã€ä¿®æ”¹ã€‘åº•å±‚æ¨¡å—public class YoungDriver&#123; public void driveCar(Car car)&#123; System.out.println("A young driver start driving"); car.move(); &#125; //ã€æ‰©å±•ã€‘æ·»åŠ é©¾é©¶è‡ªè¡Œè½¦çš„æ–¹æ³• public void driveBike(Bike bike)&#123; System.out.println("A young driver start driving"); bike.move(); &#125;&#125;//ã€æ‰©å±•ã€‘åº•å±‚æ¨¡å—public class OldDriver&#123; public void driveCar(Car car)&#123; System.out.println("An old driver start driving"); car.move(); &#125; public void driveBike(Bike bike)&#123; System.out.println("An old driver start driving"); bike.move(); &#125;&#125;//ã€ä¿®æ”¹ã€‘é«˜å±‚æ¨¡å—public class HighLevelClient&#123; public static void main(String[] args)&#123; Car car = new Car(); Bike bike = new Bike(); YoungDriver youngDriver = new YoungDriver(); OldDirver oldDriver = new OldDriver(); youngDriver.drive(car); youngDriver.drive(bike); oldDriver.drive(bike); &#125;&#125; çŽ°åœ¨æ–°çš„ç±»å›¾å¦‚ä¸‹ï¼š ä¸ç®¡ä½ ä»¬èƒ½ä¸èƒ½çœ‹æ‡‚è¿™ä¸ªç±»å›¾ï¼Œåæ­£æˆ‘æ˜¯å°½åŠ›äº†ðŸ¶ã€‚ä»…ä»…æ˜¯ä¸ºäº†æ»¡è¶³ä¸€ä¸ªè¿™ä¹ˆç®€å•çš„éœ€æ±‚å˜åŒ–ï¼Œç«Ÿç„¶éœ€è¦åŽŸå§‹ä»£ç åšè¿™ä¹ˆå¤šä¿®æ”¹ã€‚è¿™ä¹Ÿå°±å¿äº†ï¼Œå¯æ˜¯è¿™æ ·ä¿®æ”¹ä¹‹åŽé«˜å±‚æ¨¡å—éœ€è¦ä¾èµ–å‡ ä¹Žæ‰€æœ‰çš„åº•å±‚ç»†èŠ‚ä¸è¯´ï¼Œåº•å±‚å„ä¸ªæ¨¡å—ä¹‹é—´çš„ç»†èŠ‚ä¾èµ–ä¹Ÿç›¸å½“ä¸¥é‡ã€‚è®¾æƒ³å¦‚æžœå†åŠ ä¸Šç¬¬ä¸‰æ¬¡ï¼Œç¬¬å››æ¬¡éœ€æ±‚å˜åŒ–ï¼Œå‘µå‘µï¼Œè¯·è‡ªè¡Œè„‘è¡¥â˜žã€‚ å‰é¢çš„å¼€æ”¾å…³é—­åŽŸåˆ™ï¼ˆOCPï¼‰ä¹Ÿæåˆ°è¿‡ï¼Œç¨‹åºè¦å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚ä»Žä¸Šé¢ä»£ç æˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†æœ‰ä¸€éƒ¨åˆ†æ–°çš„ç±»éœ€è¦åŠ è¿›åŽ»ï¼Œè¿™å±žäºŽæ‰©å±•ï¼Œæ˜¯åº”å¯¹éœ€æ±‚å˜æ›´çš„æ­£å¸¸åšæ³•ï¼Œä½†æ˜¯å¯¹äºŽYoungDriverå’ŒHighLevelClientçš„ä¿®æ”¹æ˜¯æˆ‘ä»¬éœ€è¦æƒ³åŠžæ³•å‡å°‘æˆ–é¿å…çš„ã€‚å…¶å®žå¯¼è‡´çŽ°åœ¨çœ‹åˆ°çš„è¿™äº›æ‰©å±•æ€§å·®ï¼Œé€»è¾‘æ‚ä¹±çš„æ ¹æºåœ¨äºŽæˆ‘ä»¬ä¸€å¼€å§‹çš„è®¾è®¡æ€è·¯æ˜¯æŒ‰ç…§ä¼ ç»Ÿæ¨¡å—åŒ–è®¾è®¡æ€è·¯æ¥çš„ï¼Œé«˜å±‚æ¨¡å—ç›´æŽ¥ä¾èµ–äºŽåº•å±‚ç»†èŠ‚ï¼Œè¿èƒŒäº†DIPï¼Œç›´æŽ¥å¯¼è‡´äº†éœ€æ±‚å˜æ›´æ—¶ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«çš„åŽæžœã€‚ æˆ‘ä»¬ä¾ç…§DIPé‡æ–°å¼€å§‹è®¾è®¡ï¼Œå†æ¥æ„Ÿå—ä¸€ä¸‹DIPæ˜¯å¦‚ä½•åšåˆ°çµæ´»åº”å¯¹éœ€æ±‚å˜æ›´çš„ã€‚DIPçš„æ€è·¯å¾ˆç®€å•ï¼Œè¿™ç§è®¾è®¡æ€è·¯æ˜¯é€šè¿‡å®¢æˆ·éœ€æ±‚æŠ½è±¡å‡ºæŽ¥å£ï¼Œé«˜å±‚ä¸šåŠ¡é€»è¾‘è°ƒç”¨è¿™äº›æŽ¥å£æš´éœ²çš„åŠŸèƒ½æ¥å®žçŽ°ç”¨æˆ·éœ€æ±‚ï¼Œåº•å±‚æ¨¡å—å…·ä½“å®žçŽ°è¿™äº›æŽ¥å£å¥‘çº¦æ‰€è§„å®šçš„åŠŸèƒ½ã€‚è¿™å°±å¥½æ¯”æ˜¯è®¾è®¡ç”Ÿäº§ä¸€è¾†è½¦ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦æ ¹æ®è½¦çš„éœ€æ±‚å®šä¹‰å‡ºæŠ½è±¡å±‚ï¼ˆæ±½è½¦çš„å››å¤§åŸºæœ¬ç»„æˆï¼‰ï¼šå‘åŠ¨æœºï¼Œåº•ç›˜ï¼Œè½¦èº«ï¼Œç”µæ°”è®¾å¤‡ã€‚ç„¶åŽé«˜å±‚å¼€å‘äººå‘˜ç ”ç©¶å¦‚ä½•åˆ©ç”¨è¿™å››å¤§æŽ¥å£çš„åŠŸèƒ½ç»„è£…æˆä¸€è¾†ç¬¦åˆéœ€æ±‚çš„æ±½è½¦ï¼Œè€Œåº•å±‚å¼€å‘äººå‘˜ä¸»è¦å…³å¿ƒå¦‚ä½•å…·ä½“å®žçŽ°å‘åŠ¨æœºï¼Œåº•ç›˜ç­‰åº•å±‚éƒ¨ä»¶ã€‚è¿™ç§è®¾è®¡æ€è·¯å¯ä»¥å¾ˆå¥½åœ°åº”å¯¹éœ€æ±‚å˜æ›´ï¼Œä½¿è½¯ä»¶å…·æœ‰æ›´å¥½çš„å¯æ‰©å±•æ€§ã€‚è¿™ä¸€ç‚¹ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œå› ä¸ºéœ€æ±‚å˜æ›´é€šå¸¸æ˜¯åœ¨åŽŸæ¥çš„éœ€æ±‚ä¸Šå¢žåŠ ä¸€äº›æ–°åŠŸèƒ½ï¼Œæˆ–è€…åšä¸€äº›å¾®è°ƒã€‚è¿˜æ˜¯ç”¨æ±½è½¦ä¸¾ä¾‹ï¼Œéœ€æ±‚çš„å˜æ›´é€šå¸¸æ˜¯é’ˆå¯¹äºŽç»†èŠ‚æ¥çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰çš„éœ€æ±‚æ˜¯å®žçŽ°ä¸€è¾†ç»æµŽåž‹SUVï¼ŒçŽ°åœ¨éœ€æ±‚å˜æˆäº†ä¸€è¾†è±ªåŽè·‘è½¦ã€‚ç”±äºŽæˆ‘ä»¬ä¹‹å‰çš„é«˜å±‚è®¾è®¡å’Œåº•å±‚å®žçŽ°æ˜¯å›´ç»•æ±½è½¦çš„å››å¤§åŸºç¡€éƒ¨ä»¶çš„æŠ½è±¡å±‚æ¥å±•å¼€çš„ï¼Œè€ŒSUVå’Œè·‘è½¦çš„åŸºæœ¬ç»“æž„ä¹Ÿéƒ½æ˜¯åŸºäºŽè¿™å››å¤§éƒ¨ä»¶æ¥çš„ï¼Œå› æ­¤æ­¤æ—¶æˆ‘ä»¬åªéœ€è¦åœ¨åº•å±‚æ‰©å±•å‡ºé’ˆå¯¹è·‘è½¦ç‰¹å¾çš„ç±»ï¼Œç„¶åŽå¯¹é«˜å±‚æ¨¡å—ç¨åšè°ƒæ•´å³å¯ï¼ˆéµå®ˆDIPçš„è®¾è®¡ï¼Œé—´æŽ¥ä¹Ÿä½¿è½¯ä»¶åœ¨åº”å¯¹éœ€æ±‚å˜æ›´æ—¶æ›´è½»æ˜“åœ°éµå®ˆOCPï¼‰ã€‚ä¸‡å˜ä¸ç¦»å…¶å®—å¤§æ¦‚è®²çš„å°±æ˜¯è¿™ä¸ªé“ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„è®¾è®¡ä¸åº”è¯¥å›´ç»•åº•å±‚ç»†èŠ‚å±•å¼€ï¼Œè€Œæ˜¯åº”è¯¥å›´ç»•â€œå®—â€å±•å¼€ï¼Œæ‰èƒ½ä»¥ä¸å˜åº”ä¸‡å˜ï¼ˆâ€œå®—â€å°±æ˜¯æˆ‘ä»¬ä»Žéœ€æ±‚ä¸­åˆ†æžå‡ºæ¥çš„æŠ½è±¡å±‚ï¼‰ã€‚ çŽ°åœ¨æ¢æˆDIPæ¥é‡æ–°è®¾è®¡ä¹‹å‰çš„ä¾‹å­ï¼šç›®å‰éœ€æ±‚æ˜¯è®¾è®¡ä¸€ä¸ªç®€å•è½¯ä»¶å®žçŽ°è®©ä¸€ä¸ªå¹´è½»é©¾é©¶å‘˜é©¾é©¶æ±½è½¦çš„åŠŸèƒ½ï¼ˆç”¨æ‰“å°å­—ç¬¦ä¸²æ¥è¡¨ç¤ºé©¾é©¶ï¼Œä»¥åŠè½¦ç§»åŠ¨çš„é€Ÿåº¦ï¼‰ï¼Œé¦–å…ˆæ€è€ƒä¸€ä¸‹é«˜å±‚æ¨¡å—å¯èƒ½éœ€è¦ç”¨åˆ°å“ªäº›æŠ½è±¡çš„åŠŸèƒ½ï¼š1.é«˜å±‚æ¨¡å—éœ€è¦ç”¨åˆ°é©¾é©¶å‘˜çš„é©¾é©¶åŠŸèƒ½ï¼›2. é©¾é©¶å‘˜éœ€è¦ç”¨åˆ°äº¤é€šå·¥å…·ã€‚æ ¹æ®DIPï¼Œæ ¸å¿ƒè¦ä¹‰æ˜¯é¢å‘æŽ¥å£ç¼–ç¨‹ï¼Œé«˜å±‚æ¨¡å—å’Œåº•å±‚æ¨¡å—éƒ½éœ€è¦ä¾èµ–æŠ½è±¡ï¼Œè¿™é‡Œå…ˆè®¾è®¡å‡ºæŽ¥å£ï¼Œé«˜å±‚æ¨¡å—æ ¹æ®æŽ¥å£çš„åŠŸèƒ½å¥‘çº¦æ¥è°ƒç”¨æŽ¥å£çš„æ–¹æ³•ï¼Œå®žçŽ°é«˜å±‚é€»è¾‘ï¼›åº•å±‚æ ¹æ®æŽ¥å£çš„åŠŸèƒ½å¥‘çº¦æ¥å®žçŽ°ç»†èŠ‚ï¼ˆåº•å±‚éœ€è¦ä¸¥æ ¼æŒ‰ç…§æŽ¥å£çš„å¥‘çº¦æ¥å®žçŽ°ï¼Œè¿™ä¹Ÿæ˜¯éµå®ˆé‡Œæ°æ›¿æ¢åŽŸåˆ™LSPçš„è¡¨çŽ°ï¼‰ã€‚ 12345678//å…ˆè®¾è®¡æŠ½è±¡æ¨¡å—public interface Driver&#123; public void drive(Vehicle vehicle);&#125;public interface Vehicle&#123; public void move();&#125; å½“æŽ¥å£è®¾è®¡å¥½ä¹‹åŽï¼Œé«˜å±‚æ¨¡å—ï¼Œä»¥åŠç”¨æŠ½è±¡éš”å¼€çš„åº•å±‚æ¨¡å—ä¹‹é—´å°±å¯ä»¥å®žçŽ°å¹¶è¡Œå¼€å‘äº†(åˆ†åˆ«äº¤ç»™ä¸åŒçš„äººåŒæ—¶å¼€å‘)ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„å®žçŽ°ï¼š 12345678910111213141516171819202122232425//åº•å±‚æ¨¡å—public class YoungDriver implements Driver&#123; public void drive(Vehicle vehicle)&#123; System.out.println("A young driver start driving"); vehicle.move(); &#125;&#125;//åº•å±‚æ¨¡å—public class Car implements Vehicle&#123; private int speed = 100; public void move()&#123; System.out.println("move at the speed of " + speed); &#125;&#125;//é«˜å±‚æ¨¡å—public class HighLevelClient&#123; public static void main(String[] args)&#123; Driver youngDriver = new YoungDriver(); Vehicle car = new Car(); //å…¨éƒ¨ä¾èµ–æŠ½è±¡å±‚å®šä¹‰çš„åŠŸèƒ½æ¥å®žçŽ°é«˜å±‚é€»è¾‘ youngDriver.drive(car); &#125; &#125; ä¸Šè¿°ä»£ç çš„ç±»å›¾å¦‚ä¸‹ï¼š è‡³æ­¤ï¼Œè¿™ç§è®¾è®¡å®žçŽ°äº†åŸºæœ¬éœ€æ±‚ã€‚å¯¹æ¯”å‰é¢ä¼ ç»Ÿæ€ç»´çš„è®¾è®¡ï¼Œå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°DIPçš„è®¾è®¡çœ‹ä¸ŠåŽ»è¦å¤æ‚ä¸€äº›ï¼Œå› ä¸ºå®ƒåœ¨å‰é¢çš„è®¾è®¡ä¸ŠåŠ äº†ä¸€å±‚æŠ½è±¡ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦è½¯ä»¶éœ€æ±‚å‘ç”Ÿæ”¹å˜ï¼Œè¿™ç§é¢å‘æŽ¥å£çš„è®¾è®¡çš„ä¼˜åŠ¿å°±ä¼šç«‹å³ä½“çŽ°å‡ºæ¥ã€‚ åŒæ ·çš„ï¼Œéœ€æ±‚æ­¤æ—¶å˜æ›´ä¸ºï¼šä¸ä»…è¦æ±‚å¹´è½»é©¾é©¶å‘˜é©¾é©¶æ±½è½¦ï¼Œè¿˜è¦å¹´è½»é©¾é©¶å‘˜é©¾é©¶è‡ªè¡Œè½¦ï¼Œå¹¶ä¸”è€å¹´é©¾é©¶å‘˜ä¹Ÿè¦é©¾é©¶æ±½è½¦å’Œè‡ªè¡Œè½¦ã€‚æˆ‘ä»¬åªéœ€æ‰©å±•å‡ºBikeå’ŒOldDriverä¸¤ä¸ªç±»ï¼Œå¹¶å°‘é‡ä¿®æ”¹é«˜å±‚ä»£ç å³å¯åº”å¯¹éœ€æ±‚å˜åŒ–ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445//ã€ä¸å˜ã€‘åº•å±‚æ¨¡å—public class YoungDriver implements Driver&#123; public void drive(Vehicle vehicle)&#123; System.out.println("A young driver start driving"); vehicle.move(); &#125;&#125;//ã€æ‰©å±•ã€‘åº•å±‚æ¨¡å—public class OldDriver implements Driver&#123; public void drive(Vehicle vehicle)&#123; System.out.println("An old driver start driving"); vehicle.move(); &#125;&#125;//ã€ä¸å˜ã€‘åº•å±‚æ¨¡å—public class Car implements Vehicle&#123; private int speed = 100; public void move()&#123; System.out.println("move at the speed of " + speed); &#125;&#125;//ã€æ‰©å±•ã€‘åº•å±‚æ¨¡å—public class Bike implements Vehicle&#123; private int speed = 30; public void move()&#123; System.out.println("move at the speed of " + speed); &#125;&#125;//ã€ä¿®æ”¹ã€‘é«˜å±‚æ¨¡å—public class HighLevelClient&#123; public static void main(String[] args)&#123; Driver youngDriver = new YoungDriver(); Driver oldDriver = new OldDriver(); Vehicle car = new Car(); Vehicle bike = new Bike(); //ä¸‹é¢æ˜¯é«˜å±‚äº‹åŠ¡é€»è¾‘çš„ä»£ç å®žçŽ°ï¼Œå…¨éƒ¨ä¾èµ–æŠ½è±¡å±‚å®šä¹‰çš„åŠŸèƒ½æ¥å®žçŽ°é«˜å±‚äº‹åŠ¡é€» youngDriver.drive(car); youngDriver.drive(bike); oldDriver.drive(bike); &#125; &#125; ä¸Šè¿°ä»£ç çš„ç±»å›¾å¦‚ä¸‹ï¼š è¿™ä¸€æ¬¡æ²¡æœ‰ä¿®æ”¹åº•å±‚ä»£ç ï¼Œè€Œæ˜¯é€šè¿‡æ‰©å±•åº•å±‚ä»£ç å’Œå°‘é‡è°ƒæ•´é«˜å±‚ä»£ç æ¥åº”å¯¹éœ€æ±‚å˜åŒ–ã€‚å¹¶ä¸”æ‰©å±•åŽçš„ç¨‹åºä¾ç„¶é€»è¾‘ç»“æž„åˆ†æ˜Žï¼Œé«˜å±‚å’Œåº•å±‚éƒ½ä¾èµ–æŽ¥å£ï¼ˆè¿™ä¹Ÿä¾§é¢è¯æ˜Žäº†å½“åˆæŽ¥å£çš„è®¾è®¡æ˜¯åˆç†çš„ï¼‰ã€‚ æœ‰äº›äººå¯èƒ½ä¼šè®¤ä¸ºé«˜å±‚ä»£ç ä¸­ä¹Ÿç”¨åˆ°äº†Carï¼ŒBikeï¼ŒYoungDriverç­‰åº•å±‚å…·ä½“ç±»ï¼Œè¿™æ˜¯ä¸æ˜¯è¯´æ˜Žå®žé™…ä¸Šè¿™ä¸€ç§è®¾è®¡ä¹Ÿè®©é«˜å±‚æ¨¡å—ä¾èµ–åº•å±‚ç»†èŠ‚äº†ï¼Ÿ è¿™é‡Œæˆ‘ä»¬éœ€è¦ç•™æ„å˜é‡ç±»åž‹çš„ä¸¤ä¸ªæ¦‚å¿µï¼šå¼•ç”¨ç±»åž‹ï¼ˆå¤–è§‚ç±»åž‹ï¼‰å’Œå®žé™…ç±»åž‹ï¼ˆä¸æ˜Žç™½çš„å¯ä»¥å‚è€ƒhttp://hippo-jessy/2017/02/13/ã€æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº-1ã€‘Resolution-vs-Binding-vs-Dispatch/çš„å¼€å¤´éƒ¨åˆ†ï¼‰ã€‚åœ¨é«˜å±‚æ¨¡å—ä¸­å°½é‡åœ¨åˆ›å»ºå˜é‡æ—¶ï¼Œå°†å˜é‡çš„å¼•ç”¨ç±»åž‹å®šä¹‰ä¸ºæŽ¥å£ç±»åž‹ï¼Œä¹Ÿå°±æ˜¯è¯´å±€éƒ¨å˜é‡ä½¿ç”¨çš„æ˜¯æŽ¥å£ç±»åž‹ï¼Œåœ¨çœŸæ­£äº‹åŠ¡é€»è¾‘ä»£ç ç¼–å†™æ—¶è°ƒç”¨çš„æ˜¯æŠ½è±¡æ¨¡å—çš„æ–¹æ³•ï¼ˆå³æŽ¥å£æš´éœ²çš„æ–¹æ³•å’ŒåŠŸèƒ½)ã€‚ä¹Ÿå°±æ˜¯è¯´æ•´ä½“ä¸Šè€Œè¨€é«˜å±‚æ¨¡å—ä¾èµ–çš„æ˜¯æŠ½è±¡å±‚ï¼Œè¿™ä¸ªè®¾è®¡ç¬¦åˆDIPã€‚ éµå®ˆäº†DIPçš„è®¾è®¡æ˜Žæ˜¾æ¯”ä¹‹å‰çš„è®¾è®¡æœ‰æ›´å¥½åœ°å¯æ‰©å±•æ€§ï¼Œæ¨¡å—é—´çš„è€¦åˆæ€§æ˜Žæ˜¾é™ä½Žï¼ˆæ¨¡å—é—´å°½é‡é€šè¿‡æŽ¥å£æ¥è€¦åˆï¼‰ã€‚éµå®ˆDIPçš„è®¾è®¡å¯ä»¥è½»æ˜“åœ°é€šè¿‡æ‰©å±•åº•å±‚æ¨¡å—çš„å®žçŽ°ç±»æ¥åº”å¯¹éœ€æ±‚çš„å˜åŒ–ï¼Œå¹¶å°½é‡æœ€å°åŒ–ä»£ç çš„ä¿®æ”¹ï¼ˆOCPï¼‰ã€‚ä¹‹å‰åˆ†æžOCPæ—¶ä¹Ÿæåˆ°äº†OCPæ˜¯ä¸€ä¸ªç›¸å¯¹æŠ½è±¡å’Œæ•´ä½“åŒ–çš„åŽŸåˆ™ï¼Œä½†æ˜¯ä»Žä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°å½“è®¾è®¡éµå®ˆäº†DIPåŽŸåˆ™ï¼ŒæŸäº›ç¨‹åº¦ä¸Šä¹Ÿèƒ½ä¿è¯ç¨‹åºåœ¨åº”å¯¹éœ€æ±‚å˜åŒ–æ—¶å¯ä»¥éµå®ˆOCPã€‚åŽæ–‡çš„åˆ†æžä¸­ï¼Œè¿˜å¯ä»¥è¿›ä¸€æ­¥çœ‹åˆ°çš„ï¼Œå¦‚æžœä¿è¯äº†å…¶å®ƒäº”ä¸ªè®¾è®¡åŽŸåˆ™ï¼Œå°±å¯ä»¥æ›´å¥½åœ°ä½¿ç¨‹åºåœ¨åº”å¯¹éœ€æ±‚å˜åŒ–æ—¶éµå®ˆOCPã€‚ æŽ¥å£éš”ç¦»åŽŸåˆ™ï¼ˆInterface Segregation Principle, ISPï¼‰ Client should not be forced to depend on methods that they do not use æŽ¥å£éš”ç¦»åŽŸåˆ™çš„æ ¸å¿ƒåœ¨äºŽå°½é‡ä½¿æŽ¥å£ç²¾ç®€åŒ–ï¼Œèƒ½é¿å…æŽ¥å£è¿‡äºŽè‡ƒè‚¿ï¼ŒåŒ…å«è¿‡å¤šæ²¡å¿…è¦çš„æ–¹æ³•ã€‚ Fat Interfaceçš„åå¤„ç”¨ä¸€ä¸ªç®€å•çš„ä¸è‰¯è®¾è®¡å°±å¯ä»¥è¯æ˜Ž: é¦–å…ˆè¿˜æ˜¯æŒ‡æ˜Žéœ€æ±‚ï¼Œæœ‰ä¸¤ä¸ªå®¢æˆ·ç«¯Aå’ŒBï¼ŒAçš„éœ€æ±‚æ˜¯è®©ä¸€è¾†è½¦ç§»åŠ¨å¹¶ç»™å®ƒåŠ æ²¹ï¼ŒBçš„éœ€æ±‚æ˜¯è®©ä¸€è¾†è‡ªè¡Œè½¦ç§»åŠ¨ç„¶åŽå°†è‡ªè¡Œè½¦æŠ˜å æ”¶èµ·ã€‚ é¦–å…ˆé‡‡ç”¨DIPï¼ŒæŠ½è±¡å‡ºæŽ¥å£ä¹‹åŽï¼Œåœ¨ä¾èµ–æŠ½è±¡æŽ¥å£å®Œæˆé«˜å±‚éœ€æ±‚é€»è¾‘å’Œåº•å±‚ç»†èŠ‚å®žçŽ°ã€‚å°æ˜ŽåŒå­¦æ€»ç»“äº†éœ€æ±‚ï¼Œè®¤ä¸ºæŽ¥å£éœ€è¦æš´éœ²äº¤é€šå·¥å…·ç§»åŠ¨ï¼ŒåŠ æ²¹å’ŒæŠ˜å çš„åŠŸèƒ½ç»™é«˜å±‚æ¨¡å—ã€‚äºŽæ˜¯è®¾è®¡äº†ä¸‹é¢çš„ç±»å›¾å’Œç›¸å…³ä»£ç å®žçŽ°ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162public interface Vehicle&#123; public void move(); public void refuel(); public void fold();&#125;public class Car implements Vehicle&#123; @Override public void move()&#123; System.out.println("A car is moving"); &#125; @Override public void refuel()&#123; System.out.println("A car is being refueled") &#125; //æ±½è½¦ä¸å¯æ‹†å¸æŠ˜å ï¼Œå› æ­¤è¯¥æ–¹æ³•é€€åŒ–ä¸ºç©ºæ–¹æ³• @Override public void fold()&#123; &#125;&#125;public class Bike implements Vehicle&#123; @Override public void move()&#123; System.out.println("A bike is moving"); &#125; //è‡ªè¡Œè½¦ä¸éœ€è¦åŠ æ²¹ï¼Œå› æ­¤è¯¥æ–¹æ³•ç›´æŽ¥é€€åŒ–ä¸ºç©ºæ–¹æ³• @Override public void refuel()&#123; &#125; @Override public void fold()&#123; System.out.println("A bike is folded"); &#125;&#125;//å®¢æˆ·ç«¯Aåªæœ‰è°ƒç”¨moveæ–¹æ³•å’Œrefuelæ–¹æ³•çš„éœ€æ±‚public class ClientA&#123; public void dailyTransition(Vehicle vehicle)&#123; vehicle.move(); vehicle.refuel(); &#125;&#125;//å®¢æˆ·ç«¯Båªæœ‰è°ƒç”¨moveæ–¹æ³•å’Œfoldæ–¹æ³•çš„éœ€æ±‚public class ClientB&#123; public void service(Vehicle vehicle)&#123; vehicle.move(); vehicle.fold(); &#125;&#125;public class Test&#123; public static void main(String[] args)&#123; ClientA a = new ClientA(); ClientB b = new ClientB(); Vehicle vehicleA = new Car(); Vehicle vehicleB = new Bike(); a.dailyTransition(vehicleA); b.service(vehicleB); &#125;&#125; ç±»å›¾ä¸­ç»¿è‰²æ¡†ä¸­çš„æ–¹æ³•ä¸ºé€€åŒ–æ–¹æ³•ã€‚ä»Žè¿™ä¸ªä¾‹å­æˆ‘ä»¬å¯ä»¥å¾ˆæ˜Žç¡®çš„çœ‹åˆ°ClientAå’ŒClientBä¸¤ä¸ªå®¢æˆ·ç¨‹åºéƒ½åªéœ€è¦ç”¨åˆ°VehicleæŽ¥å£æš´éœ²çš„éƒ¨åˆ†æ–¹æ³•ã€‚è¿™é‡Œçš„VehicleæŽ¥å£å°±æ˜¯ä¸€ä¸ªèƒ–æŽ¥å£ï¼Œå®ƒçš„ä¸¤ä¸ªå®žçŽ°ç±»Carå’ŒBikeéƒ½è¢«è¿«å®žçŽ°äº†ä¸€äº›å„è‡ªä¸éœ€è¦çš„æ–¹æ³•ã€‚æˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†ï¼Œä»£ç ä¸­å‡ºçŽ°äº†å‡ ä¸ªé€€åŒ–æ–¹æ³•ï¼Œæ˜Žæ˜¾è¿èƒŒäº†LSPï¼Œè¿™ä¹Ÿæ˜¯æŽ¥å£è®¾è®¡æ—¶è¿èƒŒISPæ‰€é—´æŽ¥å¯¼è‡´çš„åŽæžœã€‚ å†æ¥è®¨è®ºä¸€ä¸‹éœ€æ±‚å˜æ›´æ—¶ï¼Œè¿™ç§è®¾è®¡å¯èƒ½å¯¼è‡´çš„é—®é¢˜ã€‚æ¯”å¦‚ClientAçŽ°åœ¨çš„éœ€æ±‚å˜æ›´ä¸ºä¸ä»…éœ€è¦å®žçŽ°åŠ æ²¹çš„åŠŸèƒ½ï¼Œè¿˜éœ€è¦è¿”å›žæ‰€åŠ çš„æ²¹é‡ã€‚é‚£ä¹ˆå¾ˆæ˜Žæ˜¾æˆ‘ä»¬éœ€è¦å¯¹VehicleæŽ¥å£ä¸­refuel()æ–¹æ³•ç­¾åéœ€è¦è¢«æ›´æ”¹ä¸ºrefuel:()Iå³public int refuel()ï¼Œç„¶è€ŒVehicleæŽ¥å£åŒæ—¶è¢«é«˜å±‚å’Œåº•å±‚ä¾èµ–ï¼Œå¯¼è‡´æ‰€æœ‰å®žçŽ°VehicleæŽ¥å£çš„å­ç±»éƒ½éœ€è¦è¢«ä¿®æ”¹ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä¸ºäº†åº”å¯¹è¿™ä¸ªéœ€æ±‚å˜æ›´ï¼ŒCar, Bike, Vehicle, ClientA è¿™å‡ ä¸ªç±»éƒ½éœ€è¦åšä¿®æ”¹ï¼Œè¿èƒŒäº†OCPã€‚è¿™ä¸ªä¾‹å­ä¹Ÿè¯´æ˜Žäº†è¿™å…­æ¡è®¾è®¡åŽŸåˆ™å¹¶éžå­¤ç«‹å­˜åœ¨çš„ï¼Œè€Œæ˜¯ç›¸è¾…ç›¸æˆçš„ï¼Œä¸€ä¸ªå¥½çš„è®¾è®¡ä¼šå°½é‡å…¼é¡¾è¿™å…­æ¡åŽŸåˆ™ï¼Œè®¾è®¡æ—¶ä¸€æ—¦ä¸¥é‡è¿åå…¶ä¸­ä¸€æ¡åŽŸåˆ™ï¼Œå¾ˆå¯èƒ½äº§ç”Ÿè¿žé”æ•ˆåº”ï¼Œå¯¼è‡´å…¶å®ƒå¤šæ¡è§„åˆ™çš„è¿åã€‚ æ¨¡å—å’Œæ¨¡å—é—´çš„ä¾èµ–å’Œè€¦åˆæ˜¯é€šè¿‡æŽ¥å£å®Œæˆçš„ï¼ˆå‰æ–‡ä¸­DIPæœ‰è®²è§£è¿‡ï¼‰ï¼Œå°½é‡ç²¾ç®€æŽ¥å£ä¹Ÿå°±æ˜¯å°½é‡å‡å°‘æ¨¡å—é—´çš„è€¦åˆã€‚ä¸Šé¢åŽŸå§‹è®¾è®¡çš„ä¾‹å­ä¸­ clientAå®¢æˆ·æ¨¡å—é€šè¿‡VehicleæŽ¥å£å’Œåº•å±‚ç»†èŠ‚æ¨¡å—è€¦åˆï¼Œç„¶è€Œç”±äºŽVehicleè¢«è®¾è®¡æˆäº†èƒ–æ¨¡å—ï¼Œæ·»åŠ äº†ä¸å¿…è¦çš„æ–¹æ³•ï¼Œå¯¼è‡´clientAä¸Žåº•å±‚æœ‰äº†ä¸å¿…è¦çš„è€¦åˆã€‚è€¦åˆè¶Šå¤šï¼Œrigidityå’Œfragilityä¹Ÿä¼šå¢žåŠ ï¼Œè¶Šä¸åˆ©äºŽåº”å¯¹éœ€æ±‚å˜æ›´ã€‚ å®žé™…ä¸Šå‰é¢å°æ˜ŽåŒå­¦çš„è®¾è®¡ä¸»è¦é—®é¢˜å‡ºåœ¨äº†æ²¡æœ‰åˆ†ç¦»å®¢æˆ·ï¼Œæ²¡æœ‰æ ¹æ®ä¸åŒå®¢æˆ·æ¨¡å—æŠ½è±¡å‡ºæŽ¥å£ï¼Œè€Œæ˜¯ç›´æŽ¥å°†æ‰€æœ‰å®¢æˆ·çš„éœ€æ±‚æ··ä¸ºä¸€è°ˆæ¥ä½œä¸ºæŽ¥å£è®¾è®¡çš„ä¾æ®ï¼Œæœ€ç»ˆå¯¼è‡´äº†èƒ–æŽ¥å£ã€‚â€œè§äººè¯´äººè¯ï¼Œè§é¬¼è¯´é¬¼è¯â€ï¼Œè¿™ä¹Ÿæ˜¯ä¸€é¡¹å¾ˆé‡è¦çš„æŠ€èƒ½ï¼Œ æŽ¥å£è®¾è®¡å¿…é¡»æ ¹æ®ä¸åŒçš„å®¢æˆ·äººç¾¤ï¼Œå®¢æˆ·éœ€æ±‚æ¥æä¾›æœ€ç²¾ç®€åŒ–çš„å®šåˆ¶æœåŠ¡ã€‚çŽ°åœ¨ä»Žå¤´å¼€å§‹è®¾è®¡ï¼Œåˆ†æžå®¢æˆ·éœ€æ±‚ï¼Œå®¢æˆ·Aéœ€æ±‚æ˜¯è®©ä¸€è¾†è½¦ç§»åŠ¨å¹¶ç»™å®ƒåŠ æ²¹ï¼Œé¢å‘å®¢æˆ·Açš„æŽ¥å£éœ€è¦æš´éœ²ç§»åŠ¨å’ŒåŠ æ²¹ï¼›å®¢æˆ·Bçš„éœ€æ±‚æ˜¯è®©ä¸€è¾†è‡ªè¡Œè½¦ç§»åŠ¨ç„¶åŽå°†è‡ªè¡Œè½¦æŠ˜å æ”¶èµ·ï¼Œé¢å‘å®¢æˆ·Bçš„æŽ¥å£éœ€è¦æš´éœ²ç§»åŠ¨å’ŒæŠ˜å ã€‚è€ƒè™‘åˆ°äºŒè€…éƒ½éœ€è¦â€œç§»åŠ¨â€åŠŸèƒ½ï¼Œè€ƒè™‘å…ˆè®¾è®¡å‡ ä¸ªé«˜å†…èšçš„æŽ¥å£ï¼Œç„¶åŽå°†æš´éœ²ç»™å®¢æˆ·Aå’ŒBçš„æŽ¥å£è®¾è®¡ä¸ºç»§æ‰¿è¿™äº›æŽ¥å£çš„å­æŽ¥å£ã€‚å…·ä½“ä»£ç å®žçŽ°å°±ä¸å†è¯¦è¿°äº†ï¼Œç±»å›¾å¦‚ä¸‹ï¼š è¿™é‡Œå†å•°å—¦ä¸€å¥ï¼ŒæŽ¥å£è¦ç²¾ç®€ï¼Œä½†æ˜¯æ²¡å¿…è¦è¿‡åˆ†ç²¾ç®€ã€‚ä¸è€ƒè™‘å®¢æˆ·çš„éœ€æ±‚ç²’åº¦ï¼Œä¸€å‘³åœ°å°†æ¯ä¸ªæ–¹æ³•éƒ½åˆ—æˆä¸€ä¸ªæŽ¥å£çš„åšæ³•æ˜¯ä¸æ˜Žæ™ºçš„ï¼Œè¿™æ ·åªä¼šå¤§å¤§å¢žåŠ è½¯ä»¶çš„å¤æ‚åº¦ã€‚ æŽ¥å£éš”ç¦»åŽŸåˆ™ï¼ˆISPï¼‰ vs å•ä¸€èŒè´£åŽŸåˆ™ï¼ˆSRPï¼‰ åˆ†æžåˆ°è¿™é‡Œï¼Œä¸€èˆ¬éƒ½ä¼šäº§ç”Ÿè¿™æ ·çš„ç–‘é—®ï¼šISPä¸€ç›´å¼ºè°ƒè¦ç²¾ç®€æŽ¥å£ï¼Œå¦‚æžœæŽ¥å£ç²¾ç®€ä¸ºåªè´Ÿè´£ä¸€ä¸ªèŒè´£ï¼Œé‚£ISPå²‚ä¸æ˜¯å’Œä¹‹å‰æåˆ°çš„SRPæ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Ÿ è¿™ä¸¤ä¸ªåŽŸåˆ™ä¸»è¦æœ‰å¦‚ä¸‹åŒºåˆ«ï¼š ISPæ˜¯ä»…é’ˆå¯¹æŽ¥å£çš„åŽŸåˆ™ï¼Œæ˜¯æ›´åå‘äºŽæ¡†æž¶çš„åŽŸåˆ™ï¼›SRPæ˜¯é¦–è¦é’ˆå¯¹ç±»çš„åŽŸåˆ™ï¼Œé™„å¸¦æ–¹æ³•å’ŒæŽ¥å£ï¼Œæ˜¯æ›´åå‘äºŽå®žçŽ°ç»†èŠ‚çš„åŽŸåˆ™ã€‚ ISPè™½ç„¶è¦ç²¾ç®€æŽ¥å£ï¼Œä½†æ˜¯æ˜¯æ ¹æ®ç‰¹å®šçš„å®¢æˆ·éœ€æ±‚æ¥è¿›è¡Œå®šåˆ¶åŒ–çš„è®¾è®¡ï¼Œç²¾ç®€ä¾æ®çš„æ˜¯å®¢æˆ·çš„éœ€æ±‚è€Œä¸æ˜¯å•ä¸€èŒè´£ã€‚ è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLaw of Demeter, LoDï¼‰ Only talk to your friends who share your concerns è¿ªç±³ç‰¹æ³•åˆ™çš„æ ¸å¿ƒåœ¨äºŽåªå’Œæœ‹å‹è¯´è¯ï¼Œä¸è¦å’Œé™Œç”Ÿäººè¯´è¯ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè°æ˜¯æœ‹å‹ï¼Œè°æ˜¯é™Œç”Ÿäººï¼Ÿåœ¨æ­¤ç¯‡åšæ–‡çš„å¼€å¤´æåˆ°è¿‡ï¼Œç±»ä¸Žç±»ä¹‹é—´çš„æ¨ªå‘å…³ç³»æœ‰å››ç§ï¼šä¾èµ–ï¼Œå…³è”ï¼Œèšåˆï¼Œç»„åˆã€‚ä¸¤ä¸ªç±»åªè¦æ˜¯ä»¥è¿™å››ç§å…³ç³»å…³è”åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç§°å®ƒä»¬ä¸ºæœ‹å‹ï¼Œé™¤äº†æ˜¯ç”±äºŽå±€éƒ¨å˜é‡äº§ç”Ÿçš„ä¾èµ–å…³ç³»ã€‚åœ¨è®²è¿™å››ç§æ¨ªå‘å…³ç³»çš„æ—¶å€™æåˆ°è¿‡ï¼Œå…³è”ï¼Œèšåˆå’Œç»„åˆå…³ç³»ä¸€èˆ¬æ˜¯é€šè¿‡æˆå‘˜å˜é‡è§¦å‘çš„ï¼Œè€Œä¾èµ–å…³ç³»æ˜¯ç”±å±€éƒ¨å˜é‡ï¼Œæ–¹æ³•å‚æ•°ï¼Œæ–¹æ³•è¿”å›žå€¼å’Œé™æ€æ–¹æ³•è°ƒç”¨å‡ºå‘çš„ã€‚å¦‚æžœæ˜¯ç”±äºŽå±€éƒ¨å˜é‡è§¦å‘çš„ä¾èµ–å…³ç³»ï¼Œåˆ™å…³è”çš„ä¸¤ä¸ªç±»ä¸æ˜¯æœ‹å‹å…³ç³»ã€‚ æŒ‰ç…§æƒ¯ä¾‹ï¼Œè¿˜æ˜¯ç”¨ä¾‹å­æ¥è§£é‡Šï¼š 123456789101112131415161718192021222324252627282930313233343536public class Teacher&#123; public void findAndPrint(String name, ClassMonitor monitor)&#123; //studentå¯¹è±¡ä»¥å±€éƒ¨å˜é‡å‡ºçŽ°åœ¨Teacherç±»çš„æ–¹æ³•ä¸­ï¼Œæ­¤å¤„å’Œé™Œç”Ÿç±»å¯¹è¯äº† Student student = monitor.find(name); student.print(); &#125;&#125;public class ClassMonitor&#123; private List&lt;Student&gt; list; public Student(List list)&#123; this.list = list; &#125; public Student find(String name)&#123; for(Student tmp: list)&#123; if(tmp.getName().equals(name))&#123; return tmp; &#125; &#125; return null; &#125;&#125;public class Student&#123; private String name; public Student(String name)&#123; this.name = name; &#125; public void print()&#123; System.out.println(name); &#125; public String getName()&#123; return this.name; &#125;&#125; åœ¨Teacherç±»çš„findAndPrint()æ–¹æ³•ä¸­å’Œé™Œç”ŸäººStudentç±»å¯¹è¯ï¼Œè¿èƒŒäº†LoPã€‚æƒ³æƒ³ä¹Ÿæ˜¯ï¼Œè€å¸ˆæ˜Žæ˜Žå¯ä»¥ç›´æŽ¥è®©ç­é•¿ç»™åŒå­¦ä¼ è¾¾ä»»åŠ¡ï¼Œä½•å¿…ååè¦ç­é•¿æŠŠåŒå­¦å«åˆ°èº«è¾¹æ¥äº²è‡ªç»™å­¦ç”Ÿåˆ†é…ä»»åŠ¡ã€‚å°†ä¸Šè¿°è®¾è®¡ç¨ä½œä¿®æ”¹ï¼Œè®©Teacherçš„æœ‹å‹ç±»ClassMonitorä½œä¸ºä¸­ä»‹æ¥å’Œé™Œç”Ÿäººé€šä¿¡ï¼Œé¿å…å’Œé™Œç”Ÿäººçš„è€¦åˆã€‚ä¿®æ”¹åŽä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839public class Teacher&#123; public void findAndPrint(String name, ClassMonitor monitor)&#123; //ä½¿ç”¨æœ‹å‹ç±»ClassTeacherä½œä¸ºä¸­ä»‹é—´æŽ¥ä¸Žé™Œç”Ÿäººé€šä¿¡ monitor.findAndPrint(name) &#125;&#125;public class ClassMonitor&#123; private List&lt;Student&gt; list; public Student(List list)&#123; this.list = list; &#125; public Student find(String name)&#123; for(Student tmp: list)&#123; if(tmp.getName().equals(name))&#123; return tmp; &#125; &#125; return null; &#125; //ClassTeacherä½œä¸ºä¸­ä»‹æ¥é¿å…Teacherå’Œé™Œç”Ÿç±»Studentç›´æŽ¥é€šä¿¡ public void findAndPrint(String name)&#123; find(name).print(); &#125;&#125;public class Student&#123; private String name; public Student(String name)&#123; this.name = name; &#125; public void print()&#123; System.out.println(name); &#125; public String getName()&#123; return this.name; &#125;&#125; LoDçš„ç›®çš„åœ¨äºŽå°½é‡å‡å°‘ç±»ä¸Žç±»ä¹‹é—´çš„è€¦åˆï¼Œå°½é‡ä¿è¯ç±»ä¸­ä¸è¦å‡ºçŽ°é™Œç”Ÿç±»ï¼ˆéžæœ‹å‹çš„ç±»)ã€‚å½“ç„¶JDKæä¾›çš„APIä¸åœ¨é™Œç”Ÿäººä¹‹åˆ—ï¼Œå¦åˆ™è¿˜å¦‚ä½•èƒ½æ„‰å¿«åœ°æ•²ä»£ç äº†ðŸ˜‚ã€‚ æœ€åŽç”¨ä¸€æ®µè¯æ€»ç»“è¿™å…­å¤§è®¾è®¡åŽŸåˆ™ï¼š SRPè§„å®šä¸€ä¸ªç±»çš„èŒè´£è¦å•ä¸€ï¼›LSPè¡¨ç¤ºå­ç±»é‡å†™è¦éµå®ˆçˆ¶ç±»ï¼ˆæˆ–çˆ¶æŽ¥å£ï¼‰æ–¹æ³•çš„åŠŸèƒ½å¥‘çº¦ï¼›DIPå‘Šè¯‰æˆ‘ä»¬è¦é¢å‘æŽ¥å£ç¼–ç¨‹ï¼›ISPæ˜¯è¯´æŽ¥å£è¦å°½é‡ç²¾ç®€ï¼ŒæŽ¥å£çš„è®¾è®¡è¦å¯¹åº”å…·ä½“å®¢æˆ·çš„éœ€æ±‚ï¼›LoDå‘Šè¯‰æˆ‘ä»¬ä¸è¦å’Œé™Œç”Ÿäººè¯´è¯ï¼ˆç±»ä¸Žç±»ä¹‹é—´è¦å°½é‡å‡å°‘è€¦åˆï¼‰ï¼›OCPæ˜¯è¯´è½¯ä»¶è¦å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼ŒOCPæ˜¯å‰äº”ç§ç§è®¾è®¡åŽŸåˆ™çš„æ€»çº²ã€‚å°½é‡éµå®ˆå‰äº”ç§åŽŸåˆ™èƒ½ä½¿å¾—è½¯ä»¶è®¾è®¡æ›´åˆç†ï¼Œè®©è½¯ä»¶åº”å¯¹éœ€æ±‚å˜æ›´æ—¶æ›´å®¹æ˜“éµå®ˆOCPã€‚ è¿™ç¯‡æ–‡ç« åªæ˜¯è®¾è®¡æ¨¡å¼æ€»ç»“çš„å¼€å§‹ï¼Œå¾ˆå¤šçŸ¥è¯†çš„ç†è§£å’Œè¿ç”¨å¹¶ä¸æ˜¯å¾ˆé€å½»ï¼Œå¾…å†…åŠŸä¿®ç‚¼ä»¥åŽï¼Œå†å›žè¿‡æ¥è¡¥å……ä¸€äº›æ–°çš„æ„Ÿæ‚Ÿå§ï¼Œåœ¨æ­¤å…ˆç«‹ä¸€ä¸ªFlagðŸ‡¨ðŸ‡³ ä¸ºäº†å®žçŽ°å°†å¤æ‚é—®é¢˜ç®€å•åŒ–ï¼Œæ¨¡å¼åŒ–ï¼Œæ•´å‡ºgraceful codeï¼Œäº†è§£å¸¸è§çš„è®¾è®¡æ‹›å¼è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚è™½è¯´é‡‘åº¸å…ˆç”Ÿæ•™å¯¼å¤§å®¶â€œæ— æ‹›èƒœæœ‰æ‹›â€ï¼Œä½†æ˜¯å¯¹äºŽæˆ‘è¿™ç§æˆ˜äº”æ¸£è€Œè¨€ï¼Œä»Žä¸€æ‹›ä¸€å¼å­¦èµ·æ˜¾ç„¶æ›´ä¸ºç¨³å¦¥ã€‚ 2 3ç§å¸¸è§è®¾è®¡æ¨¡å¼æ ¹æ®å…¶ç‰¹å¾å’Œåº”ç”¨åœºåˆå¯ä»¥åˆ†ä¸ºä¸‰å¤§ç±»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå¼€å¯æ€ç»´å¯¼å›¾æ¨¡å¼ï¼ŒæŒç»­ä¿®æ”¹æ›´æ–°ï¼‰ å…·ä½“æ¯ç§è®¾è®¡æ¨¡å¼çš„åˆ†æžæ€»ç»“ï¼Œä¼šæŠ½æ—¶é—´é™†ç»­æ›´æ–°åœ¨ä¸‹é¢è¿™ä¸ªç›®å½•ä¸­ï¼š http://hippo-jessy.com/categories/Design-Pattern/ References [1] ã€Šè®¾è®¡æ¨¡å¼ä¹‹ç¦…ã€‹ [2] Agile Software Development, Principle, Patterns, Practices [3] http://blog.csdn.net/zhengzhb/article/details/7296944 [4] http://blog.csdn.net/zhengzhb/article/details/7190158]]></content>
      <categories>
        <category>Design Pattern</category>
      </categories>
      <tags>
        <tag>Design Pattern</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº-1ã€‘Resolution vs Binding vs Dispatch]]></title>
    <url>%2F2017%2F02%2F13%2F%E3%80%90%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA-1%E3%80%91Resolution-vs-Binding-vs-Dispatch%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘æ€»ç»“ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹æ–¹æ³•è°ƒç”¨ç›¸å…³å†…å®¹æ—¶ï¼Œå‘çŽ°å¯¹ä¸‹é¢è¿™å‡ ä¸ªæ¦‚å¿µç†è§£æœ‰åå·®ï¼š Resolution, Static Binding/Dynamic Binding, Static Dispatch/Dynamic Dispatch, Single Dispatch/Multiple Dispatch å…¶ä¸­æœ€å®¹æ˜“äº§ç”Ÿæ··æ·†çš„æ˜¯Bindingå’ŒDispatchè¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œæœ¬ç¯‡åšå®¢ä¼šä»Žä¸€èˆ¬è§’åº¦ä»¥åŠJavaçš„è§’åº¦æ¥åˆ†æžä¸Šè¿°å‡ ç§æ¦‚å¿µçš„å·®åˆ«ï¼Œå¹¶å¯¹â€œJVMæ–¹æ³•è°ƒç”¨â€œè¿™ä¸€è¯é¢˜å±•å¼€ä¸€äº›å»¶ä¼¸æ€è€ƒå’Œè®¨è®ºã€‚ åœ¨å¼€å§‹è®¨è®ºä¹‹å‰ï¼Œéœ€è¦æ˜Žç¡®ä¸‹é¢å‡ ä¸ªæ¦‚å¿µï¼š 1. Static Type(Apparent Type) é™æ€ç±»åž‹ï¼ˆå¤–è§‚ç±»åž‹ï¼‰ï¼Œ Actual Typeï¼ˆå®žé™…ç±»åž‹ï¼‰ äºŒè€…çš„åŒºåˆ«ç”¨ä¸€ä¸ªä¾‹å­å°±èƒ½è§£é‡Šï¼š 1Person sample = new Man(); è¿™é‡Œï¼Œsampleå˜é‡çš„é™æ€ç±»åž‹ï¼ˆç¼–è¯‘æ—¶ç±»åž‹ï¼‰æ˜¯Personï¼Œ å®žé™…ç±»åž‹ï¼ˆè¿è¡Œæ—¶ç±»åž‹ï¼‰æ˜¯Man 2. æ–¹æ³•çš„æŽ¥æ”¶è€…(Receiver) 12Person man = new Man();man.speak(); ä¸Šä¾‹ä¸­ï¼Œå¯¹è±¡manå°±æ˜¯speak()æ–¹æ³•çš„æ‰€æœ‰è€…ï¼Œä¹Ÿæ˜¯speak()æ–¹æ³•çš„æŽ¥æ”¶è€… 3. å±žæ€§çš„æ‰€æœ‰è€… 123456// class Person&#123;// String name = "unknown";// &#125;Person man = new Man();System.out.println(man.name) ä¸Šä¾‹ä¸­, å¯¹è±¡manæ˜¯å±žæ€§nameçš„æ‰€æœ‰è€… 4. å®—é‡ æ–¹æ³•çš„æŽ¥æ”¶è€…å’Œæ–¹æ³•çš„å‚æ•°ç»Ÿç§°å®—é‡ï¼Œä¸»è¦åœ¨å•åˆ†æ´¾å’Œå¤šåˆ†æ´¾ä¸­ç”¨åˆ°è¿™ä¸ªæ¦‚å¿µï¼Œå•åˆ†æ´¾æ˜¯ä»…æ ¹æ®ä¸€ç§å®—é‡ï¼ˆæ¯”å¦‚æ–¹æ³•çš„æŽ¥æ”¶è€…ï¼‰å¯¹æ–¹æ³•è¿›è¡Œé€‰æ‹©ï¼Œå¤šåˆ†æ´¾æ˜¯æ ¹æ®å¤šç§å®—é‡å¯¹æ–¹æ³•è¿›è¡Œé€‰æ‹©ã€‚ 5. Javaä¸­çš„ è™šæ–¹æ³• vs éžè™šæ–¹æ³• éžè™šæ–¹æ³•ä¸»è¦åŒ…æ‹¬invokestaticå’ŒinvokespecialæŒ‡ä»¤è°ƒç”¨çš„æ–¹æ³•ä»¥åŠfinalæ–¹æ³•ï¼Œå³ç±»æ–¹æ³•ï¼Œç§æœ‰æ–¹æ³•ï¼Œæž„é€ å™¨ï¼Œfinalæ–¹æ³•ç­‰ã€‚ä¸ªäººå°†å…¶ç†è§£ä¸ºæ— æ³•è¢«é‡å†™çš„æ–¹æ³•é›†åˆã€‚ è™šæ–¹æ³•ä¸»è¦åŒ…æ‹¬invokevirtualæŒ‡ä»¤è°ƒç”¨çš„æ–¹æ³•ï¼ˆé™¤äº†finalæ–¹æ³•ï¼‰ï¼Œå³ä¸ç”¨finalä¿®é¥°çš„å®žä¾‹æ–¹æ³•ã€‚ ä¸‹é¢å¼€å§‹æ­£å¼è®¨è®ºï¼š Resolution Resolution, è§£æžæ˜¯æŒ‡å°†ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æŽ¥å¼•ç”¨çš„è¿‡ç¨‹ï¼ŒJVM Specificationå¹¶æœªè§„å®šå…¶å‘ç”Ÿæ—¶é—´ï¼Œåªæ˜¯è§„å®šåœ¨ä¸‹é¢åå…­æ¡æŒ‡ä»¤æ‰§è¡Œå‰å¿…é¡»å®Œæˆè¿™äº›æŒ‡ä»¤æ¶‰åŠçš„ç¬¦å·å¼•ç”¨çš„è§£æž: new, getstatic, putstatic, invokestatic, getfield, putfield, invokespecial, invokevirtual, invokeinterface, invokedynamic, anewarray, multianewarray, ldc, ldc_w, checkcast, instanceofã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œè§£æžå¯ä»¥å‘ç”Ÿåœ¨ä¸¤ä¸ªæ—¶é—´æ®µï¼šç±»åŠ è½½æ—¶æœŸå’Œç¬¦å·å¼•ç”¨å°†è¢«ä½¿ç”¨æ—¶ã€‚å…¶ä¸­ï¼Œinvokedynamicå¿…é¡»ç­‰åˆ°æŒ‡ä»¤æ‰§è¡Œæ—¶æ‰èƒ½è¿›è¡Œè§£æžåŠ¨ä½œï¼Œå…¶å®ƒæŒ‡ä»¤éƒ½å¯ä»¥éšæ„é€‰æ‹©ä¸¤ä¸ªæ—¶é—´æ®µä¸­çš„ä¸€ä¸ªï¼ˆæ ¹æ®è™šæ‹Ÿæœºçš„å…·ä½“å®žçŽ°è€Œå®šï¼‰ã€‚é€šå¸¸ï¼Œéžè™šæ–¹æ³•çš„è§£æžéƒ½åœ¨ç±»åŠ è½½æ—¶æœŸå®Œæˆäº†ã€‚ Binding ç»‘å®šæ˜¯é’ˆå¯¹ç±»åž‹è€Œè¨€çš„ï¼ŒæŒ‡çš„æ˜¯ç±»åž‹ç¡®å®šçš„è¿‡ç¨‹ï¼Œé€šå¸¸å‘ç”Ÿåœ¨è®¿é—®å¯¹è±¡æˆå‘˜æˆ–è€…æ–¹æ³•è°ƒç”¨çš„è¿‡ç¨‹ä¸­ã€‚å½“æˆ‘ä»¬è°ˆè®ºæ–¹æ³•æˆ–å±žæ€§çš„è®¿é—®æ—¶åŠ¨æ€ç»‘å®šè¿˜æ˜¯é™æ€ç»‘å®šæ—¶ï¼Œå®žé™…ä¸ŠæŒ‡çš„æ˜¯æ–¹æ³•çš„æŽ¥æ”¶è€…å’Œå±žæ€§çš„æ‰€æœ‰è€…çš„ç±»åž‹ç¡®å®šï¼ˆdetermine by atual type or determine by static typeï¼‰ã€‚ æ ¹æ®ç±»åž‹ç¡®å®šå‘ç”Ÿåœ¨è¿è¡ŒæœŸè¿˜æ˜¯ç¼–è¯‘æœŸä»¥åŠä¾æ®å®žé™…ç±»åž‹è¿˜æ˜¯é™æ€ç±»åž‹ï¼Œå¯ä»¥å°†Bindingåˆ†ä¸ºDynamic Bindingå’ŒStatic Bindingä¸¤ç±»ã€‚ä¸‹é¢è¿™ä¸ªç»å…¸çš„ä¾‹å­åæ˜ äº†äºŒè€…çš„åŒºåˆ«ã€‚ 12345678910111213141516171819202122232425class Person&#123; int age = 30; int getAge()&#123; return age; &#125;&#125;class Man extends Person&#123; int age = 40; int height = 160; int getAge()&#123; return age; &#125;&#125;public class Demo&#123; public static void main(String[] args)&#123; Person a = new Man(); // a.ageå†…éƒ¨ä¸»è¦é€šè¿‡å¦‚ä¸‹å­—èŠ‚ç å®žçŽ°ï¼š // getfield #5 // Field test/Person.age:I System.out.println(a.age); // a.getAge()å†…éƒ¨ä¸»è¦é€šè¿‡å¦‚ä¸‹å­—èŠ‚ç å®žçŽ°ï¼š // invokevirtual #7 // Method test/Person.getAge:()I System.out.println(a.getAge()); &#125;&#125; è¾“å‡ºçš„ç»“æžœå¦‚ä¸‹ï¼š 123040 è¿™ä¸ªä¾‹å­å®žé™…ä¸Šæ¶‰åŠäº†å¾ˆå¤šæœ¬ç¯‡åšå®¢è¦è®¨è®ºçš„æ¦‚å¿µï¼šé™æ€ç»‘å®šï¼ŒåŠ¨æ€ç»‘å®šï¼Œå±žæ€§éšè—ï¼Œæ–¹æ³•é‡å†™ï¼ŒåŠ¨æ€åˆ†æ´¾ï¼Œå•åˆ†æ´¾ç­‰ç­‰ï¼Œè¿™é‡Œä¸»è¦ä»Žé™æ€ç»‘å®šå’ŒåŠ¨æ€ç»‘å®šçš„è§’åº¦è¿›è¡Œåˆ†æžã€‚ Static Binding ç±»åž‹åœ¨ç¼–è¯‘æœŸå°±å·²ç»å¯ä»¥ç¡®å®šï¼Œå¹¶ä¸”è¯¥ç±»åž‹ç¡®å®šåœ¨è¿è¡ŒæœŸä¿æŒä¸å˜ï¼Œå³æœ€ç»ˆé€šè¿‡é™æ€ç±»åž‹ç¡®å®šè¯¥å˜é‡ç±»åž‹ã€‚Javaä¸­ï¼Œåœ¨Javaä¸­ï¼Œé™æ€ç»‘å®šé€šå¸¸ç”¨äºŽå±žæ€§æ‰€æœ‰è€…çš„ç±»åž‹ç»‘å®šï¼Œéžè™šæ–¹æ³•ï¼ˆç±»æ–¹æ³•ï¼Œç§æœ‰æ–¹æ³•ï¼Œæž„é€ å™¨æ–¹æ³•ï¼Œfinalæ–¹æ³•ï¼‰æŽ¥æ”¶è€…çš„ç±»åž‹ç»‘å®šï¼Œä»¥åŠæ–¹æ³•å‚æ•°çš„ç±»åž‹ç»‘å®šã€‚ ä¸Šä¾‹ä¸­ï¼Œageå±žæ€§æ˜¯å¯¹è±¡å±žæ€§ï¼Œageå±žæ€§çš„æ‰€æœ‰è€…ï¼ˆå¯¹è±¡aï¼‰åœ¨æ­¤æ¬¡è®¿é—®ä¸­æ˜¯é™æ€ç»‘å®šï¼Œå› æ­¤è¿™é‡Œå¯¹è±¡açš„ç±»åž‹åœ¨ç¼–è¯‘æœŸè¢«ç¡®å®šä¸ºaçš„é™æ€ç±»åž‹Personï¼Œå¹¶ä¸”è¯¥ç±»åž‹ç¡®å®šåŽåœ¨è¿è¡ŒæœŸæ‰§è¡ŒgetfieldæŒ‡ä»¤æ—¶ä¹Ÿä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæœ€åŽ&quot;a.age&quot;è°ƒç”¨çš„æ˜¯açš„é™æ€ç±»åž‹Personçš„ageå±žæ€§å€¼ã€‚è¿™é‡Œä¹Ÿæ¶‰åŠåˆ°äº†å±žæ€§éšè—çš„é—®é¢˜ï¼šçˆ¶ç±»å’Œå­ç±»æœ‰åŒååŸŸæ—¶ï¼ŒåŸŸçš„è®¿é—®æ˜¯é€šè¿‡åŸŸçš„æ‰€æœ‰è€…çš„é™æ€ç±»åž‹å†³å®šçš„ã€‚æ¯”å¦‚ä¸Šé¢ä¾‹å­ä¸­å¦‚æžœæƒ³è®¿é—®å­ç±»Manä¸­çš„ageï¼Œåˆ™å¿…é¡»å°†å¯¹è±¡aå¼ºåˆ¶è½¬åž‹ä¸ºManï¼Œæˆ–è€…åœ¨å½“æ—¶åˆ›å»ºä¹‹åˆå°±å£°æ˜Žä¸ºManç±»åž‹è€ŒéžPersonç±»åž‹ã€‚ é€šè¿‡é™æ€ç»‘å®šæ¥å®žçŽ°è®¿é—®å¯¹è±¡å±žæ€§æ‰€æœ‰è€…ç±»åž‹ç»‘å®šçš„å¥½å¤„åœ¨äºŽï¼šç¼–è¯‘æœŸå°±å¯ä»¥ç¡®å®šæœ€ç»ˆç±»åž‹ï¼Œé¿å…äº†åŠ¨æ€æŸ¥æ‰¾ï¼Œé«˜æ•ˆå¿«é€Ÿï¼Œä½†æ˜¯æ˜¯ä»¥ç‰ºç‰²ä¸€éƒ¨åˆ†çµæ´»æ€§ä¸ºä»£ä»·çš„ã€‚ Dynamic Binding ç±»åž‹åœ¨è¿è¡Œæ—¶æ‰èƒ½æœ€ç»ˆç¡®å®šï¼Œé€šè¿‡æœ€ç»ˆå®žé™…ç±»åž‹ï¼ˆè¿è¡Œæ—¶ç±»åž‹ï¼‰æ¥ç¡®å®šå˜é‡ç±»åž‹ã€‚Javaä¸­ï¼ŒåŠ¨æ€ç»‘å®šé€šå¸¸ç”¨äºŽè™šæ–¹æ³•ï¼ˆå¦‚éžç§æœ‰çš„å®žä¾‹æ–¹æ³•ç­‰ï¼‰æŽ¥æ”¶è€…çš„ç±»åž‹ç»‘å®šã€‚ æŸäº›åŠ¨æ€ç±»åž‹è¯­è¨€å°†åŠ¨æ€ç»‘å®šä½œä¸ºé»˜è®¤çš„å†…éƒ¨å®žçŽ°ã€‚Javaä½œä¸ºä¸€ç§é™æ€ç±»åž‹è¯­è¨€ï¼Œé‡‡å–äº†ä¸€äº›å…¶ä»–çš„æ–¹æ³•æ¥å®žçŽ°åŠ¨æ€ç»‘å®šï¼ˆæ¯”å¦‚invokevirtualæŒ‡ä»¤åŠ¨æ€è¯†åˆ«å¯¹è±¡çš„å®žé™…ç±»åž‹ï¼‰ã€‚ ä¸Šé¢ä¾‹å­ä¸­ï¼ŒgetAge()å±žäºŽè™šæ–¹æ³•ï¼Œ getAge()æ–¹æ³•çš„æŽ¥æ”¶è€…ï¼ˆå¯¹è±¡aï¼‰åœ¨æ­¤æ¬¡è®¿é—®ä¸­æ˜¯åŠ¨æ€ç»‘å®šï¼Œå› æ­¤è¿™é‡Œå¯¹è±¡açš„ç±»åž‹å°½ç®¡åœ¨ç¼–è¯‘æœŸè¢«æ ‡è®°ä¸ºPersonï¼Œæœ€åŽåœ¨è¿è¡ŒæœŸä¼šè¢«invokevirtualæŒ‡ä»¤é‡æ–°ç¡®å®šä¸ºaçš„å®žé™…ç±»åž‹Manï¼Œå¹¶åœ¨Manä¸­æŸ¥æ‰¾èƒ½å¤ŸåŒ¹é…ç¬¦å·å¼•ç”¨ä¸­æ–¹æ³•åå’Œæè¿°ç¬¦çš„æ–¹æ³•ï¼Œå› æ­¤&quot;a.getAge()&quot;è°ƒç”¨çš„æ˜¯açš„å®žé™…ç±»åž‹Mançš„getAgeæ–¹æ³•ã€‚ Dispatch åˆ†æ´¾æ˜¯é’ˆå¯¹æ–¹æ³•è€Œè¨€çš„ï¼ŒæŒ‡çš„æ˜¯æ–¹æ³•ç¡®å®šçš„è¿‡ç¨‹ï¼Œé€šå¸¸å‘ç”Ÿåœ¨æ–¹æ³•è°ƒç”¨çš„è¿‡ç¨‹ä¸­ã€‚åˆ†æ´¾æ ¹æ®æ–¹æ³•é€‰æ‹©çš„å‘ç”Ÿæ—¶æœºå¯ä»¥åˆ†ä¸ºé™æ€åˆ†æ´¾å’ŒåŠ¨æ€åˆ†æ´¾ï¼Œå…¶ä¸­å¯¹äºŽåŠ¨æ€åˆ†æ´¾ï¼Œæ ¹æ®å®—é‡ç§æ•°åˆå¯ä»¥åˆ†ä¸ºå•åˆ†æ´¾å’Œå¤šåˆ†æ´¾ã€‚ æˆ‘æ›´å€¾å‘äºŽå°†åˆ†æ´¾ç†è§£ä¸ºæ˜¯æ–¹æ³•é€‰æ‹©çš„è¿‡ç¨‹è€Œéžæ–¹æ³•ç¡®å®šï¼Œâ€œç¡®å®šâ€è¿™ä¸ªè¯æœ‰â€œä¸€åŠ³æ°¸é€¸â€çš„èµ¶è„šï¼Œè®©äººè¿›å…¥ä¸€ç§è¯¯åŒºï¼šä¸€æ¬¡åˆ†æ´¾å°±èƒ½æœ€ç»ˆç¡®å®šæ‰§è¡Œå“ªä¸ªæ–¹æ³•ã€‚ä½†æ˜¯å®žé™…ä¸Šä»Žæ–¹æ³•ä»£ç åˆ°JVMæœ€ç»ˆç¡®å®šæ‰§è¡Œå“ªä¸ªæ–¹æ³•çš„è¿‡ç¨‹ä¸­ï¼Œä¸­é—´å¯èƒ½ç»è¿‡å¤šæ¬¡åˆ†æ´¾ï¼Œæ¯”å¦‚æŸäº›é‡è½½çš„å®žä¾‹æ–¹æ³•ï¼Œåœ¨ç¼–è¯‘æœŸè¿›è¡Œä¸€æ¬¡æ–¹æ³•é€‰æ‹©ï¼ˆé™æ€åˆ†æ´¾ï¼‰ï¼Œåœ¨è¿è¡ŒæœŸå¯èƒ½è¿˜ä¼šè¿›è¡Œä¸€æ¬¡æ–¹æ³•é€‰æ‹©ï¼ˆåŠ¨æ€åˆ†æ´¾ï¼‰ã€‚ Static Dispatch é™æ€åˆ†æ´¾æŒ‡çš„æ˜¯åœ¨ç¼–è¯‘æœŸé—´è¿›è¡Œçš„æ–¹æ³•é€‰æ‹©ï¼Œé€šå¸¸ä»¥æ–¹æ³•åç§°ï¼Œæ–¹æ³•æŽ¥æ”¶è€…å’Œæ–¹æ³•å‚æ•°çš„é™æ€ç±»åž‹æ¥ä½œä¸ºæ–¹æ³•é€‰æ‹©çš„ä¾æ®ã€‚è¿™äº›å¯ä»¥é™æ€åˆ†æ´¾çš„æ–¹æ³•ä¸€èˆ¬éƒ½å…·æœ‰â€œç­¾åå”¯ä¸€æ€§â€çš„ç‰¹ç‚¹ï¼ˆç­¾ååªè€ƒè™‘å‚æ•°çš„é™æ€ç±»åž‹è€Œä¸ç®¡å‚æ•°çš„å®žé™…ç±»åž‹ï¼‰ï¼Œå³ä¸ä¼šå‡ºçŽ°ç›¸åŒç­¾åçš„æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥åœ¨ç¼–è¯‘æœŸå°±å®žçŽ°æ–¹æ³•ç¡®å®šã€‚Javaä¸­çš„éžè™šæ–¹æ³•ï¼ˆä¸»è¦åŒ…æ‹¬é™æ€æ–¹æ³•ï¼Œç§æœ‰æ–¹æ³•ï¼Œfinalæ–¹æ³•ç­‰ï¼Œè¿™äº›æ–¹æ³•ä¸€èˆ¬ä¸å¯é‡å†™ï¼Œæ•…è€Œä¸ä¼šæœ‰ç›¸åŒç­¾åçš„æƒ…å†µå‡ºçŽ°ï¼‰é€šå¸¸ä»…éœ€è¦é™æ€åˆ†æ´¾å°±å¯ä»¥å®žçŽ°æ–¹æ³•çš„æœ€ç»ˆç¡®å®šï¼Œæ›´ç‰¹åˆ«ä¸€ç‚¹çš„ä¾‹å­æ˜¯é™æ€æ–¹æ³•çš„éšè—ï¼Œä¹Ÿæ˜¯åˆ©ç”¨äº†é™æ€åˆ†æ´¾ï¼ŒåŽé¢ä¼šä¸“é—¨è®²è§£ã€‚è™šæ–¹æ³•çš„é‡è½½åœ¨ç¼–è¯‘æ—¶ä¹Ÿç”¨åˆ°äº†é™æ€åˆ†æ´¾ï¼ˆå°½ç®¡è™šæ–¹æ³•çš„è°ƒç”¨åœ¨è¿è¡Œæ—¶è¿˜ä¼šæ¶‰åŠåŠ¨æ€åˆ†æ´¾ï¼‰ã€‚ å…³äºŽã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸­8.3.1è§£æžéƒ¨åˆ†çš„ä¸€äº›æƒ³æ³•ï¼ˆResolution vs Dispatchï¼‰ ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¹¦ä¸­åœ¨æ–¹æ³•è°ƒç”¨8.3.1å¯¹é™æ€åˆ†æ´¾ä»¥åŠè§£æžä¸¤ä¸ªæ¦‚å¿µçš„è§£é‡Šæœ‰äº›æ··ä¹±ï¼Œå‚è€ƒäº†ä¸€äº›èµ„æ–™ä¹‹åŽï¼Œè¿™é‡Œæå‡ºä¸€äº›æ›´ä¸ºæ¸…æ™°çš„åˆ†æžã€‚ é¦–å…ˆåŒºåˆ†Static Dispatch ä¸ŽResolutionçš„åŒºåˆ«(é¡ºä¾¿é™„å¸¦Dynamic Dispatch)ï¼š ä¸ªäººç†è§£çš„æ˜¯resolutionæ˜¯ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æŽ¥å¼•ç”¨çš„è¿‡ç¨‹ï¼Œå‘ç”Ÿåœ¨ç±»åŠ è½½æœŸæˆ–è€…è¿è¡ŒæœŸï¼Œè€Œdispatchæ˜¯æ–¹æ³•ç¡®å®šçš„è¿‡ç¨‹ï¼Œstatic dispatchå‘ç”Ÿåœ¨ç¼–è¯‘æœŸã€‚ä¸€ä¸ªæ–¹æ³•ä»Žæœ€åˆçš„ä»£ç è°ƒç”¨åˆ°æœ€åŽçš„ç›´æŽ¥å¼•ç”¨ï¼ˆæˆ–è€…è¯´å…¥å£åœ°å€ï¼‰ï¼Œå®žé™…ä¸Šå…ˆè¦ç»è¿‡dispatchåŽè¦ç»è¿‡resolutionã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºŽéžè™šæ–¹æ³•çš„è°ƒç”¨è¿‡ç¨‹ï¼Œæ–¹æ³•ç­¾åå”¯ä¸€ï¼Œåœ¨ç¼–è¯‘æœŸå°±å¯ä»¥ç¡®å®šï¼Œä½¿ç”¨static dispatchå°±å¯ä»¥å®žçŽ°æ–¹æ³•ç¡®å®šã€‚static dispatch å°±æ˜¯äº§ç”Ÿç¬¦å·å¼•ç”¨çš„è¿‡ç¨‹ï¼Œå¹¶ä¸”è¯¥ç¬¦å·å¼•ç”¨åœ¨ç±»åŠ è½½æ—¶æœŸè½¬åŒ–ä¸ºè¯¥ç¬¦å·å¼•ç”¨çš„ç›´æŽ¥å¼•ç”¨(æ­¤è¿‡ç¨‹ä¸ºresolutionï¼ˆéžè™šæ–¹æ³•çš„è§£æžé€šå¸¸åœ¨ç±»åŠ è½½æ—¶æœŸå®Œæˆï¼‰ã€‚è€Œå¯¹äºŽè™šæ–¹æ³•çš„è°ƒç”¨è¿‡ç¨‹ï¼Œç¼–è¯‘æœŸäº§ç”Ÿçš„ç¬¦å·å¼•ç”¨æ— æ³•ç›´æŽ¥ç”¨äºŽç¡®å®šæœ€ç»ˆè°ƒç”¨çš„æ–¹æ³•ï¼ˆæ–¹æ³•çš„æœ€ç»ˆç¡®å®šæ— æ³•åœ¨ç¼–è¯‘æœŸå®Œæˆï¼Œä½†æ˜¯åœ¨ç¼–è¯‘æœŸé—´ä¹Ÿä¼šè¿›è¡Œä¸€æ¬¡æ–¹æ³•é€‰æ‹©â€”â€”é™æ€åˆ†æ´¾ï¼Œæ¯”å¦‚è™šæ–¹æ³•é‡è½½å°±æ˜¯åˆ©ç”¨æ­¤åŽŸç†ï¼‰,ä½¿ç”¨dynamic dispatchæ¥å®žçŽ°æœ€ç»ˆçš„æ–¹æ³•ç¡®å®šã€‚dynamic dispatchåˆ™ä¼šåœ¨è¿è¡ŒæœŸæ ¹æ®æ–¹æ³•æŽ¥æ”¶è€…çš„å®žé™…ç±»åž‹ï¼ŒåŽ»å®žé™…ç±»åž‹çš„è™šæ–¹æ³•è¡¨ä¸Šæ‰¾ä¸Žç¬¦å·å¼•ç”¨ç›¸åŒæ–¹æ³•ç­¾åçš„æ–¹æ³•ï¼Œæ‰¾åˆ°åŽå¦‚æžœè¯¥æ–¹æ³•å·²è¢«è§£æžï¼Œåˆ™è¿”å›žè¯¥æ–¹æ³•çš„ç›´æŽ¥å¼•ç”¨ï¼›å¦åˆ™ï¼Œåˆ™æ­¤æ—¶æ‰§è¡Œresolutionç„¶åŽè¿”å›žç›´æŽ¥å¼•ç”¨ã€‚ éžè™šæ–¹æ³• â€”&gt; é™æ€åˆ†æ´¾ â€”&gt; resolutionå‘ç”Ÿåœ¨ç±»åŠ è½½æ—¶æœŸ è™šæ–¹æ³• â€”&gt;é™æ€åˆ†æ´¾â€”&gt; åŠ¨æ€åˆ†æ´¾ â€”&gt; resolutionå‘ç”Ÿåœ¨ç±»åŠ è½½æ—¶æœŸæˆ–è€…run-timeï¼ˆåŠ¨æ€è¿žæŽ¥ï¼‰ è€Œã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸­æœ‰ä¸‹é¢è¿™æ®µè¯ï¼š è°ƒç”¨ç›®æ ‡åœ¨ä»£ç å†™å¥½ã€ç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘æ—¶å°±å¿…é¡»ç¡®å®šä¸‹æ¥ã€‚è¿™ç±»æ–¹æ³•çš„è°ƒç”¨ç§°ä¸ºè§£æžï¼ˆResolutionï¼‰ã€‚ è¿™é‡Œå°†â€è§£æžâ€œæ¢åšâ€œé™æ€åˆ†æ´¾â€ä¼¼ä¹Žæ›´åŠ åˆé€‚ã€‚è€Œä¸”ä¹¦ä¸­åœ¨8.3.1çš„â€œè§£æžâ€è¿™ä¸€éƒ¨åˆ†ä¸­çš„è®²è§£ä¼¼ä¹Žå®¹æ˜“è®©äººæ··æ·†è§£æžå’Œé™æ€åˆ†æ´¾çš„æ¦‚å¿µã€‚ Dynamic Dispatch åŠ¨æ€åˆ†æ´¾æ˜¯æŒ‡æ–¹æ³•çš„ç¡®å®šåœ¨run-timeæ‰èƒ½æœ€ç»ˆå®Œæˆã€‚ä½¿ç”¨åŠ¨æ€åˆ†æ´¾æ¥å®žçŽ°æ–¹æ³•ç¡®å®šçš„æ–¹æ³•ä¸€èˆ¬åœ¨ç¼–è¯‘æœŸé—´éƒ½æ˜¯ä¸€äº›â€œä¸æ˜Žç¡®â€çš„æ–¹æ³•ï¼ˆæ¯”å¦‚ä¸€äº›é‡å†™æ–¹æ³•ï¼Œæ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ç­¾åå¹¶ä¸”æ–¹æ³•æŽ¥æ”¶è€…çš„é™æ€ç±»åž‹å¯èƒ½ä¹Ÿç›¸åŒï¼‰ï¼Œå› æ­¤åªèƒ½åœ¨è¿è¡Œæ—¶æœŸæ ¹æ®æ–¹æ³•æŽ¥æ”¶è€…å’Œæ–¹æ³•å‚æ•°çš„å®žé™…ç±»åž‹æœ€ç»ˆå®žçŽ°æ–¹æ³•ç¡®å®šã€‚Javaä¸­çš„è™šæ–¹æ³•ï¼ˆä¸»è¦æŒ‡å®žä¾‹æ–¹æ³•ï¼‰ é€šå¸¸éœ€è¦åœ¨è¿è¡ŒæœŸé‡‡ç”¨åŠ¨æ€åˆ†æ´¾æ¥å®žçŽ°æ–¹æ³•ç¡®å®šï¼ˆåˆ©ç”¨invokevirtualæŒ‡ä»¤èŽ·å–æ–¹æ³•æŽ¥æ”¶è€…çš„å®žé™…ç±»åž‹ï¼ŒåŽæ–‡ä¼šæœ‰å…·ä½“ä¾‹å­åˆ†æžï¼‰ã€‚ Single Dispatch / Multiple Dispatch å•åˆ†æ´¾å’Œå¤šåˆ†æ´¾æ˜¯æ ¹æ®åˆ†æ´¾æ—¶ä½¿ç”¨çš„åŽŸç†æ¥åˆ†ç±»çš„ï¼Œåªæ ¹æ®ä¸€ç§å®—é‡ï¼ˆå®—é‡çš„æ¦‚å¿µè¯·è§æ–‡ç« å¼€å¤´ï¼‰è¿›è¡Œæ–¹æ³•é€‰æ‹©æ˜¯å•åˆ†æ´¾ï¼Œæ ¹æ®å¤šç§å®—é‡è¿›è¡Œæ–¹æ³•é€‰æ‹©æ˜¯å¤šåˆ†æ´¾ã€‚ å•åˆ†æ´¾(Single [dynamic] Dispatch)ï¼šåªæ ¹æ®æ–¹æ³•æŽ¥æ”¶è€…çš„å®žé™…ç±»åž‹æ¥å®žçŽ°æ–¹æ³•çš„ç¡®å®šï¼ˆJavaé‡‡ç”¨æ­¤ç§åˆ†æ´¾æ–¹æ³•ï¼‰ å¤šåˆ†æ´¾(Multiple [dynamic] Dispatch)ï¼šæ ¹æ®æ–¹æ³•çš„æŽ¥æ”¶è€…ç±»åž‹ä»¥åŠæ–¹æ³•å‚æ•°çš„å®žé™…ç±»åž‹æ¥å®žçŽ°æ–¹æ³•çš„ç¡®å®š å•åˆ†æ´¾å¤šåˆ†æ´¾çš„æ¦‚å¿µåŒºåˆ†ä¸€èˆ¬åªå­˜åœ¨äºŽåŠ¨æ€åˆ†æ´¾å½“ä¸­ã€‚ç”±äºŽå•åˆ†æ´¾å¤šåˆ†æ´¾éœ€è¦è€ƒè™‘å®žé™…ç±»åž‹ï¼Œè€Œå¯¹äºŽé™æ€åˆ†æ´¾åªä¼šæ ¹æ®é™æ€ç±»åž‹æ¥åˆ†æ´¾ï¼Œå› æ­¤æ²¡æœ‰æ‰€è°“çš„é™æ€å•åˆ†æ´¾é™æ€å¤šåˆ†æ´¾çš„æ¦‚å¿µã€‚ï¼ˆè¿™ç§ç†è§£ä¸Žã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸­çš„è§£é‡Šæœ‰æ‰€ä¸åŒï¼Œä¸ªäººæ¯”è¾ƒå€¾å‘äºŽå•åˆ†æ´¾å’Œå¤šåˆ†æ´¾çš„åˆ†ç±»åªé€‚ç”¨äºŽåŠ¨æ€åˆ†æ´¾ï¼‰ å¦‚ä½•ç†è§£Javaçš„â€œé™æ€å¤šåˆ†æ´¾ï¼ŒåŠ¨æ€å•åˆ†æ´¾â€ è¿™ç§è¯´æ³•æ˜¯ä¸å‡†ç¡®çš„ã€‚Javaç¡®å®žæ˜¯åŠ¨æ€å•åˆ†æ´¾ï¼Œä½†æ˜¯å¯¹äºŽé™æ€åˆ†æ´¾è€Œè¨€å…¶å®žæ²¡æœ‰æ‰€è°“çš„å•åˆ†æ´¾å¤šåˆ†æ´¾çš„æ¦‚å¿µã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥ç†è§£æ‰€è°“çš„â€é™æ€å¤šåˆ†æ´¾â€œæ¦‚å¿µï¼š ç”±äºŽjavaçš„é™æ€åˆ†æ´¾éœ€è¦åŒæ—¶è€ƒè™‘æ–¹æ³•æŽ¥æ”¶è€…å’Œæ–¹æ³•å‚æ•°çš„é™æ€ç±»åž‹ï¼ŒæŸç§å±‚åº¦ä¸Šè€Œè¨€æ˜¯è€ƒè™‘äº†ä¸¤ç§å®—é‡ï¼Œå°½ç®¡æ²¡æœ‰æ¶‰åŠä»»ä½•å®žé™…ç±»åž‹ï¼Œä¾ç„¶å¯ä»¥ä»Žè¡Œä¸ºä¸Šå‹‰å¼ºç†è§£ä¸ºâ€å¤šåˆ†æ´¾â€œã€‚ è¿™é‡Œé€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£Javaä¸­çš„åˆ†æ´¾ã€‚ 12345678910111213141516171819202122232425262728class Food&#123;&#125;class Meat extends Food&#123;&#125;class Person&#123; public void buy(Food food)&#123; System.out.println("A person buy food"); &#125; public void buy(Meat meat)&#123; System.out.println("A person buy meat"); &#125;&#125;class Man extends Person&#123; public void buy(Food food)&#123; System.out.println("A man buy food"); &#125; public void buy(Meat meat)&#123; System.out.println("A man buy meat"); &#125;&#125;public class Test&#123; public static void main(String[] args)&#123; Person a = new Man(); Food b = new Meat(); a.buy(b); &#125;&#125; è¾“å‡ºçš„ç»“æžœä¸ºï¼š 1A man buy food è¿™é‡Œæ¶‰åŠåˆ°äº†javaé‡Œé¢çš„é‡è½½å’Œé‡å†™ã€‚åˆ©ç”¨ä¸Šæ–‡ä¸­æåˆ°çš„å„ç§æ¦‚å¿µæ¥å¯¹a.buy(b)æ–¹æ³•è°ƒç”¨è¿‡ç¨‹è¿›è¡Œåˆ†æžï¼š é¦–å…ˆåœ¨ç¼–è¯‘æœŸé—´è¿›è¡Œäº†é™æ€åˆ†æ´¾ï¼Œåˆ©ç”¨æ–¹æ³•åï¼Œæ–¹æ³•æŽ¥æ”¶è€…å’Œæ–¹æ³•å‚æ•°çš„é™æ€ç±»åž‹è¿›è¡Œæ–¹æ³•é€‰æ‹©ï¼ŒäºŽæ˜¯æ–¹æ³•çš„ç¬¦å·å¼•ç”¨ç¡®å®šä¸ºPerson.buy:(Ltest/Food;)Vï¼Œè¿™é‡Œæ˜Žç¡®å¯ä»¥çœ‹åˆ°æ­¤æ—¶ç»è¿‡é™æ€åˆ†æ´¾å¯¹é‡è½½æ–¹æ³•è¿›è¡Œé€‰æ‹©åŽç¡®å®šçš„æ–¹æ³•ä¸ºPersonç±»çš„buy(Food food)æ–¹æ³•ã€‚ ä½†æ˜¯å¯¹äºŽè™šæ–¹æ³•çš„è°ƒç”¨ä¼šåœ¨è¿è¡Œé˜¶æ®µåˆ©ç”¨åŠ¨æ€åˆ†æ´¾å†è¿›è¡Œä¸€æ¬¡æ–¹æ³•é€‰æ‹©ã€‚å¦‚æžœæ­¤æ—¶é‡‡å–åŠ¨æ€å•åˆ†æ´¾ï¼Œåˆ™ä¼šæ ¹æ®æ–¹æ³•æŽ¥æ”¶è€…çš„å®žé™…ç±»åž‹å†è¿›è¡Œä¸€æ¬¡æ–¹æ³•é€‰æ‹©ã€‚ç”±äºŽå¯¹è±¡açš„å®žé™…ç±»åž‹æ˜¯Manï¼Œå› æ­¤æœ€åŽç¡®å®šè°ƒç”¨çš„æ–¹æ³•ä¸ºManç±»çš„buy(Food food)æ–¹æ³•ï¼Œè¾“å‡ºç»“æžœå°†ä¼šæ˜¯A man buy foodã€‚å¦‚æžœæ­¤æ—¶é‡‡å–åŠ¨æ€å¤šåˆ†æ´¾ï¼Œåˆ™ä¼šæ ¹æ®æ–¹æ³•æŽ¥æ”¶è€…ä»¥åŠæ–¹æ³•å‚æ•°çš„å®žé™…ç±»åž‹å†è¿›è¡Œä¸€æ¬¡æ–¹æ³•é€‰æ‹©ã€‚ç”±äºŽå¯¹è±¡açš„å®žé™…ç±»åž‹æ˜¯Manï¼Œå‚æ•°bçš„å®žé™…ç±»åž‹æ˜¯Meatï¼Œå› æ­¤æœ€åŽç¡®å®šè°ƒç”¨çš„æ–¹æ³•ä¸ºManç±»çš„buy(Meat meat)æ–¹æ³•ï¼Œè¾“å‡ºç»“æžœå°†ä¼šæ˜¯A man buy meatã€‚ æ˜¾ç„¶ï¼Œæˆ‘ä»¬çœ‹åˆ°æœ€åŽç¨‹åºè¾“å‡ºç»“æžœä¸ºA man buy foodï¼Œä¹Ÿè¯æ˜Žäº†Javaé‡‡ç”¨äº†åŠ¨æ€å•åˆ†æ´¾ã€‚ æœ€åŽå†ä»Žå­—èŠ‚ç çš„å±‚é¢å•°å—¦ä¸€å¥ï¼Œè¿™é‡ŒJavaçš„åŠ¨æ€åˆ†æ´¾æ˜¯ä¾é invokevirtualæŒ‡ä»¤çš„å¤šæ€æŸ¥æ‰¾å®Œæˆçš„ã€‚a.buy(b)æ–¹æ³•è°ƒç”¨å¯¹åº”çš„æ ¸å¿ƒå­—èŠ‚ç ä¸ºinvokevirtual #6 // Method test/Person.buy:(Ltest/Food;)Vï¼ŒinvokevirtualæŒ‡ä»¤ä¼šé¦–å…ˆæ‰¾åˆ°æ“ä½œæ•°æ ˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ æŒ‡å‘çš„å¯¹è±¡ï¼ˆæ­¤ä¾‹ä¸­ä¸ºå¯¹è±¡aï¼‰çš„å®žé™…ç±»åž‹ï¼ˆåŠ¨æ€ç»‘å®šæ–¹æ³•æŽ¥æ”¶è€…ç±»åž‹ï¼‰ï¼Œå¹¶ä»Žå®žé™…ç±»åž‹ä¸­æŸ¥æ‰¾ä¸ŽæŒ‡ä»¤å‚æ•°ä¸­ç¬¦å·å˜é‡æè¿°çš„æ–¹æ³•ç­¾åï¼ˆæ­¤ä¾‹ä¸­ä¸ºbuy:(Ltest/Food;)Vï¼‰ç›¸åŒçš„æ–¹æ³•ï¼Œå¹¶è¿”å›žè¯¥æ–¹æ³•çš„ç›´æŽ¥å¼•ç”¨ã€‚ Resolution vs Binding vs Dispatch Resolutionæ˜¯æŒ‡å°†ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æŽ¥å¼•ç”¨çš„è¿‡ç¨‹ï¼Œé€šå¸¸å‘ç”Ÿåœ¨ç±»åŠ è½½æ—¶æœŸå’Œè¿è¡ŒæœŸï¼ˆè¿è¡ŒæœŸå‘ç”Ÿçš„resolutionåˆè¢«ç§°ä¸ºåŠ¨æ€è¿žæŽ¥ï¼‰ã€‚ è¿™é‡Œä»Žä¸€èˆ¬æ„ä¹‰ä¸Š(ä¸é™äºŽJava)æ¥å¯¹Bindingå’ŒDispatchæ¥åšä¸€ä¸ªåŒºåˆ†ï¼šäºŒè€…ä¸»è¦çš„åŒºåˆ«åœ¨äºŽä½œç”¨çš„å¯¹è±¡ä¸åŒã€‚ Bindingæ˜¯é’ˆå¯¹ç±»åž‹è€Œè¨€ï¼ŒæŒ‡çš„æ˜¯ç±»åž‹ç¡®å®šçš„è¿‡ç¨‹ï¼Œé€šå¸¸å‘ç”Ÿåœ¨å¯¹è±¡å±žæ€§çš„è®¿é—®æˆ–æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¹Ÿå°±æ˜¯è¯´Bindingæ˜¯å±žæ€§çš„æ‰€æœ‰è€…ä»¥åŠæ–¹æ³•çš„æŽ¥æ”¶è€…çš„ç±»åž‹ç¡®å®šã€‚ Dispatchæ˜¯é’ˆå¯¹æ–¹æ³•è€Œè¨€çš„ï¼Œé€šå¸¸å‘ç”Ÿåœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼ŒæŒ‡çš„æ˜¯æ–¹æ³•ç¡®å®šçš„è¿‡ç¨‹ã€‚ç„¶è€Œæ–¹æ³•çš„ç¡®å®šä¹Ÿä¾èµ–äºŽæ–¹æ³•æŽ¥æ”¶è€…ç±»åž‹çš„ç¡®å®šï¼Œè¿™ä¹Ÿæ˜¯å¯¼è‡´Bindingå’Œdispatchå®¹æ˜“æ¦‚å¿µæ··æ·†çš„åŽŸå› ä¹‹ä¸€ã€‚ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œç”±äºŽè™šæ–¹æ³•é€šè¿‡åŠ¨æ€åˆ†æ´¾å®žçŽ°æ–¹æ³•çš„æœ€ç»ˆé€‰æ‹©ï¼ŒåŠ¨æ€åˆ†æ´¾éœ€è¦å€ŸåŠ©äºŽæ–¹æ³•æŽ¥æ”¶è€…çš„å®žé™…ç±»åž‹ï¼Œå…¶å®žä¹Ÿå°±æ˜¯æ„å‘³ç€è™šæ–¹æ³•çš„æŽ¥æ”¶è€…çš„ç±»åž‹ç¡®å®šæ˜¯é€šè¿‡åŠ¨æ€ç»‘å®šå®žçŽ°çš„ã€‚è¿™ä¹Ÿæ˜¯åŠ¨æ€åˆ†æ´¾å’ŒåŠ¨æ€ç»‘å®šçš„å…³ç³»æ‰€åœ¨ï¼šæ–¹æ³•çš„ç¡®å®šé€šè¿‡åŠ¨æ€åˆ†æ´¾å®žçŽ°ï¼Œæ„å‘³ç€æ–¹æ³•æŽ¥æ”¶è€…ç±»åž‹çš„ç¡®å®šé€šè¿‡åŠ¨æ€ç»‘å®šå®žçŽ°ã€‚å‰æ–‡å·²å¯¹Bindingå’ŒDispatchå±•å¼€è®¨è®ºï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ ç½‘ä¸Šæœ‰å¾ˆå¤šè§£é‡Šè¯´â€ç»‘å®šæŒ‡çš„æ˜¯æŠŠä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨ä¸Žæ–¹æ³•æ‰€åœ¨çš„ç±»(æ–¹æ³•ä¸»ä½“)å…³è”èµ·æ¥â€œï¼Œä¸ªäººè§‰å¾—æ˜¯ä¸å‡†ç¡®çš„ï¼Œè¿™ç§è¯´æ³•ä¸€å®šç¨‹åº¦ä¸Šå°†bindingå’Œdispatchçš„æ¦‚å¿µæ··æ·†åœ¨ä¸€èµ·ã€‚è¿™ç§è¯´æ³•æœ¬æ„æ˜¯æŒ‡â€æ–¹æ³•ç»‘å®šâ€è€Œéžä¸€èˆ¬æ„ä¹‰ä¸Šçš„ç»‘å®šï¼ˆç±»åž‹ç»‘å®šï¼‰ã€‚ä½†æ˜¯ç›®å‰çœ‹æ¥ï¼Œåœ¨Javaä¸­ï¼Œå¤§å®¶è¿˜æ˜¯æ¯”è¾ƒå€¾å‘äºŽå°†ç»‘å®šå’Œåˆ†æ´¾å½“åšåŒä¹‰è¯æ¥ä½¿ç”¨ï¼ˆæ–¹æ³•ç»‘å®šï¼‰ï¼Œéƒ½è¡¨ç¤ºæ–¹æ³•ä¸Žæ–¹æ³•æŽ¥æ”¶è€…å…³è”çš„è¿‡ç¨‹ã€‚è¿™äº›æ¦‚å¿µæ€§çš„é—®é¢˜æ²¡å¿…è¦ç»†çº ï¼Œå¼„æ˜Žç™½åŽŸç†å°±å¥½ã€‚ Overloading / Overriding / Hiding ä¸‹é¢é€šè¿‡Javaä¸­çš„é‡è½½ï¼Œé‡å†™ï¼Œéšè—ï¼ˆå±žæ€§éšè—å’Œæ–¹æ³•éšè—ï¼‰æ¥ç»¼åˆç†è§£ä¸Šæ–‡ä¸­æåˆ°çš„å¤šç§æ¦‚å¿µã€‚ Overloading éžè™šæ–¹æ³•çš„é‡è½½æ˜¯é€šè¿‡é™æ€ç»‘å®šä»¥åŠé™æ€å¤šåˆ†æ´¾å®žçŽ°çš„ã€‚ è™šæ–¹æ³•çš„é‡è½½æ˜¯é€šè¿‡åŠ¨æ€ç»‘å®šä»¥åŠé™æ€å¤šåˆ†æ´¾å’ŒåŠ¨æ€å•åˆ†æ´¾å®žçŽ°çš„ã€‚ Overriding é‡å†™æ˜¯å®žçŽ°å¤šæ€çš„å…³é”®ä¹‹ä¸€ï¼ˆå¤šæ€ä¸‰è¦ç´ ï¼šç»§æ‰¿ï¼Œé‡å†™ï¼Œçˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ï¼‰ï¼Œé‡å†™æ˜¯é€šè¿‡ åŠ¨æ€ç»‘å®šä»¥åŠåŠ¨æ€å•åˆ†æ´¾å®žçŽ°çš„ã€‚ ç”±äºŽé‡è½½å’Œé‡å†™åœ¨ä¸Šæ–‡ä¸­å·²ç»ä¸¾è¿‡ä¾‹å­åˆ†æžæ–¹æ³•è°ƒç”¨æ—¶çš„åˆ†æ´¾é—®é¢˜ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ Hiding è¦†ç›–å’Œéšè—çš„å…±åŒç‰¹å¾è¡¨çŽ°åœ¨ä»£ç ä¸Šï¼šçˆ¶ç±»å’Œå­ç±»å®šä¹‰äº†åŒåå±žæ€§æˆ–åŒç­¾åæ–¹æ³• è€Œè¦†ç›–å’Œéšè—çš„åŒºåˆ«è¡¨çŽ°åœ¨è¡Œä¸ºä¸Šï¼š è¦†ç›–ï¼ˆé‡å†™ï¼‰ï¼šæ–¹æ³•æˆ–å±žæ€§çš„æ‰€æœ‰è€…å®žé™…ç±»åž‹å’Œé™æ€ç±»åž‹ä¸ç›¸ç¬¦æ—¶ï¼ˆé™æ€ç±»åž‹ä¸ºçˆ¶ç±»ï¼Œå®žé™…ç±»åž‹ä¸ºå­ç±»ï¼‰ï¼Œæœ€åŽå®žé™…è¢«è®¿é—®çš„æ˜¯å®žé™…ç±»åž‹çš„æ–¹æ³•æˆ–å±žæ€§ã€‚ éšè—ï¼šæ–¹æ³•æˆ–å±žæ€§çš„æ‰€æœ‰è€…å®žé™…ç±»åž‹å’Œé™æ€ç±»åž‹ä¸ç›¸ç¬¦æ—¶ï¼ˆé™æ€ç±»åž‹ä¸ºçˆ¶ç±»ï¼Œå®žé™…ç±»åž‹ä¸ºå­ç±»ï¼‰ï¼Œæœ€åŽå®žé™…è¢«è®¿é—®çš„æ˜¯é™æ€ç±»åž‹çš„æ–¹æ³•æˆ–å±žæ€§ã€‚ï¼ˆé™æ€æ–¹æ³•ï¼Œç±»å±žæ€§æˆ–å®žä¾‹å±žæ€§éƒ½åªèƒ½è¢«éšè—è€Œæ— æ³•è¦†ç›–ï¼‰ é€ æˆäºŒåŒºåˆ«çš„åŽŸå› åœ¨äºŽæ˜¯å¦ä¼šè¿›è¡ŒåŠ¨æ€ç±»åž‹è¯†åˆ«ï¼Œè¿™äº›éƒ½ä¸Žå±žæ€§æ‰€æœ‰è€…ä»¥åŠæ–¹æ³•æŽ¥æ”¶è€…çš„ç±»åž‹ç¡®å®šæ–¹å¼æœ‰å…³ï¼ˆBindingï¼‰ã€‚ Field Hiding å‰æ–‡è®¨è®ºBindingæ—¶ä»‹ç»è¿‡ï¼šå±žæ€§æ‰€æœ‰è€…çš„ç±»åž‹ç¡®å®šæ˜¯é€šè¿‡é™æ€ç»‘å®šå®žçŽ°çš„ï¼Œæ„å‘³ç€å±žæ€§æ‰€æœ‰è€…ä¸ä¼šè¿›è¡ŒåŠ¨æ€ç±»åž‹è¯†åˆ«ã€‚å‰æ–‡ä¸¾è¿‡ä¾‹å­ï¼Œä¸å†è¯¦è¿°ã€‚ Method Hiding å®žä¾‹æ–¹æ³•å¯ä»¥è¢«é‡å†™ï¼Œè€Œé™æ€æ–¹æ³•ä¸èƒ½è¢«é‡å†™ï¼ˆè¦†ç›–ï¼‰ï¼Œåªèƒ½è¢«éšè—ï¼ˆMethod Hidingï¼‰ã€‚ æœ¬è´¨åŽŸå› åœ¨äºŽå®žä¾‹æ–¹æ³•æŽ¥æ”¶è€…çš„ç±»åž‹ç¡®å®šæ˜¯é€šè¿‡åŠ¨æ€ç»‘å®šï¼Œå®žä¾‹æ–¹æ³•çš„æœ€ç»ˆç¡®å®šæ˜¯é€šè¿‡åŠ¨æ€åˆ†æ´¾ï¼Œæ„å‘³ç€å®žä¾‹æ–¹æ³•çš„æŽ¥æ”¶è€…ç±»åž‹ç”±å®žé™…ç±»åž‹å†³å®šï¼Œæœ€ç»ˆè®¿é—®çš„æ˜¯å®žé™…ç±»åž‹çš„æ–¹æ³•ã€‚ è€Œé™æ€æ–¹æ³•æŽ¥æ”¶è€…çš„ç±»åž‹ç¡®å®šæ˜¯é€šè¿‡é™æ€ç»‘å®šï¼Œé™æ€æ–¹æ³•çš„æœ€ç»ˆç¡®å®šæ˜¯é€šè¿‡é™æ€åˆ†æ´¾ï¼Œæ„å‘³ç€é™æ€æ–¹æ³•çš„æŽ¥æ”¶è€…ç±»åž‹ä»…é€šè¿‡é™æ€ç±»åž‹å†³å®šï¼Œä¸ä¼šåœ¨è¿è¡Œæ—¶è¯†åˆ«æŽ¥æ”¶è€…çš„å®žé™…ç±»åž‹ï¼Œæœ€ç»ˆè®¿é—®çš„ä¹Ÿå°±æ˜¯é™æ€ç±»åž‹çš„æ–¹æ³•ã€‚ ç”±äºŽæœ¬äººå¯¹ç¼–è¯‘åŽŸç†ä»¥åŠJVMçš„å†…éƒ¨åŽŸç†äº†è§£å¹¶ä¸æ·±å…¥ï¼Œå¦‚æœ‰çº°æ¼ï¼Œæ¬¢è¿Žæ–§æ­£~~ References ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ç¬¬äºŒç‰ˆ http://softwareengineering.stackexchange.com/questions/200115/what-is-early-and-late-binding/200123#200123 https://www.zhihu.com/question/28462483]]></content>
      <categories>
        <category>JVM</category>
        <category>æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº-0ã€‘æ€ç»´å¯¼å›¾æ±‡æ€»]]></title>
    <url>%2F2017%2F02%2F03%2F%E3%80%90%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA-0%E3%80%91%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E6%B1%87%E6%80%BB%2F</url>
    <content type="text"><![CDATA[æ­¤ç¯‡åšæ–‡ä¸»è¦ç”¨äºŽæ±‡æ€»JVMåˆçº§å­¦ä¹ é˜¶æ®µçš„æ€ç»´å¯¼å›¾ï¼Œä¸»è¦æ ¹æ®ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¹¦ä¸­çš„è„‰ç»œï¼Œç»“åˆJVM Specificationä¸­çš„çŸ¥è¯†ç‚¹è¿›è¡Œæ‹“å±•å’Œæ€»ç»“ã€‚æ€ç»´å¯¼å›¾é€šè¿‡iThoughtsX 4.3ç»˜åˆ¶ï¼Œæ–‡ä¸­ä¼šæä¾›åŽŸå§‹æ ¼å¼æ–‡ä»¶(ä½ŽäºŽ4.3ç‰ˆæœ¬çš„iThoughtsXå¯èƒ½æ— æ³•æ‰“å¼€åŽŸå§‹æ–‡ä»¶)å’Œå¯¼å‡ºçš„å›¾ç‰‡ã€‚ç”±äºŽæœ‰äº›ç« èŠ‚çš„æ€ç»´å¯¼å›¾è¿‡å¤§ï¼Œæˆ‘å¯èƒ½ä¼šè¿›è¡Œæ‹†åˆ†ï¼Œä½†æ˜¯å°½é‡ä¸ä¼šå½±å“ç†è§£ã€‚ å†…å®¹æœ‰äº›æ‚ä¹±ï¼Œä¸»è¦ç”¨ä½œä¸ªäººç¬”è®°æ•´ç†ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›è¿™äº›æ€ç»´å¯¼å›¾èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹(é…åˆJVM Specificationé£Ÿç”¨æ›´ä½³ï¼‰ã€‚æœ‰äº›å¯¼å›¾ç›®å‰è¿˜æ˜¯åŠæˆå“ï¼Œæš‚æ—¶ä¸ä¼šæ”¾ä¸Šæ¥ï¼Œæ–‡ç« æŒç»­æ›´æ–°ä¸­ã€‚ ç¬¬äºŒéƒ¨åˆ† è‡ªåŠ¨å†…å­˜ç®¡ç† ç¬¬äºŒç«  Javaå†…å­˜åŒºåŸŸä¸Žå†…å­˜æº¢å‡ºå¼‚å¸¸ è¿™ä¸€ç« èŠ‚ä¸»è¦æ¶‰åŠä¸‰æ–¹é¢çš„å†…å®¹ï¼š è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ HotSpotè™šæ‹Ÿæœºå¯¹è±¡çš„è¡¨ç¤º OutOfMemoryErrorçš„ç›¸å…³å®žè·µ æ€ç»´å¯¼å›¾å¦‚ä¸‹( ç‚¹å‡»æ”¾å¤§å†æ”¾å¤§ðŸ˜‘ ) ï¼š iThoughtsXåŽŸæ ¼å¼æ–‡ä»¶åœ°å€: http://ojnnon64z.bkt.clouddn.com/ã€Understanding%20the%20JVMã€‘%5BMind%20Map%5D%20Java%20Memory%20Area.itmz ç¬¬ä¸‰ç«  åžƒåœ¾æ”¶é›†å™¨ä¸Žå†…å­˜åˆ†é…ç­–ç•¥ http://qifuguang.me/2015/09/02/[Javaå¹¶å‘åŒ…å­¦ä¹ ä¸ƒ]è§£å¯†ThreadLocal/ ç¬¬ä¸‰éƒ¨åˆ† è™šæ‹Ÿæœºæ‰§è¡Œå­ç³»ç»Ÿ ç¬¬å…­ç«  ç±»æ–‡ä»¶ç»“æž„ è¿™ä¸€ç« èŠ‚æ€ç»´å¯¼å›¾æ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯å…³äºŽClassç±»æ–‡ä»¶ç»“æž„çš„ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯å…³äºŽå­—èŠ‚ç æŒ‡ä»¤ç®€ä»‹çš„ã€‚ç”±äºŽç¬¬äºŒéƒ¨åˆ†çŸ¥è¯†ç‚¹æ¯”è¾ƒçç¢Žï¼Œç›®å‰è¿˜åœ¨è€ƒè™‘å¯¹æ­¤éƒ¨åˆ†æ˜¯å¦æœ‰åˆ¶ä½œæ€ç»´å¯¼å›¾çš„å¿…è¦ã€‚é¦–å…ˆçŒ®ä¸Šç¬¬ä¸€éƒ¨åˆ†æ€ç»´å¯¼å›¾ ( ç‚¹å‡»æ”¾å¤§å†æ”¾å¤§ðŸ˜‘ ) ï¼š iThoughtsXåŽŸæ ¼å¼æ–‡ä»¶åœ°å€: http://ojnnon64z.bkt.clouddn.com/ã€Understanding%20the%20JVMã€‘Class%20File%20Mind%20Map.itmz ç¬¬ä¸ƒç«  è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶ è¿™ä¸€ç« èŠ‚åˆ†ä¸ºç±»åŠ è½½æœºåˆ¶ä»¥åŠç±»åŠ è½½å™¨ä¸¤éƒ¨åˆ†ã€‚ ç±»åŠ è½½æœºåˆ¶ iThoughtsXåŽŸæ ¼å¼æ–‡ä»¶åœ°å€: http://ojnnon64z.bkt.clouddn.com/ã€Understanding%20the%20JVMã€‘%5BMind%20Map%5D%20Class%20Loading%20.itmz ç±»åŠ è½½å™¨ iThoughtsXåŽŸæ ¼å¼æ–‡ä»¶åœ°å€: http://ojnnon64z.bkt.clouddn.com/ã€Understanding%20the%20JVMã€‘%5BMind%20Map%5D%20Class%20Loading_1%20.itmz ç¬¬å…«ç«  è™šæ‹Ÿæœºå­—èŠ‚ç æ‰§è¡Œå¼•æ“Ž è¿™ä¸€ç« èŠ‚ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š è¿è¡Œæ—¶æ ˆå¸§ç»“æž„ æ–¹æ³•è°ƒç”¨ åŸºäºŽæ ˆçš„å­—èŠ‚ç è§£é‡Šæ‰§è¡Œå¼•æ“Ž è¿™ä¸‰éƒ¨åˆ†éƒ½é›†ä¸­åœ¨ä¸‹é¢è¿™å¼ å›¾ä¸­è¿›è¡Œæ€»ç»“ï¼š iThoughtsXåŽŸæ ¼å¼æ–‡ä»¶åœ°å€: ã€Understanding%20the%20JVMã€‘%5BMind%20Map%5D%20JVM%20Bytecode%20Execution%20Engine.itmz ç¬¬å››éƒ¨åˆ† ç¨‹åºç¼–è¯‘ä¸Žä»£ç ä¼˜åŒ– æ•¬è¯·æœŸå¾…ã€‚ã€‚ã€‚ðŸ˜ª ç¬¬äº”éƒ¨åˆ† é«˜æ•ˆå¹¶å‘ è¿™ä¸€éƒ¨åˆ†ä¹¦ä¸­ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªç« èŠ‚æ¥è®²è§£ï¼š Javaå†…å­˜æ¨¡åž‹ä¸Žçº¿ç¨‹ã€çº¿ç¨‹å®‰å…¨ä¸Žé”ä¼˜åŒ–ã€‚ä½†æ˜¯ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹å¹¶æ²¡æœ‰ç”¨å¾ˆå¤§çš„ç¯‡å¹…æ¥è®²å¹¶å‘è¿™ä¸€éƒ¨åˆ†ï¼Œå› æ­¤è¿˜éœ€ç»“åˆã€ŠJava Concurrency in Practiceã€‹ç­‰ä¹¦æ¥åŠ æ·±ç†è§£ã€‚æ›´å¤šå…³äºŽjavaå¹¶å‘çš„æ€»ç»“å¯ä»¥å…³æ³¨Java Primerç³»åˆ—çš„ç›¸å…³åšæ–‡ã€‚ ç¬¬åäºŒç«  Javaå†…å­˜æ¨¡åž‹ä¸Žçº¿ç¨‹ ç¬¬åä¸‰ç«  çº¿ç¨‹å®‰å…¨ä¸Žé”ä¼˜åŒ–]]></content>
      <categories>
        <category>JVM</category>
        <category>æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº</category>
      </categories>
      <tags>
        <tag>JVM</tag>
        <tag>MindMap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Personal Configuration for Mac and Apps]]></title>
    <url>%2F2017%2F01%2F30%2FPersonal-Configuration-for-Mac-and-Apps%2F</url>
    <content type="text"><![CDATA[Continue Updating Here are my configurations and settings for mac and apps in order to reach a higher productivity. Some config files can be found in the following repo: https://github.com/hippo-jessy/MacAndAppsConfig Current Environments OS: Mac OS X EI Capitan(version 10.11.6) Useful Apps and Tools for Mac Karabiner &amp;&amp; Seil Karabiner: This app can be used to remap keyboard and shortcut. I take use of it to remap â€œctrl + K / J / H / Lâ€ to Arrow keys ( Up / Down / Left / Right ). My personal config file is right here: https://github.com/hippo-jessy/MacAndAppsConfig/blob/master/Karabiner/private.xml Seil: I use this app only for its functionality to remap Caps Lock to esc. Itâ€™s pretty much helpful when editing in vim mode. Although most remapping actions can be performed by Karabiner, it can do nothing with this special key ( Karabiner is currently working to support MacOS Sierra and trying to fully integrate Seil, you can check it here ). iStat Menus This one is basically a profiling tool which show dynamic status of CPU, memory, disks, etc. All these information is presented in the menubar and in a pleasant way as the following picture shown: Keyboard and Shortcut Remapping Disable shortcut CMD + H systemwide &quot; hide window &quot; functionality and reassign it to different action in specific apps. No additional tool is needed to fulfil this remapping process and try to follow these steps: Go to System Preference and locate KeyBoard Go to Keyboard Shortcuts sub tab at the top Choose App Shortcuts on the list at left side Click on the + sign below the list to the right See the following screenshot, where Iâ€™ve reassigned CMD+H to â€œleft with selectionâ€ action in IntelliJ IDEA exclusively. Tips: choose â€œAll controlsâ€ for pressing Tab could also fast your keyboard operation. Remap Ctrl + H / J / K / L to Arrow keys ( left / down / up/ right ) considering anti human location of Arrow keys. Take good use of Karabiner to achieve this task as I mentioned before. Remap caps lock to esc using Seil to speed up vim mode editing. Remember to switch Mac Function Keys ( such as F1, F2 ) to standard function keys in that many apps like browsers, IDEs may take these keys as part of shortcuts. Settings for IntelliJ IDEA I changed most of keymap settings of IntelliJ IDEA based on my own habits and most of these changed shortcuts are easier to remember. You can find the settings file here: settings exported To Be Continued â€¦]]></content>
      <categories>
        <category>Configuration</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>Config</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Design Patternã€‘Iterator è¿­ä»£å™¨æ¨¡å¼]]></title>
    <url>%2F2017%2F01%2F22%2F%E3%80%90Design-Pattern%E3%80%91Iterator-%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[Class Diagram Introduction è¿­ä»£å™¨æ¨¡å¼å…¶ç›®çš„æ˜¯å°†å®¹å™¨çš„éåŽ†ä¸Žå®¹å™¨çš„å†…éƒ¨å®žçŽ°è§£è€¦ï¼Œä»Žè€Œåˆ©ç”¨ä¸€ç§é€šç”¨ç»Ÿä¸€çš„æ–¹å¼éåŽ†å†…éƒ¨å®žçŽ°å„å¼‚çš„å¤šç§å®¹å™¨ã€‚è¿­ä»£å™¨æ¨¡å¼çš„ä½¿ç”¨å·²ç»éžå¸¸æ™®éï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚æ­¤ç¯‡åšå®¢é‡ç‚¹åœ¨äºŽä»‹ç»è¿­ä»£å™¨çš„å†…éƒ¨å®žçŽ°ï¼Œä»¥åŠåœ¨JDKæºç ä¸­è¿­ä»£å™¨æ¨¡å¼çš„å®žé™…è¿ç”¨ã€‚ Implementation æ—¢ç„¶æ˜¯è¦ä¸Žå®¹å™¨å†…éƒ¨å®žçŽ°è§£è€¦ï¼Œå¾ˆè‡ªç„¶åœ°æƒ³åˆ°è¦åŠ ä¸€å±‚é’ˆå¯¹å®¹å™¨çš„æŠ½è±¡ã€‚å¦‚ä½•åŠ æŠ½è±¡ï¼Ÿè¿™é‡Œé‡‡ç”¨interfaceçš„å½¢å¼ã€‚æ ¹æ®ä¸Šæ–‡ä¸­çš„ç±»å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°AggregateæŽ¥å£ï¼Œè¿™ä¸ªæŽ¥å£å°±ä¿è¯äº†å‡¡æ˜¯å®žçŽ°äº†è¯¥æŽ¥å£çš„å®¹å™¨ï¼ˆä¸ç®¡å…¶å†…éƒ¨æ˜¯å¦‚ä½•å®žçŽ°çš„ï¼‰éƒ½å¯ä»¥åˆ©ç”¨Iteratorå¯¹å…¶è¿›è¡ŒéåŽ†ã€‚AggregateæŽ¥å£å£°æ˜Žçš„createIterator()æ–¹æ³•éžå¸¸å…³é”®(å¯¹åº”äºŽjavaä¸­çš„iterator()æ–¹æ³•ï¼‰ï¼Œå®ƒå®žçŽ°äº†Iteratorä¸Žå®¹å™¨çš„å…³è”ç»‘å®šã€‚ç»™ä¸€ä¸ªæ›´å…·ä½“çš„ConcreteIteratorç±»å›¾ï¼š å…·ä½“æ¥è¯´ï¼ŒConcreteIteratorçš„æž„é€ å™¨æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªå®žçŽ°äº†AggregateæŽ¥å£çš„ç±»çš„å¯¹è±¡ã€‚è¿™æ ·ï¼Œé€šè¿‡createIterator()çš„å†…éƒ¨å®žçŽ° return new ConcreteIterator(this) ä½¿å¾—ConcreteIteratorå…³è”äº†ConcreteAggregateçš„å¯¹è±¡ï¼Œä»Žè€Œå¯ä»¥ç›´æŽ¥åˆ©ç”¨createItertor()è¿”å›žçš„Iteratorå¯¹è±¡æ¥å¯¹ConcreteAggregateè¿›è¡ŒéåŽ†ã€‚ Examples æ‰€æœ‰ã€Design Patternã€‘ç³»åˆ—åšæ–‡çš„ç¤ºä¾‹ä»£ç éƒ½å¯ä»¥åœ¨è¿™ä¸ªrepoä¸­æ‰¾åˆ°https://github.com/hippo-jessy/design_pattern è¿™é‡Œç»™å‡ºä¸€ä¸ªå®žçŽ°è¿­ä»£å™¨æ¨¡å¼çš„ä¸€ä¸ªä¾‹å­(ConcreteAggregateç”¨ArrayListä½œä¸ºå†…éƒ¨ç»“æž„å­˜å‚¨)ï¼š Aggregate Interface 123public interface Aggregate&lt;E&gt; &#123; Iterator&lt;E&gt; createIterator();&#125; Iterator Interface 1234public interface Iterator&lt;E&gt; &#123; E next(); boolean hasNext();&#125; ConcreteAggregate Class 123456789101112131415161718192021222324public class ConcreteAggregate&lt;E&gt; implements Aggregate&lt;E&gt; &#123; private ArrayList&lt;E&gt; internalData; public ConcreteAggregate()&#123; internalData = new ArrayList&lt;E&gt;(); &#125; @Override public Iterator&lt;E&gt; createIterator() &#123; return new ConcreteIterator&lt;E&gt;(this); &#125; public E get(int index)&#123; return internalData.get(index); &#125; public void add(E element)&#123; internalData.add(element); &#125; public int size()&#123; return internalData.size(); &#125;&#125; ConcreteIterator Class 1234567891011121314151617181920public class ConcreteIterator&lt;E&gt; implements Iterator&lt;E&gt; &#123; private ConcreteAggregate&lt;E&gt; aggregate; private int cursor = 0; public ConcreteIterator(ConcreteAggregate&lt;E&gt; aggregate) &#123; this.aggregate = aggregate; &#125; @Override public E next() &#123; return aggregate.get(cursor++); &#125; @Override public boolean hasNext() &#123; return (cursor &lt; aggregate.size()) ? true : false; &#125;&#125; Client ç«¯ä»£ç  1234567891011121314public class Client &#123; public static void main(String[] args)&#123; ConcreteAggregate&lt;String&gt; aggregate = new ConcreteAggregate&lt;String&gt;(); aggregate.add("This"); aggregate.add("is"); aggregate.add("a"); aggregate.add("bright"); aggregate.add("day"); Iterator&lt;String&gt; iter = aggregate.createIterator(); while(iter.hasNext())&#123; System.out.print(iter.next()+"/"); &#125; &#125;&#125; è¿è¡Œè¾“å‡ºç»“æžœä¸ºï¼š 1This/is/a/bright/day/ Extension å‚ç…§ä¸Šé¢çš„ç±»å›¾å’Œä¾‹å­ï¼Œåˆäº§ç”Ÿäº†å¦‚ä¸‹ç–‘é—®ï¼š è¿™é‡Œäº§ç”Ÿäº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œå¦‚æžœConcreteIteratorå¿…é¡»è®¾ä¸€ä¸ªConcreteAggregateç±»åž‹çš„å±žæ€§ï¼Œé‚£å²‚ä¸æ˜¯æ¯å®šä¹‰ä¸€ç§ConcreteAggregateéƒ½å¾—é‡æ–°å®šä¹‰ä¸€ä¸ªä¸Žä¹‹å¯¹åº”çš„ConcreteIteratorç±»ï¼Ÿä»ŽæŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œjavaä¸­ç¡®å®žæ˜¯è¿™æ ·åšçš„ã€‚ ä¸ºä»€ä¹ˆè¯´æ˜¯â€œä»ŽæŸç§ç¨‹åº¦ä¸Šâ€œ ï¼ŸåŽŸå› ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š ä»¥Collectionæ¡†æž¶ä¸ºä¾‹ï¼Œä»Žæœ€åˆçš„IterableæŽ¥å£, CollectionæŽ¥å£åˆ°æœ€åŽçš„ArrayList, LinkedList, HashSet, PriorityQueueç­‰æœ€ç»ˆå®žçŽ°ï¼Œä¸­é—´æ·»åŠ äº†å¤šé‡æŠ½è±¡å±‚ï¼Œæ¯”å¦‚AbstractCollection, AbstractListç­‰ç­‰ã€‚å› æ­¤åœ¨JDKä¸­ConcreteAggregateçš„è¿™ä¸ªæ¦‚å¿µå˜å¾—æ¨¡ç³Šäº†ã€‚ä»¥ArrayListå’ŒLinkedListä¸ºä¾‹ï¼Œå®žé™…ä¸Šå……å½“ConcreteAggregateçš„æ˜¯å®ƒä»¬çš„çˆ¶ç±»AbstractListã€‚ä¹Ÿå°±æ˜¯è¯´åªéœ€è¦å®šä¹‰ä¸ŽAbstractListå¯¹åº”çš„ConcreteIteratorç±»å³å¯ï¼Œè€Œä¸å¿…è¦ç»™ArrayListï¼ŒLinkedListéƒ½åˆ›å»ºå¯¹åº”çš„ConcreteIteratorã€‚ ä¸¥æ ¼åœ°æ¥è¯´ï¼Œjavaæ˜¯åœ¨ConcreteAggregateç±»ä¸­å®šä¹‰ä¸€ä¸ªä¸Žä¹‹å¯¹åº”çš„ConcreteIteratorå†…éƒ¨ç±»ã€‚è¿™æ ·åšå…¶å®žæ˜¯ä¸€ç§å¾ˆæ˜Žæ™ºçš„åšæ³•ï¼Œä»Žä¸Šé¢çš„ä¸¤å¼ ç±»å›¾ä»¥åŠExampleä¸­çš„ç¤ºä¾‹ä»£ç æˆ‘ä»¬å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°Clientç«¯ï¼ˆä¹Ÿå°±æ˜¯JDKä½¿ç”¨è€…ï¼‰é€šå¸¸åªä¼šå’ŒAggregateæŽ¥å£ï¼ŒConcreteAggregateç±»ä»¥åŠIteratoræŽ¥å£æ‰“äº¤é“ï¼ˆClientç«¯éåŽ†å®¹å™¨åªéœ€è¦ä½¿ç”¨IteratoræŽ¥å£æš´éœ²çš„æ–¹æ³•å³å¯ï¼Œæ²¡æœ‰ä»»ä½•è°ƒç”¨ConcreteIteratorçš„éœ€æ±‚ï¼‰ã€‚ConcreteIterableç±»é™¤äº†åœ¨ConcreteAggregateç±»çš„createIteratoræ–¹æ³•ä¸­è¢«å®žä¾‹åŒ–ä»¥å¤–ï¼Œä¸ä¼šåœ¨å…¶ä»–åœ°æ–¹å®žä¾‹åŒ–ã€‚è€Œä¸”è¿™ç§å…³è”å…³ç³»å­˜åœ¨çš„æ„ä¹‰æ˜¯ä¸ºäº†è®©ConcreteIterableä½¿ç”¨ConcreteAggregateå†…éƒ¨çš„æŸäº›æ–¹æ³•ä»¥ä¾¿å®žçŽ°IteratoræŽ¥å£å®šä¹‰çš„next()ç­‰æ–¹æ³•ã€‚å¾ˆæ˜Žæ˜¾åœ¨å°†ConcreteIterableä½œä¸ºConcreteAggregateçš„å†…éƒ¨ç±»æ¥å®šä¹‰éžå¸¸åˆé€‚ã€‚ç”šè‡³å¯ä»¥ç›´æŽ¥åœ¨createIteratoræ–¹æ³•ä¸­å®šä¹‰åŒ¿åå†…éƒ¨ç±»å®žçŽ°IterableæŽ¥å£ã€‚ é€‚åˆä½¿ç”¨åŒ¿åç±»æƒ…å½¢ï¼šè¯¥ç±»åªä¼šåœ¨å®šä¹‰çš„åœ°æ–¹è¢«å®žä¾‹åŒ–ï¼› é€‚åˆä½¿ç”¨å†…éƒ¨ç±»çš„ç‰¹å¾ï¼š è¯¥ç±»éœ€è¦ä½¿ç”¨å¤–éƒ¨ç±»çš„æŸäº›å±žæ€§æ–¹æ³•è€Œè¯¥ç±»åˆä¸ä¼šåœ¨å¤–éƒ¨ç±»ä»¥å¤–çš„åœ°æ–¹è¢«è°ƒç”¨æˆ–å®žä¾‹åŒ–ã€‚ äºŽæ˜¯æ ¹æ®ç¬¬äºŒç‚¹çš„å¯å‘ï¼Œä¸Šé¢Exampleéƒ¨åˆ†çš„å®žä¾‹ä»£ç å¯ä»¥è¿›è¡Œæ”¹å†™ï¼ˆIteratoræŽ¥å£ç”¨åŒ¿åå†…éƒ¨ç±»å®žçŽ°ï¼Œæ— éœ€ä¸“é—¨å•ç‹¬å®šä¹‰ConcreteIteratorç±»ï¼‰ï¼š æ”¹è¿›ç‰ˆConcreteAggregate 12345678910111213141516171819202122232425262728293031323334353637383940public class ConcreteAggregateOptim&lt;E&gt; implements Aggregate&lt;E&gt; &#123; private ArrayList&lt;E&gt; internalData; public ConcreteAggregateOptim() &#123; this.internalData = new ArrayList&lt;E&gt;(); &#125; @Override public Iterator&lt;E&gt; createIterator() &#123; //ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»å®žçŽ°IteratoræŽ¥å£ return new Iterator&lt;E&gt;() &#123; private int cursor = 0; @Override public E next() &#123; return get(cursor++); &#125; @Override public boolean hasNext() &#123; return (cursor &lt; size()) ? true : false; &#125; &#125;; &#125; public E get(int index) &#123; return internalData.get(index); &#125; public void add(E element) &#123; internalData.add(element); &#125; public int size() &#123; return internalData.size(); &#125;&#125; JDKæºç ä¸­å¯¹è¿­ä»£å™¨æ¨¡å¼çš„å®žçŽ°å’Œä¸Šé¢è¿™æ®µæ”¹è¿›ä»£ç æ¯”è¾ƒç±»ä¼¼ï¼Œåªä¸è¿‡å®ƒæ›´å€¾å‘äºŽé‡‡ç”¨å†…éƒ¨ç±»è€ŒéžåŒ¿åå†…éƒ¨ç±»ã€‚JDKä¸­è¿­ä»£å™¨æ¨¡å¼çš„ç®€åŒ–ç‰ˆç±»å›¾ï¼ˆä¸­é—´çœç•¥äº†å‡ å±‚ç»§æ‰¿å…³ç³»ï¼‰å¦‚ä¸‹ï¼š è¿™é‡ŒJDKåº“ä¸­IterableæŽ¥å£ç›¸å½“äºŽä¸Šæ–‡ç¬¬ä¸€å¼ ç±»å›¾ä¸­çš„AggregateæŽ¥å£ï¼ŒIterableæŽ¥å£ä¸­å£°æ˜Žçš„æ–¹æ³•Iterator()å¯¹åº”äºŽcreateIterator()æ–¹æ³•ï¼ŒJava ä¸­çš„IteratoræŽ¥å£ç›´æŽ¥å¯¹åº”ä¸Žä¹‹å‰çš„IteratoræŽ¥å£ï¼ŒAbstractListç±»å¯¹åº”äºŽConcreteAggregateç±»ï¼Œè€ŒAbstractListç±»ä¸­çš„å†…éƒ¨ç±»Itrå®žçŽ°äº†IteratoræŽ¥å£ï¼Œç›¸å½“äºŽConcreteIteratorã€‚ArrayListå’ŒLinkedListå‡ä¸ºAbstractListçš„å­ç±»ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨çˆ¶ç±»çš„iterator()æ–¹æ³•å¾—åˆ°ç”±å†…éƒ¨ç±»Itrå‘ä¸Šè½¬åž‹åŽçš„IteratoræŽ¥å£å¼•ç”¨ï¼Œé€šè¿‡IteratoræŽ¥å£æš´éœ²çš„hasNext, nextç­‰æ–¹æ³•æœ€ç»ˆå®žçŽ°éåŽ†ã€‚Clientç«¯ä»£ç ä¸€èˆ¬åªä¼šå’ŒIteratoræŽ¥å£ä»¥åŠArrayListï¼ŒLinkedListç­‰ç±»å‘ç”Ÿå…³è”ï¼ˆæœ‰æ—¶ä¹Ÿä¼šä½¿ç”¨ä¸Šé¢ç±»å›¾ä¸­çœç•¥äº†çš„ListæŽ¥å£ï¼ŒCollectionæŽ¥å£ç­‰ï¼Œä½†æ˜¯ä¸ä¼šæœ‰ä½¿ç”¨å†…éƒ¨ç±»Iterçš„éœ€æ±‚ï¼‰ã€‚ 1234567891011121314ArrayList&lt;String&gt; sampleList = new ArrayList&lt;String&gt;();Collections.addAll(sampleList,"a","b","c","d");//sampleList.iterator()è°ƒç”¨çš„æ˜¯ArrayListçš„çˆ¶ç±»AbstractListä¸­å®žçŽ°IterableæŽ¥å£çš„æ–¹æ³•Iterator&lt;String&gt; iter = sampleList.iterator();while(iter.hasNext())&#123; System.out.println(iter.next());&#125;//å‡¡æ˜¯å®žçŽ°äº†IterableæŽ¥å£çš„ç±»éƒ½å¯ä»¥ç”¨foreachå½¢å¼æ¥éåŽ†å…¶å†…éƒ¨å…ƒç´ ï¼ŒåŽŸç†æ˜¯foreachä¼š//é»˜è®¤è°ƒç”¨è¯¥ç±»çš„iterator()æ–¹æ³•èŽ·å¾—å…¶Iteratorç„¶åŽè¿›è¡ŒéåŽ†for(String item: sampleList)&#123; System.out.println(item);&#125; References Design Pattern(GOF)]]></content>
      <categories>
        <category>Design Pattern</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Design Pattern</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Java You Don't Know - Item 2ã€‘All Interfaces Have toString() Method]]></title>
    <url>%2F2017%2F01%2F22%2F%E3%80%90Java-You-Don-t-Know-Item-2%E3%80%91All-Interfaces-Have-toString-Method%2F</url>
    <content type="text"><![CDATA[Introduction æœ€è¿‘æ€»ç»“Thinking in Java è¯»ä¹¦ç¬”è®°æ—¶ï¼Œæ¶‰åŠåˆ°ä¸‹é¢è¿™æ®µç®€å•ä»£ç ï¼š 1234Collection&lt;String&gt; list = new ArrayList&lt;String&gt;();Collections.addAll(list, "tomorrow","hi","yes");//å†…éƒ¨è°ƒç”¨list.toStringæ–¹æ³•System.out.print(list); ä¸Šé¢è¿™æ®µä»£ç çš„è¿è¡Œç»“æžœå¦‚ä¸‹ï¼š 1[tomorrow, hi, yes] è¿›è€Œå¼•å‡ºäº†ä¸¤ä¸ªé—®é¢˜ï¼š Collectionæ˜¯ä¸€ä¸ªæŽ¥å£ï¼Œå…¶å†…éƒ¨å¹¶æ²¡æœ‰toStringæ–¹æ³•ï¼Œä¸ºä»€ä¹ˆå£°æ˜Žä¸ºCollectionç±»åž‹çš„listå¯¹è±¡å¯ä»¥è°ƒç”¨toStringæ–¹æ³•ï¼Ÿ listå¯¹è±¡çš„toStringæ–¹æ³•æ˜Žæ˜¾è¢«é‡å†™è¿‡äº†ï¼Œé‡å†™toStringæ–¹æ³•æ˜¯åœ¨å“ªé‡Œå®žçŽ°çš„ï¼Ÿ Solution é¦–å…ˆè§£å†³ç¬¬äºŒä¸ªé—®é¢˜ï¼š â€‹ ArrayListçš„ç»§æ‰¿å…³ç³»æ˜¯ ArrayList -&gt; AbstractList -&gt; AbstractCollectionã€‚è€ŒAbstractCollectionä¸­é‡å†™äº†toStringæ–¹æ³•ï¼Œå…·ä½“å®žçŽ°å¦‚ä¸‹ï¼š 123456789101112131415public String toString() &#123; Iterator&lt;E&gt; it = iterator(); if (! it.hasNext()) return "[]"; StringBuilder sb = new StringBuilder(); sb.append('['); for (;;) &#123; E e = it.next(); sb.append(e == this ? "(this Collection)" : e); if (! it.hasNext()) return sb.append(']').toString(); sb.append(',').append(' '); &#125; &#125; ç„¶è€Œè¿™ä¸ªè§£ç­”å¹¶ä¸èƒ½è§£å†³å…¨éƒ¨é—®é¢˜ï¼Œå°±ç®—æ˜¯ArrayListä¸­çš„toStringæ–¹æ³•å·²ç»é€šè¿‡ç»§æ‰¿çˆ¶ç±»å¾—åˆ°é‡å†™ï¼ŒArrayListåˆ›å»ºå‡ºçš„å¯¹è±¡è¢«å‘ä¸Šè½¬åž‹èµ‹å€¼ç»™äº†Collectionç±»åž‹çš„listå¼•ç”¨ï¼ŒäºŽæ˜¯åˆç»•å›žåˆ°ç¬¬ä¸€ä¸ªé—®é¢˜äº†ï¼ŒCollectionæŽ¥å£æºç ä¸­æ²¡æœ‰toStringæ–¹æ³•ï¼Œä¸ºä½•listå¯¹è±¡å¯ä»¥è°ƒç”¨toStringæ–¹æ³•ï¼Ÿ ä¸‹é¢è¿™å¼ å›¾é€šè¿‡Eclipseçš„è‡ªåŠ¨è¡¥å…¨å·¥å…·ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç‚¹çº¿ç´¢ï¼š å¯ä»¥çœ‹å‡ºï¼Œå…¶å®žlistè°ƒç”¨çš„æ˜¯Objectä¸­çš„toStringæ–¹æ³•ã€‚å®žé™…ä¸ŠCollectionä¸­æœ‰toStringæ–¹æ³•ï¼Œåªä¸è¿‡æ˜¯éšå¼æ·»åŠ çš„ã€‚ä¸€ä¸ªæ²¡æœ‰ä»»ä½•çˆ¶æŽ¥å£çš„æŽ¥å£ï¼Œå¦‚æžœæ²¡æœ‰æ˜¾å¼å£°æ˜ŽtoStringç­‰Objectç±»ä¸­çš„publicå®žä¾‹æ–¹æ³•ï¼Œåˆ™ä¼šè¢«éšå¼æ·»åŠ è¿™äº›æ–¹æ³•å¯¹åº”çš„æŠ½è±¡æ–¹æ³•ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œæ‰€æœ‰æŽ¥å£éƒ½ä¼šæœ‰å¯¹åº”äºŽObjectç±»ä¸­publicå®žä¾‹æ–¹æ³•çš„æŠ½è±¡æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰æŽ¥å£éƒ½ä¼šæœ‰toString, hashCode, wait, notify, getClass, equalsç­‰æ–¹æ³•ã€‚Java Language Specification ä¸­çš„åŽŸè¯å¦‚ä¸‹ï¼š 12345If an interface has no direct superinterfaces, then the interface implicitly declares apublic abstract member method m with signature s, return type r, and throws clause tcorresponding to each public instance method m with signature s, return type r, andthrows clause t declared in Object, unless a method with the same signature, same returntype, and a compatible throws clause is explicitly declared by the interface. æ€»ç»“ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹ï¼ŒCollectionä¸­æ²¡æœ‰æ˜¾å¼å£°æ˜ŽtoStringæ–¹æ³•ï¼Œå› æ­¤ä¼šéšå¼æ·»åŠ å¯¹åº”äºŽObjectç±»ä¸­toStringçš„åŒåæŠ½è±¡æ–¹æ³•ï¼ŒSystem.out.println(list) listè°ƒç”¨CollectionæŽ¥å£ä¸­çš„toStringæ–¹æ³•ï¼Œlistå®žé™…ç±»åž‹ä¸ºArrayList, ç”±äºŽåŠ¨æ€ç»‘å®šï¼ˆæ­¤å¤„æ¶‰åŠå¤šæ€ï¼‰ï¼Œè°ƒç”¨çš„æ˜¯ArrayListå®žä¾‹å¯¹è±¡ä¸­çš„toStringæ–¹æ³•ï¼ŒArrayListä¸­å¹¶æ²¡æœ‰é‡å†™toStringæ–¹æ³•ï¼Œåˆå› ä¸ºArrayListçš„è¶…çˆ¶ç±»AbstractCollectioné‡å†™äº†toStringæ–¹æ³•ï¼Œå› æ­¤æœ€åŽè°ƒç”¨çš„æ˜¯AbstractCollection ä¸­çš„toStringæ–¹æ³•ã€‚ä»Žè€Œå®žçŽ°äº†æ‰“å°Collectionæ‰€æœ‰å…ƒç´ çš„æœ€ç»ˆæ•ˆæžœã€‚ ç”±æ­¤è¿›è¡Œä¸€ä¸‹æ‹“å±•ï¼Œå¦‚æžœæŽ¥å£ä¸­æ˜¾å¼å£°æ˜Žäº†toStringç­‰æ–¹æ³•åˆä¼šæ€Žæ ·å‘¢ï¼Ÿæ­¤æ—¶ï¼Œå®žçŽ°è¯¥æŽ¥å£çš„ç±»ä¸ä¼šè¢«å¼ºåˆ¶è¦æ±‚å®žçŽ°toStringæ–¹æ³•ï¼ŒåŽŸå› å¾ˆç®€å•ï¼Œæ‰€æœ‰çš„ç±»éƒ½å·²ç»é€šè¿‡ç»§æ‰¿Objectç±»å®žçŽ°äº†toStringæ–¹æ³•ã€‚å› æ­¤ï¼Œåœ¨å¹³æ—¶codingçš„æ—¶å€™ï¼Œå¦‚æžœæƒ³åœ¨æŽ¥å£ä¸­å®šä¹‰æœ‰æ•ˆçš„å¼ºåˆ¶è¢«å®žçŽ°çš„æŠ½è±¡æ–¹æ³•ï¼Œæœ€å¥½é¿å…ä¸ŽObjectç±»ä¸­publicå®žä¾‹æ–¹æ³•é‡åã€‚ Reference http://stackoverflow.com/questions/12124163/do-interfaces-have-tostring-method]]></content>
      <categories>
        <category>Java</category>
        <category>Java You Don&#39;t Know</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Java You Don't Know - Item 1ã€‘ä¸ºä»€ä¹ˆlongç±»åž‹çš„å˜é‡åœ¨èµ‹å€¼æ—¶æ•°å€¼å¸¸é‡è¦åŠ â€œLâ€]]></title>
    <url>%2F2017%2F01%2F21%2F%E3%80%90Java-You-Don-t-Know-Item-1%E3%80%91%E4%B8%BA%E4%BB%80%E4%B9%88long%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%98%E9%87%8F%E5%9C%A8%E8%B5%8B%E5%80%BC%E6%97%B6%E6%95%B0%E5%80%BC%E5%B8%B8%E9%87%8F%E8%A6%81%E5%8A%A0%E2%80%9CL%E2%80%9D%2F</url>
    <content type="text"><![CDATA[ä¸‹é¢è¿™æ®µä»£ç å¤§å®¶åº”è¯¥å¤šå¾ˆç†Ÿæ‚‰ï¼Œä¹Ÿéƒ½çŸ¥é“Javaèµ‹å€¼longç±»åž‹å˜é‡æ—¶ï¼Œä¸€å®šè¦åœ¨å¸¸é‡åŽé¢åŠ ä¸Šâ€œLâ€æˆ–â€œlâ€ã€‚è¿™ç¯‡ç¬”è®°å°±ç®€å•å±•å¼€è®¨è®ºå…¶åŽŸå› ã€‚ 123long a = 500; //èµ‹å€¼500ï¼Œç¼–è¯‘é€šè¿‡long b = 5000000000; //èµ‹å€¼50äº¿ï¼Œç¼–è¯‘æŠ¥é”™long c = 5000000000L; //èµ‹å€¼50äº¿ï¼Œç¼–è¯‘é€šè¿‡ â€‹ è¿™é‡Œå…¶å®žæ¶‰åŠåˆ°ä¸€ä¸ªç»†èŠ‚ï¼ŒJavaé»˜è®¤çš„æ•´æ•°å¸¸é‡ç±»åž‹ä¸ºintã€‚å› æ­¤æˆ‘ä»¬èµ‹å€¼å˜é‡æ—¶ï¼Œä¸ç®¡å˜é‡æ˜¯ä»€ä¹ˆç±»åž‹ï¼Œèµ‹å€¼ç­‰å·å³è¾¹çš„æ•°å­—é»˜è®¤å…ˆä½¿ç”¨intä¿å­˜ï¼Œç„¶åŽèµ‹å€¼æ—¶å†æ ¹æ®å˜é‡ç±»åž‹è¿›è¡Œè‡ªåŠ¨ç±»åž‹è½¬æ¢ã€‚æ¯”å¦‚ byte a = 5 å®žé™…ä¸Šæ˜¯å°†intç±»åž‹çš„â€˜5â€™ï¼Œé€šè¿‡è‡ªåŠ¨ç±»åž‹è½¬æ¢ä¸ºbyteç±»åž‹çš„å˜é‡aã€‚ç”±äºŽlongç±»åž‹çš„å˜é‡å¯èƒ½ä¿å­˜è¿œè¿œå¤§äºŽintè¡¨ç¤ºèŒƒå›´çš„æ•°å€¼ï¼Œå› æ­¤å¯èƒ½å‡ºçŽ°å¤§äºŽintè¡¨ç¤ºèŒƒå›´çš„æ•°å€¼å¸¸é‡é»˜è®¤ä¿å­˜åœ¨intä¸­çš„æƒ…å†µã€‚å…·ä½“å‚ç…§ä¸Šè¿°code blockä¸­çš„ç¬¬äºŒè¡Œï¼Œè¯¥èµ‹å€¼è¯­å¥æ‰§è¡Œçš„è¿‡ç¨‹æ˜¯ï¼š â€‹ 1. çŽ°å°†50äº¿æ•°å€¼ä¿å­˜ä¸ºé»˜è®¤çš„æ•´æ•°å¸¸é‡ç±»åž‹intï¼› â€‹ 2. å°†è¯¥intç±»åž‹çš„æ•°å€¼é€šè¿‡è‡ªåŠ¨è½¬åž‹èµ‹å€¼ç»™longç±»åž‹çš„å˜é‡b; â€‹ å®žé™…ä¸Šåœ¨æ‰§è¡Œç¬¬ä¸€æ­¥æ—¶å°±å·²ç»å‡ºé”™äº†ï¼Œintçš„è¡¨ç¤ºèŒƒå›´å¤§æ¦‚åœ¨æ­£è´Ÿ21äº¿å·¦å³ï¼Œ50äº¿è¿œè¿œå‡ºè¶…å‡ºè¯¥èŒƒå›´ã€‚å…·ä½“æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š â€‹ è¿™ç§æŠ¥é”™å’Œèµ‹å€¼å·å·¦è¾¹æ˜¯å¦æ˜¯longç±»åž‹æ— å…³ï¼Œåªä¸Žæ•°å€¼å¸¸é‡å¤§å°æ˜¯å¦è¶…å‡ºintè¡¨ç¤ºèŒƒå›´æœ‰å…³ã€‚æ¯”å¦‚ byte a = 5000000000 åŒæ ·ä¼šæŠ¥å‡º â€œinteger number too largeâ€ çš„é”™è¯¯ã€‚å¦‚æžœæƒ³è¦ä¿å­˜ç±»ä¼¼50äº¿è¿™æ ·çš„å¤§æ•°å€¼ï¼Œè§£å†³æ–¹æ³•ä¾¿æ˜¯åœ¨æ•°å€¼å¸¸é‡åŽåŠ ä¸Šâ€œLâ€, è¿™æ ·ä½¿å¾—Javaä¸å†é»˜è®¤ä½¿ç”¨intç±»åž‹ä¿å­˜æ•°å­—è€Œæ˜¯æ”¹ä¸ºç›´æŽ¥ç”¨longç±»åž‹æ¥ä¿å­˜ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œå¯¹äºŽ long c = 5000000000L è¿™æ ·çš„èµ‹å€¼è¯­å¥å½“ç„¶å°±ä¸ä¼šå†æŠ¥é”™ï¼Œä½†æ˜¯å¦‚æžœæ˜¯ byte a = 5000000000L å‘¢ï¼Ÿè¿™æ ·åœ¨èµ‹å€¼è¯­å¥æ‰§è¡Œçš„ä¸¤ä¸ªæ­¥éª¤ä¸­ï¼Œè™½ç„¶ç¬¬ä¸€æ­¥æ•°å€¼å¸¸é‡é»˜è®¤ä¿å­˜ä¸ºlongç±»åž‹ä¸ä¼šæŠ¥é”™äº†ï¼Œä½†æ˜¯ç¬¬äºŒæ­¥å°†longç±»åž‹è‡ªåŠ¨è½¬åž‹ç»™byteç±»åž‹å´ä¼šå‡ºçŽ°ç²¾åº¦ä¸¢å¤±ï¼ˆ50äº¿è¿œå¤§äºŽbyteçš„è¡¨ç¤ºèŒƒå›´ï¼‰ï¼Œå› æ­¤ä¼šæŠ¥å‡ºç¬¬äºŒç§é”™è¯¯ï¼š â€‹ å¾ˆæ˜Žæ˜¾è¿™æ˜¯ä¸€ä¸ªç±»åž‹è½¬æ¢çš„é”™è¯¯ï¼Œæˆ‘ä»¬çŸ¥é“ç±»åž‹è½¬æ¢åˆ†ä¸ºè‡ªåŠ¨ç±»åž‹è½¬æ¢å’Œå¼ºåˆ¶ç±»åž‹è½¬æ¢ï¼Œè‡ªåŠ¨ç±»åž‹è½¬æ¢åªèƒ½æ˜¯ç”±å®¹é‡å°çš„ç±»åž‹å‘å®¹é‡å¤§çš„ç±»åž‹è½¬æ¢ï¼ˆå‘ä¸Šè½¬åž‹ï¼Œè¿™é‡Œè¯´çš„å®¹é‡æ˜¯æŒ‡è¡¨æ•°èŒƒå›´è€Œä¸æ˜¯æŒ‡å­—èŠ‚æ•°ç›®ï¼Œæ¯”å¦‚8å­—èŠ‚çš„longå¯ä»¥è‡ªåŠ¨è½¬åž‹ä¸º4å­—èŠ‚çš„floatï¼‰ï¼Œå¦åˆ™åˆ™éœ€è¦å¼ºåˆ¶ç±»åž‹è½¬æ¢ã€‚æ­¤æ—¶ç”±longå‘byteæ˜¾ç„¶æ— æ³•è¿›è¡Œè‡ªåŠ¨ç±»åž‹è½¬æ¢ï¼Œå› æ­¤æŠ¥å‡ºincompatible typesçš„é”™è¯¯ã€‚è¿™é‡Œåˆå¼•å‡ºäº†ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆ byte a = 5 è¿™æ ·çš„èµ‹å€¼è¯­å¥ä¸ä¼šæŠ¥å‡ºç±»åž‹è½¬æ¢çš„é”™è¯¯å‘¢ï¼Ÿå¸¸é‡æ•°å€¼5ä¹Ÿæ˜¯é»˜è®¤ä¿å­˜ä¸ºintç±»åž‹ï¼Œæ­¤æ—¶intè½¬byteæ˜¯å‘ä¸‹è½¬åž‹ï¼ŒæŒ‰é“ç†æ˜¯åº”è¯¥å¼ºåˆ¶ç±»åž‹è½¬æ¢çš„ã€‚è¿™é‡Œå…¶å®žæ¶‰åŠåˆ°è‡ªåŠ¨ç±»åž‹è½¬æ¢çš„ä¸€ä¸ªç‰¹ä¾‹ï¼š**æ•´åž‹å¸¸é‡ä»¥é»˜è®¤ç±»åž‹intç›´æŽ¥èµ‹å€¼ç»™byte, short, charç­‰ç±»åž‹å˜é‡æ—¶ï¼Œåªè¦è¯¥æ•´åž‹å¸¸é‡ä¸è¶…è¿‡å¯¹åº”å˜é‡ç±»åž‹çš„è¡¨æ•°èŒƒå›´æ—¶ï¼Œæ˜¯å¯ä»¥è¿›è¡Œè‡ªåŠ¨ç±»åž‹è½¬æ¢çš„ã€‚**æ›´æ·±ä¸€å±‚çš„åŽŸå› å¯èƒ½æ˜¯ç”±äºŽJVMå†…éƒ¨å®žé™…ä¸Šæ˜¯å°†char, byte, shortæ‰©å±•æˆintå¤„ç†çš„ï¼Œè¿™é‡Œæš‚æ—¶ä¸åšæ·±ç©¶ã€‚ â€‹ éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œå¿…é¡»å¾—æ˜¯æ•´åž‹å¸¸é‡è€Œä¸”å¿…é¡»æ˜¯ç›´æŽ¥èµ‹å€¼æ‰èƒ½è¿›è¡Œä¸Šè¿°çš„ç‰¹ä¾‹è½¬æ¢ã€‚ä¸¾ä¸ªåä¾‹åŠ æ·±å°è±¡ï¼š 12int a = 10;byte b = a; â€‹ æ­¤æ—¶ä¼šæŠ¥å‡ºincompatible typesçš„é”™è¯¯ï¼Œç®€å•æ¥è¯´ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼šç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶é¦–å…ˆå¦‚æžœå‘çŽ°å³è¾¹ä¸ºintç±»åž‹å¹¶ä¸”ä¸ºå¸¸é‡ï¼Œåˆ™ä¼šåˆ¤æ–­è¯¥å¸¸é‡æ˜¯å¦åœ¨è¢«èµ‹å€¼å˜é‡ç±»åž‹è¡¨æ•°èŒƒå›´å†…ï¼Œå¦‚æžœåœ¨åˆ™è‡ªåŠ¨è½¬åž‹ï¼Œä¸åœ¨ï¼Œåˆ™æŠ¥é”™è¦æ±‚å¼ºåˆ¶è½¬åž‹ã€‚å¦‚æžœå‘çŽ°å³è¾¹ä¸ºå˜é‡ï¼Œå¦‚æžœæ»¡è¶³å‘ä¸Šè½¬åž‹çš„æ ‡å‡†åˆ™å¯è‡ªåŠ¨è½¬åž‹ï¼Œå¦åˆ™æŠ¥é”™è¦æ±‚å¼ºåˆ¶è½¬åž‹ã€‚ä¸‹é¢è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼çš„å°ä¾‹å­ï¼š 123byte a = 1, b = 2, c, d;c = 1 + 2; //ç¼–è¯‘é€šè¿‡d = a + b; //æŠ¥é”™ï¼Œincompatible types â€‹ å½“ç®—æ•°è¿ç®—æ“ä½œå¯¹è±¡æ˜¯byte, short, charæ—¶ï¼ŒJavaä¼šå°†æ“ä½œæ•°æå‡ä¸ºintç±»åž‹æ¥å¤„ç†ï¼Œå› æ­¤ç¬¬ä¸‰è¡Œå³è¾¹ä¸ºintç±»åž‹ï¼Œç„¶è€Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æ— æ³•å¾—çŸ¥ä¸¤ä¸ªå˜é‡çš„ç›¸åŠ ç»“æžœï¼Œå› æ­¤æ— æ³•è¿›ä¸€æ­¥åˆ¤æ–­æ˜¯å¦åœ¨byteçš„èŒƒå›´å†…ï¼Œå› æ­¤æ— æ³•è‡ªåŠ¨è½¬åž‹ï¼›ç›¸åç¬¬äºŒè¡Œä»£ç æ˜¯ä¸¤ä¸ªå¸¸é‡intç›¸åŠ ï¼Œç¼–è¯‘é˜¶æ®µå°±å¯ä»¥å¾—åˆ°ç»“æžœä¸º3ï¼Œåœ¨byteçš„èŒƒå›´å†…ï¼Œè‡ªåŠ¨è½¬åž‹ã€‚ References [1] [http://tieba.baidu.com/p/2620126491?pn=2]]></content>
      <categories>
        <category>Java</category>
        <category>Java You Don&#39;t Know</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Charset and Encoding]]></title>
    <url>%2F2017%2F01%2F17%2FCharset-and-Encoding%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘é‡æ–°æ•´ç†ä¸€é Java åŸºç¡€ï¼Œåœ¨å†™åˆ°æ³¨é‡Šç›¸å…³çš„å†…å®¹æ—¶å‘çŽ°è‡ªå·±å¯¹å„ç§å­—ç¬¦ç¼–ç é—®é¢˜ä¸€ç›´ä¼¼æ‡‚éžæ‡‚ã€‚ç›¸ä¿¡å¾ˆå¤šäººéƒ½å¬è¯´è¿‡ASCII, Unicode, GB2312, UTF-8ä¹‹ç±»çš„ç¼–ç ï¼Œä½†æ˜¯å¯¹äºŽå®ƒä»¬çš„å°è±¡å¯èƒ½ä»…ä»…åœç•™åœ¨çŸ¥é“å®ƒä»¬æ˜¯ä¸åŒçš„å­—ç¬¦ç¼–ç ï¼Œä½¿ç”¨ä¸å½“å¯èƒ½ä¼šå¯¼è‡´ä¹±ç çš„å±‚é¢ä¸Šã€‚ â€‹ æŸ¥äº†å¾ˆå¤šèµ„æ–™ï¼Œè„‘å­æœ‰ç‚¹ä¹±ï¼Œä¸‹é¢è¿™ç¯‡ç¬”è®°ä¸»è¦ç”¨æ¥æ¢³ç†æ€è·¯ã€‚æ–‡ç« å¯èƒ½æ¶‰åŠåˆ°ASCII, ISO8859, GB2312, GBK, Unicode, UTF-8, UTF-16ç­‰å¤šä¸ªå­—ç¬¦é›†å’Œç¼–ç æ–¹å¼è¿›è¡ŒæŽ¢è®¨ï¼Œç¯‡å¹…æœ‰é™ï¼Œæ³›æ³›è€Œè°ˆï¼Œå¸Œæœ›å¯¹æœ‰ç›¸åŒå›°æƒ‘çš„æœ‹å‹æœ‰æ‰€å¸®åŠ©~~ Charset and Encoding å¼ºè°ƒï¼Œè¿™ä¸€éƒ¨åˆ†éžå¸¸é‡è¦ï¼Œå¾ˆå¤šäººåœ¨å¼„æ¸…æ¥šUnicode, GB2312ç­‰å¤šç§ç¼–ç åŽŸç†ä¹‹åŽå¯èƒ½éƒ½ä¸ä¸€å®šå¼„æ¸…æ¥šäº†å­—ç¬¦é›†å’Œå­—ç¬¦ç¼–ç çš„åŒºåˆ«ã€‚åœ¨å…·ä½“è®²è§£å„ç§ç¼–ç è§„åˆ™ä¹‹å‰ï¼Œå…ˆæ¥æ˜Žç¡®ä¸€ä¸‹å­—ç¬¦é›†(Charset)å’Œå­—ç¬¦ç¼–ç (Encoding)çš„åŒºåˆ«ã€‚ Charset (Character set) å­—ç¬¦é›†ï¼š è§åçŸ¥ä¹‰ï¼Œå­—ç¬¦é›†å°±æ˜¯å­—ç¬¦çš„é›†åˆã€‚æ¯”å¦‚ASCIIå­—ç¬¦é›†æ”¶å½•äº†è‹±æ–‡å­—ç¬¦å’Œæ ‡ç‚¹ä»¥åŠæŽ§åˆ¶å­—ç¬¦ï¼ŒGB2312å­—ç¬¦é›†æ”¶å½•äº†å¸¸ç”¨çš„æ±‰å­—å­—ç¬¦ã€æ ‡ç‚¹ç­‰ã€‚ Encoding (Charset Encoding) å­—ç¬¦ç¼–ç ï¼šå®žçŽ°å­—ç¬¦ä¸Žå­—èŠ‚ï¼ˆäºŒè¿›åˆ¶ï¼‰æ˜ å°„çš„ç¼–ç è§„åˆ™ã€‚å¯ä»¥é€šä¿—çš„çœ‹åšæ˜¯å®žçŽ°è¯­è¨€å­—ç¬¦ä¸Žè®¡ç®—æœºæœºå™¨ç ç›¸äº’ç¿»è¯‘çš„è§„åˆ™ï¼Œæ¯”å¦‚UTF-8ç¼–ç æ–¹å¼ç­‰ã€‚ â€‹ä¸ºä»€ä¹ˆç»å¸¸å®¹æ˜“æ··æ·†Charsetä¸ŽEncodingï¼Ÿä¸»è¦ç”±äºŽå¾ˆå¤šCharsetåªå¯¹åº”ä¸€ç§Encodingçš„æ–¹å¼ï¼Œå¹¶ä¸”æœ‰ç›¸åŒçš„åå­—ï¼Œæ¯”å¦‚ASCIIå­—ç¬¦é›†åªå¯¹åº”ASCIIç¼–ç è§„åˆ™ï¼ŒGB2312å­—ç¬¦é›†åªèƒ½ç”±GB2312ç¼–ç è§„åˆ™æ¥è¿›è¡Œç¿»è¯‘ã€‚ç„¶è€Œä¸‹é¢è¿™ä¸ªä¾‹å­å¾ˆå¥½åœ°è¯ é‡Šäº†Charsetä¸ŽEncodingçš„åŒºåˆ«ã€‚ Unicodeå­—ç¬¦é›†å¯¹åº”äº†å¤šç§Encodingæ–¹å¼ï¼ˆUTF-8ç­‰ï¼‰ï¼Œè€ŒGB2312å­—ç¬¦é›†åªæœ‰GB2312ä¸€ç§ç¼–ç æ–¹å¼ã€‚å› æ­¤å®žé™…ä¸Šæˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„ charset = &quot;uft-8&quot; æ˜¯ä¸å‡†ç¡®çš„è¯´æ³•ï¼ŒUTF-8å®žé™…ä¸Šåªæ˜¯ä¸€ç§ç¼–ç æ–¹å¼è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦é›†ï¼Œå®ƒæ‰€å¯¹åº”çš„å­—ç¬¦é›†æ˜¯Unicodeå­—ç¬¦é›†ã€‚é¢å¤–æä¸€å¥ï¼Œåœ¨windowså¹³å°ä¸Š(æ¯”å¦‚è®°äº‹æœ¬)æœ‰æ—¶å€™ä¼šå‡ºçŽ°Unicodeç¼–ç è¿™ç§ä¸è§„èŒƒçš„è¯´æ³•ï¼Œå…¶å®žå®ƒæŒ‡çš„çš„UTF-16ç¼–ç ã€‚ ä»ŽåŽ†å²è¯´èµ· é¦–å…ˆä¸Šå›¾ï¼Œè¿™å¼ å›¾æŒ‰ç…§åŽ†å²å‘å±•é¡ºåºå¯¹å¤šç§å­—ç¬¦ç¼–ç é›†è¿›è¡Œäº†æ¢³ç†ã€‚ ç®€å•çš„æ¥è¯´ï¼Œæœ€å¼€å§‹ä¸ºäº†èƒ½å®žçŽ°äºŒè¿›åˆ¶ä¸Žäººç±»è¯­è¨€å­—ç¬¦çš„æ˜ å°„è½¬æ¢ï¼Œäººä»¬æƒ³å‡ºäº†ASCIIç æ¥å®žçŽ°è‹±æ–‡å­—ç¬¦çš„è½¬æ¢ã€‚åŽæ¥è¥¿æ¬§å„å›½ä¹Ÿéœ€è¦è¡¨ç¤ºè‡ªå·±çš„è¯­è¨€ï¼ŒäºŽæ˜¯å¯¹ASCIIè¿›è¡Œæ‰©å±•äº§ç”ŸISO8859ã€‚å†ç„¶åŽæˆ‘å¤©æœå´›èµ·ï¼Œåšå¤§ç²¾æ·±çš„ä¸­æ–‡é€šè¿‡GB2312ç­‰å­—ç¬¦é›†è¿›å…¥è®¡ç®—æœºï¼Œå½“ç„¶ä¸–ç•Œä¸Šè¿˜æœ‰å„ç§è¯­è¨€ï¼ŒäºŽæ˜¯å„ç§å­—ç¬¦é›†ç¼–ç å±‚å‡ºä¸ç©·ã€‚ã€‚ã€‚ä¸ºäº†ä¿ƒè¿›ä¸–ç•Œçš„å’Œè°ï¼ŒUnicodeå‡ºçŽ°äº†å¸Œæœ›èƒ½å¤ŸåŒ…ç½—ä¸‡è±¡ï¼Œä»¥ä¸€ç§å­—ç¬¦ç¼–ç é›†æ”¶å½•æ‰€æœ‰çš„è¯­è¨€ã€‚å†åŽæ¥éšç€ç½‘ç»œä¸–ç•Œçš„å´›èµ·ï¼Œä¸ºäº†æé«˜ç½‘ç»œä¼ è¾“æ•ˆçŽ‡ï¼ŒUTF-8ç­‰ç¼–ç æ–¹å¼å‡ºçŽ°ä»¥æœŸæœ›æé«˜Unicodeçš„ç¼–ç æ•ˆçŽ‡ã€‚ ä¸‹é¢å°†å¤§è‡´æ ¹æ®ä¸Šå›¾çš„è„‰ç»œï¼Œä¾æ¬¡å¯¹å„ä¸ªå­—ç¬¦ç¼–ç å±•å¼€è®²è§£ã€‚ ASCII â€‹ è®¡ç®—æœºä½¿ç”¨äºŒè¿›åˆ¶ä¿å­˜æŒ‡ä»¤å’Œæ•°æ®ï¼Œå­—èŠ‚ä½œä¸ºè®¡ç®—æŽ¥å¤„ç†æ•°æ®çš„åŸºæœ¬å•ä½ï¼Œæœ‰256(28)ç§å¯èƒ½çŠ¶æ€ã€‚è¿™äº›çŠ¶æ€è¢«äººä»¬åˆ©ç”¨æ¥æ ‡è®°æŒ‡ä»¤å’Œæ–‡å­—ã€‚æœ€åˆå‰32(0x20)ç§çŠ¶æ€è¢«ç”¨æ¥è¡¨ç¤ºç»ˆç«¯ã€æ‰“å°æœºç­‰è®¾å¤‡çš„æŸäº›ç‰¹æ®ŠåŠ¨ä½œï¼Œæ¯”å¦‚ç»ˆç«¯é‡åˆ°å­—èŠ‚0x10åˆ™æ¢è¡Œï¼Œç±»ä¼¼çš„è¿˜æœ‰å›žè½¦(CR 0x0D)ï¼Œéœ‡é“ƒ(BELL 0x07)ç­‰ã€‚è¿™å‰32ç§çŠ¶æ€åˆè¢«ç§°ä¸ºæŽ§åˆ¶ç ã€‚é™¤äº†è¿™äº›ç‰¹æ®Šç”¨é€”çš„çŠ¶æ€å¤–ï¼Œè¿˜æœ‰256-32=224ç§çŠ¶æ€æ²¡æœ‰è¢«åˆ©ç”¨ï¼Œèµ„æºæµªè´¹æ€Žä¹ˆèƒ½å¿ï¼Œä½•å†µé™¤äº†æŽ§åˆ¶æŒ‡ä»¤å¤–ï¼Œå’±ä»¬çš„æ–‡å­—è¿˜æ²¡æœ‰è¢«è¡¨ç¤ºã€‚äºŽæ˜¯è¿™äº›å¤šå‡ºæ¥çš„çŠ¶æ€è¢«ç”¨æ¥è¡¨ç¤ºæ–‡å­—(English Character)å’Œç¬¦å·æ ‡ç‚¹ç­‰ï¼Œå¦‚æ­¤è¿™èˆ¬ï¼Œè®¡ç®—æœºå°±å¯ä»¥æ˜¾ç¤ºå’Œè®°å½•æ–‡å­—äº†ï¼Œè¿™ä¾¿æ˜¯ASCII(American Standard Code for Information Interchange)æœ€åˆçš„ç”±æ¥ã€‚ä¸‹é¢é™„å¼ ASCIIçš„å›¾åŠ æ·±å°è±¡ã€‚ ä»Žå›¾ç‰‡ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰è‹±æ–‡å­—ç¬¦å’Œæ ‡ç‚¹ç­‰å¯æ˜¾ç¤ºå­—ç¬¦å³ä½¿åŠ ä¸Š32ç§æŽ§åˆ¶å­—ç¬¦ï¼Œä¹Ÿåªéœ€è¦128ç§çŠ¶æ€(7 bits)å°±å¯ä»¥è¡¨ç¤ºå®Œï¼Œå› æ­¤ASCIIç å®žé™…ä¸Šæ¯ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä½éƒ½æ˜¯0ã€‚ ISO8859 â€‹ ç„¶è€Œï¼Œä¸–ç•Œä¸Šä¸æ­¢åªæœ‰è‹±æ–‡è¿™ä¸€ç§è¯­è¨€ï¼Œè¥¿æ¬§å„ä¸ªå›½å®¶è ¢è ¢æ¬²åŠ¨ã€‚ç”±äºŽè¥¿æ¬§çš„å¤šç§è¯­è¨€å’Œè‹±è¯­æœ‰ç€å…±åŒçš„èµ·æºï¼Œéƒ½æ˜¯æ‹‰ä¸è¯­ç³»ï¼Œå› æ­¤é™¤äº†ASCIIç åŽŸæœ‰çš„128ä¸ªå­—ç¬¦ï¼Œå€ŸåŠ©ä¸€ä¸ªå­—èŠ‚å‰©ä¸‹çš„256-128=128ç§çŠ¶æ€ä¹Ÿè¶³ä»¥è¡¨ç¤ºä»–ä»¬çš„è¯­è¨€å­—ç¬¦ä¸åŒçš„åœ°æ–¹ï¼ˆæ¯”å¦‚130å³0x82åœ¨æ³•è¯­ç¼–ç ä¸­ä»£è¡¨äº†Ã©ï¼‰ã€‚ç”±æ­¤ï¼Œå¼•å‡ºäº†ISO8859è¿™ç§ç¼–ç æ–¹å¼ã€‚ISO8859å®žé™…ä¸Šæ˜¯å¯¹ASCIIçš„8ä½æ‰©å±•ï¼ˆASCIIå®žé™…ä¸Šåªç”¨åˆ°äº†ä¸€ä¸ªå­—èŠ‚çš„ä½Ž7ä½ï¼‰ï¼Œæ˜¯ç”±ISO(the International Organization for Standardization )æå‡ºçš„ã€‚ GB2312 â€‹ ç»ˆäºŽç­‰åˆ°æˆ‘å¤§å¤©æœäº†ï¼ŒåŒºåŒº256ç§çŠ¶æ€æ€Žå¤Ÿè¡¨ç¤ºæˆ‘æœä¸Šä¸‹äº”åƒå¹´çš„ç¿çƒ‚æ–‡æ˜Žï¼ï¼ï¼ä»…ä»…å¸¸ç”¨çš„æ±‰å­—å°±å¤šè¾¾6000å¤šä¸ªï¼Œæ›´åˆ«æé‚£äº›ç”Ÿåƒ»å­—å’Œç¹ä½“å­—äº†ã€‚å‹¤åŠ³æ™ºæ…§çš„ä¸­å›½äººæ°‘éœ€è¦æ›´å¤šä½æ¥è¡¨ç¤ºæ±‰å­—ï¼ŒäºŽæ˜¯GB2312åº”è¿è€Œç”Ÿã€‚GB2312é‡‡ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªä¸­æ–‡å­—ç¬¦ï¼ˆå³ä¸€ä¸ªæ±‰å­—ï¼‰ï¼Œä»ç„¶ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºè‹±æ–‡å­—ç¬¦æ ‡ç‚¹ç­‰ï¼ˆä¿ç•™ASCIIçš„æ–¹å¼ï¼‰ï¼Œä¸€å…±æ”¶å½•äº†6763ä¸ªå¸¸ç”¨æ±‰å­—ï¼Œå…¶ä»–ä¸€äº›ç‰¹æ®Šç¬¦å·ï¼Œä»¥åŠASCIIè¡¨ç¤ºçš„å­—ç¬¦ã€‚è¿™æ ·ä¸€æ¥æ¯ä¸ªå­—ç¬¦å¯¹åº”çš„äºŒè¿›åˆ¶ä½æ•°å¯å˜ï¼ˆ8ä½æˆ–16ä½ï¼‰ï¼Œè®¡ç®—æœºè¦å¦‚ä½•è¯†åˆ«ä¸€ä¸ªå­—èŠ‚å¯¹åº”ä¸€ä¸ªå­—ç¬¦è¿˜æ˜¯ä¸¤ä¸ªå­—èŠ‚å¯¹åº”ä¸€ä¸ªå­—ç¬¦å‘¢ï¼Ÿ â€‹ æˆ‘ä»¬çŸ¥é“ASCIIå®žé™…åªç”¨åˆ°äº†å­—èŠ‚çš„ä½Žä¸ƒä½ï¼Œå› æ­¤å­—èŠ‚çš„ç¬¬ä¸€ä½å§‹ç»ˆä¸º0ã€‚GB2312ä½¿ç”¨ç¬¬ä¸€ä½ä¸º1çš„ä¸¤ä¸ªè¿žç»­å­—èŠ‚è¡¨ç¤ºæ±‰å­—ï¼Œä½¿ç”¨ç¬¬ä¸€ä½ä¸º0çš„å•ä¸ªå­—èŠ‚è¡¨ç¤ºåŽŸæ¥ASCIIç¼–ç çš„å­—ç¬¦ï¼ˆç”±æ­¤å®žçŽ°äº†å¯¹ASCIIçš„å…¼å®¹ï¼‰ã€‚è¿™æ ·ï¼Œå½“è®¡ç®—æœºè¯»åˆ°é¦–ä½ä¸º1çš„å­—èŠ‚æ—¶ä¾¿å¯çŸ¥éœ€è¦å°†è¿žç»­ä¸¤ä¸ªå­—èŠ‚æ˜¾ç¤ºæˆä¸€ä¸ªå­—ç¬¦ï¼Œè¯»åˆ°é¦–ä½ä¸º0çš„å­—èŠ‚æ—¶ä¾¿ç›´æŽ¥å°†è¯¥å­—èŠ‚ç¿»è¯‘æˆä¸€ä¸ªå­—ç¬¦ã€‚ä¸‹é¢è¯¦è¿°æ±‰å­—è¡¨ç¤ºçš„éƒ¨åˆ†ã€‚ â€‹ GB2312ä½¿ç”¨é¦–ä½ä¸º1çš„ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªæ±‰å­—å­—ç¬¦(ä¸€ä¸ªæ±‰å­—æˆ–è€…ä¸€ä¸ªä¸­æ–‡æ ‡ç‚¹ç­‰)ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚ç§°ä¸ºé«˜ä½å­—èŠ‚ï¼ŒèŒƒå›´æ˜¯0xA1-0xF7ï¼ˆ87ç§çŠ¶æ€ï¼‰ï¼Œç”¨æ¥è¡¨ç¤ºåŒºç ï¼Œåˆ†åˆ«å¯¹åº”åŒºå·01-87ï¼›ç¬¬äºŒä¸ªå­—èŠ‚ä¸ºä½Žä½å­—èŠ‚ï¼ŒèŒƒå›´æ˜¯0xA1-0xFEï¼ˆ94ç§çŠ¶æ€ï¼‰ï¼Œç”¨æ¥è¡¨ç¤ºä½ç ï¼Œåˆ†åˆ«å¯¹åº”ä½å·01-94ã€‚è¿™ç§è¡¨ç¤ºæ–¹å¼ä¹Ÿè¢«ç§°ä¸ºâ€œåŒºä½ç â€ï¼Œå…¶å®žè¯´ç™½äº†å°±æ˜¯ç±»ä¼¼äºŽåæ ‡å®šä½çš„åŽŸç†ï¼Œä½ å¯ä»¥æƒ³è±¡è¿™äº›æ±‰å­—å­—ç¬¦éƒ½è¢«æ”¾åœ¨äº†ä¸€ä¸ªäºŒç»´å¹³é¢ä¸Šï¼ŒåŒºä½ç ç±»ä¼¼äºŽæ¨ªçºµåæ ‡ï¼Œä¾æ­¤å®žçŽ°ç¼–ç ä¸Žæ±‰å­—å­—ç¬¦çš„ä¸€ä¸€å¯¹åº”ã€‚ â€‹ å¯¹äºŽåŒºç å¯¹åº”çš„å­—ç¬¦æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š 01-09åŒºä¸ºç‰¹æ®Šç¬¦å· 10-15åŒºæ²¡æœ‰ç¼–ç  16-55åŒºä¸ºä¸€çº§æ±‰å­—ï¼ŒæŒ‰æ‹¼éŸ³æŽ’åºï¼Œå…±3755ä¸ª 56-87åŒºä¸ºäºŒçº§æ±‰å­—ï¼ŒæŒ‰éƒ¨é¦–ï¼ç¬”ç”»æŽ’åºï¼Œå…±3008ä¸ª 88-94åŒºæ²¡æœ‰ç¼–ç  ç”±äºŽç¼–ç è¡¨è¿‡å¤§(åœ°å€ä¸€ åœ°å€äºŒ)ï¼Œè¿™é‡Œåªæˆªå–ç¬¬17åŒºéƒ¨åˆ†ç¤ºä¾‹è®²è§£ã€‚ ç¬¬17åŒºå¯¹åº”äºŽåŒºç 0xA1+17=0xB1ï¼Œå› æ­¤å¦‚ä¸Šå›¾æ‰€ç¤ºè¯¥åŒºæ‰€æœ‰æ±‰å­—å­—ç¬¦çš„é«˜ä½å­—èŠ‚å‡ä¸º0xB1ã€‚è€Œä¸”ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œéšç€ä½ç çš„å¢žé•¿ï¼Œå…¶å¯¹åº”çš„æ±‰å­—å­—ç¬¦ä¹Ÿæ˜¯æŒ‰æ‹¼éŸ³é¡ºåºæŽ’åºçš„ã€‚å¦å¤–æä¸€å¥ï¼Œç”±äºŽä¸¤ä¸ªå­—èŠ‚å¯ä»¥è¡¨ç¤ºçš„çŠ¶æ€å¾ˆå¤šè€Œå®žé™…ä¸ŠGB2312åªæ”¶å½•äº†å…­åƒå¤šä¸ªå¸¸ç”¨çš„æ±‰å­—ã€‚äºŽæ˜¯ä»—ç€ç©ºé—´å¤§ï¼Œå°½ç®¡å·²ç»æ”¶å½•äº†ASCIIä¸­çš„å­—ç¬¦ï¼ŒGB2312åˆåšäº†ä¸€å¥—ç±»ä¼¼ASCIIä¸­çš„ä¸€äº›æ ‡ç‚¹ç¬¦å·æ”¶å½•è¿›æ¥ï¼Œä¹Ÿå°±å‡ºçŽ°äº†æˆ‘ä»¬ç»å¸¸é‡åˆ°çš„å…¨è§’åŠè§’æ ‡ç¬¦çš„åŒºåˆ«ã€‚ GBK &amp; GB18030 &amp; BIG5 ä¸­å›½æ±‰å­—æ€»æ•°å°†è¿‘åä¸‡ä¸ªï¼ŒGB2312ä¹Ÿä»…ä»…åªèƒ½è¡¨ç¤ºå¸¸ç”¨çš„æ±‰å­—ï¼Œä½†æ˜¯å¯¹äºŽç”Ÿåƒ»å­—ä»¥åŠç¹ä½“å­—ï¼Œåˆ™éœ€è¦GBKå¯¹GB2312è¿›è¡Œè¿›ä¸€æ­¥çš„æ‰©å±•ã€‚è¿˜æœ‰ï¼Œåˆ«å¿˜äº†ï¼Œäº”åå…­ä¸ªæ°‘æ—äº”åå…­æœµèŠ±ã€‚å’±ä»¬å°‘æ•°æ°‘æ—åŒèƒžçš„å„ç§è¯­è¨€ç‘°å®æ€Žèƒ½è’™å°˜ï¼ŒäºŽæ˜¯ä½ æ‡‚å¾—ï¼ŒGB18030ç»§ç»­æ‰©å±•ï¼ˆå†™åˆ°è¿™é‡Œï¼Œçªç„¶å¥½å¥‡åŽ»ç¿»äº†ä¸ªè—æ–‡ç½‘ç«™ï¼Œè™½ç„¶å¦‚åŒå¤©ä¹¦ä¸€èˆ¬ï¼Œä½†æ˜¯ä¹ŸèŽ«åæ„Ÿè§‰åˆ°äº†ä¸€è‚¡æµ“éƒçš„æ”¿åºœèŠ¬èŠ³ï¼‰ã€‚ â€‹ BIG5åˆç§°å¤§äº”ç ï¼Œå°æ¹¾åŒèƒžçš„ç¹ä½“ç¼–ç é›†ã€‚ã€‚ã€‚å®žåœ¨æ²¡ç²¾åŠ›ä¸€ä¸€ä»‹ç»äº†ï¼Œæ„Ÿå…´è¶£çš„ç«¥éž‹è‡ªè¡Œæœç´¢å§&gt;_&lt;ã€‚ Unicode ä»…ä»…ä¸ºäº†è§£å†³æ±‰å­—ç¼–ç é—®é¢˜å°±å·²ç»é™†ç»­å‡ºçŽ°äº†GB2312, BIG5ç­‰å¤šç§ä¸­æ–‡æ´¾ç³»çš„ç¼–ç æ–¹å¼ï¼Œä¸–ç•Œä¸Šæœ‰å¤šç§è¯­è¨€ï¼Œé’ˆå¯¹å„ç§è¯­è¨€é—¨æ´¾çš„ç¼–ç æ–¹å¼å±‚å‡ºä¸ç©·ï¼Œä¸”äº’ä¸å…¼å®¹ã€‚ä¸ºäº†è§£å†³è¿™ç§è¯¸ä¾¯çº·äº‰çš„å±€é¢ï¼ŒISOå†³å®šä¸€ç»Ÿæ±Ÿæ¹–ï¼ŒæŽ¨å‡ºUnicodeè¿™ç§å­—ç¬¦é›†ï¼Œå¸Œæœ›è¿™éƒ¨æ­¦æž—ç§˜ç±èƒ½å¤Ÿä¿ç½—æ‰€æœ‰è¯­è¨€å­—ç¬¦ã€‚ â€‹ ä¸‹é¢ è¿™å¼ å›¾ è¶³ä»¥è¯´æ˜ŽUnicodeçš„å‘å±•è¶‹åŠ¿å’Œæ™®åŠç¨‹åº¦ã€‚ â€‹Unicodeä¸ä»…ä»…æ˜¯ä¸€ä¸ªå­—ç¬¦é›†ï¼Œå®ƒè¿˜ä¸ºæ¯ä¸ªå­—ç¬¦é…ä¸Šäº†ä¸€ä¸ªå·ç ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªå·ç å¹¶ä¸æ˜¯å­—ç¬¦åœ¨è®¡ç®—æœºçš„å­—èŠ‚ä¸­å­˜å‚¨çš„å·ç ã€‚å¯ä»¥å°†å·ç çœ‹åšæ˜¯å¯¹æ•´ä¸ªå­—ç¬¦é›†è¿›è¡Œäº†ä¸€ä¸ªç¼–å·ï¼ˆ1å·å­—ç¬¦ï¼Œ2å·å­—ç¬¦ï¼Œetcï¼‰ï¼Œå°±å¥½æ¯”æ˜¯å­¦ç”Ÿéƒ½æœ‰å­¦å·ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚åœ¨Unicodeä¸­å°†è¿™ç§ç¼–å·å‘½åä¸ºç ç‚¹(code point)ã€‚è¿™ä½¿å¾—Unicodeå­—ç¬¦é›†ç§°ä¸ºä¸€ç§æ ‡å‡†ï¼Œä¸€æ—¦å…¬å¸ƒäº†Unicodeå­—ç¬¦é›†ä»¥åŠå¯¹åº”ç ç‚¹ï¼Œå¤§å®¶å°±å¯ä»¥è‡ªè¡Œè®¾è®¡ç¼–ç æ–¹å¼ï¼Œå°†å­—ç¬¦ç ç‚¹æŒ‰ç…§è‡ªå®šä¹‰çš„ç¼–ç è§„åˆ™æ˜ å°„ä¸ºç›¸åº”ç¼–ç å‚¨å­˜åˆ°å­—èŠ‚ä¸­ã€‚è¿™ä¹Ÿä¾§é¢éªŒè¯äº†å‰æ–‡è°ˆåˆ°çš„å­—ç¬¦é›†ä¸Žå­—ç¬¦ç¼–ç çš„åŒºåˆ«ï¼ŒUnicodeå­—ç¬¦é›†å°±å¯¹åº”äº†UTF-8, UTF-16ç­‰å¤šç§ç¼–ç æ–¹å¼ã€‚Unicodeçš„ç ç‚¹èŒƒå›´åœ¨U+0000~U+10FFFF(åå…­è¿›åˆ¶è¡¨ç¤ºæ•°å­—)ï¼Œå¤§è‡´å¯ä»¥ç®—å‡ºèŒƒå›´åœ¨111ä¸‡å·¦å³ã€‚ä¸ºäº†æ–¹ä¾¿åˆ†ç±»ç®¡ç†ï¼Œè¿™äº›ç ç‚¹åˆè¢«åˆ†ä¸ºå¤šä¸ªå¹³é¢ï¼ˆplaneï¼‰æ¥ç®¡ç†ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“BMP(Basic Multilingual Plane)è¿™ä¸ªå¹³é¢å³å¯ã€‚BMPåŒ…å«äº†U+0000~U+FFFFè¿™ä¸ªèŒƒå›´å†…çš„ç ç‚¹ï¼Œä¸–ç•Œäººæ°‘å¸¸ç”¨çš„å­—ç¬¦éƒ½è½åœ¨è¿™ä¸ªå¹³é¢å†…ã€‚BMPæ‰€åŒ…å«çš„æ‰€æœ‰å­—ç¬¦å‚è§ä¼ é€é—¨â˜žBMPã€‚ â€‹ è¿™é‡Œå†å¤šè¯´å‡ å¥ï¼Œä»¥å…æ··æ·†ç ç‚¹å’ŒçœŸæ­£å­˜å‚¨åœ¨è®¡ç®—æœºå­—èŠ‚ä¸­çš„ç¼–ç ã€‚æˆ‘ä»¬çŸ¥é“ç¼–ç è§„åˆ™çš„ä½œç”¨æ˜¯å°†å­—ç¬¦ç¿»è¯‘æˆæœºå™¨ä¸­çš„äºŒè¿›åˆ¶ç¼–ç ã€‚å…¶å®žä¹Ÿå°±æ˜¯å®žçŽ°å­—ç¬¦ä¸Žç¼–ç ä¸€ä¸€æ˜ å°„çš„è§„åˆ™ã€‚ç ç‚¹åªæ˜¯Unicodeå­—ç¬¦é›†é¢å¤–æä¾›çš„ä¸€ä¸ªå·¥å…·ï¼Œæ–¹ä¾¿ç¼–ç è§„åˆ™æ¥å®žçŽ°è¿™ç§æ˜ å°„ã€‚è¯•æƒ³å¦‚æžœç¼–ç è§„åˆ™å®žçŽ°äº†å­¦å·ä¸Žç¼–ç çš„ä¸€ä¸€æ˜ å°„ï¼Œé‚£ä¹ˆå…¶å®žä¹Ÿå°±å®žçŽ°äº†å­¦ç”Ÿä¸Žç¼–ç çš„ç¿»è¯‘è¿‡ç¨‹ã€‚å¯¹äºŽç ç‚¹ä¹Ÿæ˜¯åŒæ ·çš„ï¼Œåªè¦å®žçŽ°äº†ç ç‚¹ä¸Žç¼–ç çš„æ˜ å°„ï¼ˆè¿™ä¸ªæ˜ å°„ç”±ç¼–ç è§„åˆ™å®žçŽ°ï¼Œå¦‚UTF-8ï¼‰ï¼Œä¹Ÿå°±å®žçŽ°äº†å­—ç¬¦ä¸Žç¼–ç çš„ç¿»è¯‘ã€‚é‚£ä¹ˆç ç‚¹å’Œç¼–ç çš„æ•°å€¼å¤§å°æ˜¯ä¸€æ ·çš„å—ï¼Ÿè¿™ä¸ªå°±å¾—ç”±ç¼–ç è§„åˆ™æ¥å®šäº†ã€‚ â€‹ Unicodeçš„æœ€å¤§ç ç‚¹0x10FFFFï¼Œè‡³å°‘éœ€è¦ä¸‰ä¸ªå­—èŠ‚æ¥ä¿å­˜ã€‚å¦‚æžœè¦è®¾è®¡ä¸€ç§ç¼–ç æ–¹å¼æ¥ä¿å­˜ç ç‚¹ï¼Œä½ ä¼šæ€Žä¹ˆåšï¼Ÿæœ€ç®€å•çš„åšæ³•å°±æ˜¯ç›´æŽ¥å°†ç ç‚¹å½“åšç¼–ç æ¥ç”¨ï¼Œç”¨ä¸‰ä¸ªå­—èŠ‚æ¥ä¿å­˜ä¸€ä¸ªå­—ç¬¦ç¼–ç ã€‚å½“ç„¶è¿™æ˜¯ä¸€ç§å¯è¡Œçš„æ–¹æ¡ˆï¼Œå®žé™…ä¸ŠUTF-32å°±æ˜¯é‡‡ç”¨çš„ç±»ä¼¼æ€æƒ³ï¼Œä¸è¿‡å®ƒæ˜¯ç”¨å››ä¸ªå­—èŠ‚æ¥ä¿å­˜ä¸€ä¸ªå­—ç¬¦ã€‚ç„¶è€Œè¿™ç§æ–¹å¼æœ‰æ˜Žæ˜¾çš„ç¼ºç‚¹ï¼Œå¯¹äºŽè¾ƒå°çš„ç ç‚¹(æ¯”å¦‚U+0001,U+0002ç­‰)ï¼Œæ ¹æœ¬ä¸éœ€è¦é‚£ä¹ˆå¤šå­—èŠ‚æ¥ä¿å­˜ã€‚è€Œä¸”éšç€ç½‘ç»œçš„å‘å±•ï¼Œå¾ˆå¤šæ–‡ä»¶éœ€è¦é€šè¿‡ç½‘ç»œä¼ è¾“ï¼Œè¿™ç§ä½Žæ•ˆçš„ç¼–ç æ–¹å¼ä½¿å¾—æ–‡ä»¶å¤§å°è¿‡å¤§ï¼Œä¸åˆ©äºŽç½‘ç»œä¼ è¾“ã€‚ â€‹ äºŽæ˜¯ä¸€ç§æ–°çš„ç¼–ç æ€æƒ³äº§ç”Ÿçš„â€”â€”å˜é•¿ç¼–ç ã€‚æˆ‘ä»¬ä¹‹å‰è°ˆåˆ°çš„ç¼–ç æ–¹å¼å¤§å¤šé‡‡ç”¨å®šé•¿ç¼–ç ï¼Œå³ä½¿ç”¨å›ºå®šçš„å­—èŠ‚æ•°ç›®æ¥è¡¨ç¤ºæ¯ä¸€ä¸ªå­—ç¬¦ã€‚å®žé™…ä¸Šæˆ‘ä»¬å¯ä»¥å°†å®šé•¿ä¸Žå˜é•¿ç¼–ç å½“åšæœ—è¯»è¯¾æ–‡æ—¶çš„ä¸€ç§æ–­å¥æ–¹å¼ã€‚ç”±äºŽæ–‡ä»¶æ˜¯ä»¥äºŒè¿›åˆ¶ä¿å­˜çš„ï¼Œè®¡ç®—æœºå¦‚ä½•çŸ¥é“å¤šå°‘ä½è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Ÿå¯¹äºŽå®šé•¿ç¼–ç å¾ˆç®€å•ï¼Œè®¡ç®—æœºåªç”¨æŒ‰ç…§å›ºå®šçš„å­—èŠ‚ç¿»è¯‘æˆä¸€ä¸ªå­—ç¬¦ï¼ˆç±»æ¯”æœ—è¯»æ—¶ä¸¤ä¸ªå­—å½“åšä¸€ä¸ªè¯æ¥æ–­å¥ï¼Œâ€œæˆ‘ä»¬/å¤§å®¶/åŠªåŠ›/å­¦ä¹ /ç¼–ç /çŸ¥è¯†â€ï¼‰ï¼›å¯¹äºŽå˜é•¿ç¼–ç ï¼Œæœ‰æ—¶ä¸€ä¸ªå­—èŠ‚ç¿»è¯‘æˆä¸€ä¸ªå­—ç¬¦ï¼Œæœ‰æ—¶ä¸¤ä¸‰ä¸ªå­—èŠ‚ç¿»è¯‘æˆä¸€ä¸ªå­—ç¬¦ï¼ˆç±»æ¯”ä¸¤ä¸ªå­—æˆ–å››ä¸ªå­—å½“åšä¸€ä¸ªè¯æ–­å¥ï¼Œâ€œæˆ‘ä»¬/å¤§å®¶/åŠªåŠ›å­¦ä¹ /ç¼–ç çŸ¥è¯†â€ï¼‰ã€‚å®žé™…ä¸Šä¹‹å‰æåˆ°çš„GB2312å°±æ˜¯ä¸€ç§å˜é•¿ç¼–ç ï¼Œå®ƒé‡‡ç”¨å•å­—èŠ‚å­˜å‚¨ASCIIå­—ç¬¦é›†ï¼Œé‡‡ç”¨åŒå­—èŠ‚å­˜å‚¨ä¸­æ–‡å­—ç¬¦é›†éƒ¨åˆ†ã€‚å®šé•¿ç¼–ç æœ‰å…¶ä¼˜åŠ¿â€”â€”è§„åˆ™ç®€å•ä¸”æ–¹ä¾¿è®¡ç®—æœºâ€œæ–­å¥â€ï¼Œä½†æ˜¯å¯¹äºŽè§„æ¨¡è¾ƒå¤§çš„å­—ç¬¦é›†ï¼ˆæ¯”å¦‚ç™¾ä¸‡çº§åˆ«çš„Unicodeï¼‰,è¿™ç§ç¼–ç æ–¹å¼æžå®¹æ˜“é€ æˆç©ºé—´æµªè´¹ã€‚UTF-8ä»¥åŠUTF-16è¿™äº›å˜é•¿ç¼–ç è§„åˆ™çš„å‡ºçŽ°è¾ƒå¥½åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒä»¬é‡‡ç”¨è¾ƒå°‘çš„å­—èŠ‚æ¥ä¿å­˜æ•°å€¼è¾ƒå°çš„ç ç‚¹ï¼Œä½¿ç”¨è¾ƒå¤šå­—èŠ‚æ¥ä¿å­˜æ•°å€¼è¾ƒå¤§çš„ç ç‚¹ã€‚ UTFç³»åˆ—ï¼ˆUTF-8, UTF-16, etcï¼‰ UTF(Unicode Transformation Format), Unicodeå­—ç¬¦é›†çš„ç¼–ç æ–¹å¼ï¼Œä¸»è¦æœ‰UTF-8ï¼ŒUTF-16ï¼ŒUTF-32ç­‰ã€‚ç”±äºŽUTF-32é‡‡ç”¨å®šé•¿å››å­—èŠ‚ç¼–ç ï¼Œè¿™é‡Œä¸å¤šè¯´ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»UTF-8ï¼Œé™„å¸¦ä»‹ç»UTF-16ã€‚ UTF-8 UTF-8æ˜¯å˜é•¿ç¼–ç ï¼Œä½¿ç”¨1~4ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä¸‹å›¾å¤§è‡´å‘ˆçŽ°äº†UTF-8å¯¹Unicodeç ç‚¹çš„å˜é•¿è½¬æ¢åŽŸç†ã€‚ å•å­—èŠ‚è¡¨ç¤ºå¯¹åº”Unicodeç ç‚¹0x0000-0x007Fçš„å­—ç¬¦ï¼Œä¸”æ­¤æ—¶é¦–ä½ä¸º0ï¼Œæœ‰æ•ˆä½7ä½ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è¡¨ç¤º27=128ç§å­—ç¬¦ï¼Œè¿™éƒ¨åˆ†å…¶å®žåˆšå¥½å…¼å®¹äº†ASCIIç¼–ç è§„åˆ™ï¼Œè€ŒUnicode0x0000-0x007Fçš„å­—ç¬¦ä¹Ÿå°±æ˜¯ASCIIå­—ç¬¦ã€‚ åŒå­—èŠ‚è¡¨ç¤ºå¯¹åº”Unicodeç ç‚¹0x0080-0x07FFçš„å­—ç¬¦ï¼Œä¸”æ­¤æ—¶ç¬¬ä¸€ä¸ªå­—èŠ‚ä»¥110å¼€å¤´ï¼ŒåŽé¢çš„å­—èŠ‚ä»¥10å¼€å¤´ï¼Œæœ‰æ•ˆ ä½æ•°ä¸º11ä½ï¼Œå¯ä»¥è¡¨ç¤º2048ç§å­—ç¬¦ã€‚å…¶å®žç”±ä¸Šå›¾å¯ä»¥çœ‹åˆ°UTF-8å˜é•¿ç¼–ç çš„è§„å¾‹ï¼Œä¸ºäº†è®©è®¡ç®—æœºçŸ¥é“ä»¥å‡ ä¸ªå­—èŠ‚æ¥æ–­å¥ï¼ˆå³ç¿»è¯‘ä¸ºä¸€ä¸ªå­—ç¬¦ï¼‰ï¼Œåœ¨é¦–å­—èŠ‚çš„å‰å‡ ä½å°±æœ‰å‡ ä¸ª1ï¼Œä¾‹å¦‚å¦‚æžœæ˜¯åŒå­—èŠ‚æ–­å¥ï¼Œåˆ™é¦–å­—èŠ‚å¼€å¤´ä»¥110ï¼Œå¦‚æžœæ˜¯ä¸‰å­—èŠ‚æ–­å¥ï¼Œåˆ™é¦–å­—èŠ‚ä»¥1110å¼€å¤´ã€‚ç„¶è€Œå•å­—èŠ‚æ–­å¥ä¸ºä»€ä¹ˆç”¨0å¼€å¤´è€Œä¸ç”¨1æˆ–è€…10å¼€å¤´å‘¢ï¼Ÿå…¶å®žåŽŸå› å‰æ–‡å·²ç»æ¶‰åŠäº†ï¼Œå°±æ˜¯ä¸ºäº†å…¼å®¹ASCIIç¼–ç ã€‚è¿™é‡Œè¿˜æœ‰å‡ ä¸ªé—®é¢˜å¤§å®¶å¯ä»¥æ€è€ƒä¸€ä¸‹ï¼šå½“å¤šå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µæ—¶ï¼Œæ—¢ç„¶é¦–å­—èŠ‚å·²ç»æ ‡è®°äº†å¦‚ä½•æ–­å¥ï¼Œä¸ºä»€ä¹ˆåŽé¢çš„å­—èŠ‚ä¹Ÿè¦æŒ‡å®š10å¼€å¤´ï¼Ÿå¦‚æžœé¦–å­—èŠ‚åŽé¢çš„å­—èŠ‚ä¸æŒ‡å®šç”¨10å¼€å¤´å²‚ä¸æ˜¯å¯ä»¥å¢žåŠ ä¸¤ä¸ªæœ‰æ•ˆä½ï¼Œå¢žåŠ ç¼–ç ç©ºé—´è¿›è€Œæé«˜æ•ˆçŽ‡ï¼Ÿè¿™äº›é—®é¢˜æ¶‰åŠåˆ°å˜é•¿ç¼–ç çš„ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œå°†åœ¨åŽæ–‡å®šé•¿ç¼–ç ä¸Žå˜é•¿ç¼–ç éƒ¨åˆ†è¯¦ç»†è§£ç­”ã€‚ ä¸‰å­—èŠ‚è¡¨ç¤ºå¯¹åº”Unicodeç ç‚¹0x0800-0xFFFFçš„å­—ç¬¦ï¼Œæœ‰æ•ˆä½ä¸º16ä½ï¼Œå¯ä»¥å®¹çº³65536ç§å­—ç¬¦ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„ä¸­æ–‡å­—ç¬¦ä¹Ÿéƒ½è½åœ¨ä¸‰å­—èŠ‚éƒ¨åˆ†ã€‚å› æ­¤UTF-8æ˜¯ä»¥ä¸‰ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå¸¸ç”¨æ±‰å­—å­—ç¬¦çš„ï¼Œå½“ç„¶å®žé™…ä¸Šæ±‰å­—æœ‰å°†è¿‘åä¸‡ä¸ªï¼Œ65536æ— æ³•å®¹çº³å¦‚æ­¤åºžå¤§çš„æ±‰å­—ä½“ç³»ï¼Œå› æ­¤æœ‰äº›å†·é—¨æ±‰å­—åªèƒ½ç”¨å››å­—èŠ‚è¡¨ç¤ºäº†ã€‚æˆ‘ä»¬çŸ¥é“Unicodeå°†äººä»¬å¸¸ç”¨çš„å­—ç¬¦éƒ½æ”¾åœ¨BMPå¹³é¢ï¼ˆU+0000-U+FFFFï¼‰ï¼Œè€Œè‡³æ­¤ï¼ŒUTF-8å·²ç»ç”¨1-3ä¸ªå­—èŠ‚è¡¨ç¤ºäº†BMPå¹³é¢çš„å…¨éƒ¨å†…å®¹ã€‚ ä»¥æ±‰å­—â€œä¸€â€ä¸ºä¾‹è®²è§£UTF-8å¦‚ä½•å¯¹Unicodeç ç‚¹è¿›è¡Œç¼–ç ã€‚æ±‰å­—â€œä¸€â€çš„Unicodeç ç‚¹æ˜¯U+4E00ï¼Œåœ¨èŒƒå›´0x0800-0xFFFFä¸­ï¼Œå› æ­¤é‡‡ç”¨1110XXX_10XXXXXX_10XXXXXXæ¨¡æ¿ï¼Œæœ‰æ•ˆä½ä¸º16ä½ï¼Œ0x4E00æ¢åšäºŒè¿›åˆ¶è¡¨ç¤ºä¸º0b0100_1110_0000_0000ï¼Œå°†è¿™åå…­ä½äºŒè¿›åˆ¶æ•°ä¾æ¬¡å¡«å…¥æ¨¡æ¿ä¸­ç¼ºå¤±çš„Xå³å¯ã€‚äºŽæ˜¯æˆ‘ä»¬å¾—åˆ°æ±‰å­—â€œä¸€â€çš„UTF-8ç¼–ç ä¸º0b11100100_10111000_10000000ï¼Œå³0xE4B880ã€‚æƒ³è¦éªŒè¯æ›´å¤šå¯ä»¥ç§»æ­¥ â˜ž ä¼ é€é—¨ å¦‚æžœçœ‹åˆ°ä¸€ä¸²çš„16è¿›åˆ¶ç æœ‰å¦‚ä¸‹çš„å½¢å¼ï¼šEX XX XX EX XX XXâ€¦æ¯ä¸ªä¸‰å­—èŠ‚ç»„å‰é¢éƒ½æ˜¯Eæ‰“å¤´ï¼Œé‚£ä¹ˆå®ƒå¾ˆå¯èƒ½å°±æ˜¯ä¸€ä¸²æ±‰å­—çš„UTF-8ç¼–ç äº†ã€‚ UTF-16 UTF-16æ˜¯ä»¥äºŒå­—èŠ‚æˆ–å››å­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦çš„å˜é•¿ç¼–ç ã€‚Unicodeåœ¨BMPå¹³é¢çš„å­—ç¬¦ï¼ˆU+0000~U+FFFFï¼‰ç”¨äºŒå­—èŠ‚æ¥ç¼–ç ï¼Œå…¶ä½™å­—ç¬¦ç”¨å››å­—èŠ‚æ¥ç¼–ç ã€‚å¯¹äºŽäºŒå­—èŠ‚ç¼–ç éƒ¨åˆ†ç›´æŽ¥ç”¨ç ç‚¹å€¼æ¥ç¼–ç ï¼Œå››å­—èŠ‚ç¼–ç éƒ¨åˆ†çš„è½¬æ¢è§„åˆ™è¿™é‡Œä¸å†è¯¦è¿°ã€‚æˆ‘ä»¬åªéœ€è®°ä½å¸¸ç”¨çš„ä¸­è‹±æ–‡å­—ç¬¦åœ¨UTF-16ä¸­ä½¿ç”¨äºŒå­—èŠ‚è¡¨ç¤ºå³å¯ã€‚å…·ä½“ç¼–ç è§„åˆ™ä»¥åŽæœ‰ç©ºå†åŠ è¿›æ¥å§ã€‚ ç®€å•æ€»ç»“ä¸‹ï¼š UTF-8ä¸­ï¼Œè‹±æ–‡å­—ç¬¦æ˜¯ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œå¸¸ç”¨ä¸­æ–‡å­—ç¬¦ä½¿ç”¨ä¸‰ä¸ªå­—èŠ‚è¡¨ç¤ºï¼ŒæŸäº›ä¸­æ–‡å­—ç¬¦å¯èƒ½é‡‡ç”¨å››å­—èŠ‚è¡¨ç¤ºã€‚ UTF-16ä¸­ï¼Œè‹±æ–‡å­—ç¬¦æ˜¯äºŒå­—èŠ‚è¡¨ç¤ºï¼Œå¸¸ç”¨ä¸­æ–‡å­—ç¬¦ä½¿ç”¨äºŒå­—èŠ‚è¡¨ç¤ºï¼ŒæŸäº›ä¸­æ–‡å­—ç¬¦å¯èƒ½é‡‡ç”¨å››å­—èŠ‚è¡¨ç¤ºã€‚ å¤§è‡´äº†è§£äº†UTFç³»åˆ—çš„ç¼–ç è§„åˆ™ä¹‹åŽï¼Œå¯èƒ½è¿˜ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼šUTF-8ï¼ŒUTF-16ï¼ŒUTF-32è¿™äº›åå­—ä¸­æ•°å­—çš„ç”±æ¥ã€‚å…¶å®ž8ï¼Œ16ï¼Œ32æŒ‡çš„æ˜¯UTFç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦æœ€å°‘éœ€è¦ç”¨çš„ä½æ•°ï¼Œè¿™ä¸ªä½æ•°åˆè¢«ç§°ä¸ºæ˜¯ä»£ç å•å…ƒ(Code Unit)ã€‚UTF-8ä½¿ç”¨1~4ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå­—ç¬¦ï¼Œæœ€å°‘éœ€è¦ç”¨8ä½æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä»£ç å•å…ƒä¸ºä¸€ä¸ªå­—èŠ‚ï¼›UTF-16ä½¿ç”¨2æˆ–è€…4ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå­—ç¬¦ï¼Œæœ€å°‘éœ€è¦16ä½æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä»£ç å•å…ƒä¸ºä¸¤ä¸ªå­—èŠ‚ï¼›UTF-32ä½¿ç”¨4ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå­—ç¬¦ï¼Œç”±äºŽæ˜¯å®šé•¿ç¼–ç ï¼Œä¸€å®šéœ€è¦32ä½æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä»£ç å•å…ƒä¸ºå››ä¸ªå­—èŠ‚ã€‚ BOM è®²åˆ°BOMä¹‹å‰ï¼Œéœ€è¦å¤§ç«¯Big Endianå’Œå°ç«¯Little Endiançš„ç›¸å…³çŸ¥è¯†, è¿™é‡Œåªæ˜¯ç®€å•æä¸€ä¸‹å¤§å°ç«¯çš„é—®é¢˜ï¼Œå…·ä½“ç»†èŠ‚è¯·å…ˆè‡ªè¡Œgoogleã€‚ åªæœ‰æ¶‰åŠåˆ°å¤šäºŽä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ç»“æž„ä¿å­˜å’Œä¼ è¾“æ—¶æ‰ä¼šäº§ç”Ÿå¤§å°ç«¯çš„é—®é¢˜ã€‚Big EndIanæ™®éç”¨äºŽç½‘ç»œä¼ è¾“ï¼Œåˆè¢«ç§°ä¸ºNetwork Byte Orderï¼›Little Endiané€šå¸¸ç”¨äºŽå¾®å¤„ç†å™¨ï¼Œéƒ¨åˆ†å—åˆ°Intelå¤„ç†å™¨è®¾è®¡çš„å½±å“ã€‚äºŒè€…çš„åŒºåˆ«ç®€å•æ¥è¯´å°±æ˜¯ï¼ŒBig EndIanä¼˜å…ˆä¿å­˜é«˜ä½å­—èŠ‚ï¼Œæœ€ç»ˆè¡¨çŽ°ä¸ºä½Žå€å­˜å‚¨é«˜ä½å­—èŠ‚ï¼Œé«˜å€å­˜å‚¨ä½Žä½å­—èŠ‚ï¼› Little Endianä¼˜å…ˆä¿å­˜ä½Žä½å­—èŠ‚ï¼Œ æœ€ç»ˆè¡¨çŽ°ä¸ºä½Žå€å­˜å‚¨ä½Žä½å­—èŠ‚ï¼Œé«˜å€å­˜å‚¨é«˜ä½å­—èŠ‚ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå›¾ç‰‡æ¥è‡ªWikipediaï¼‰ï¼š éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ç®¡å¤§ç«¯è¿˜æ˜¯å°ç«¯ï¼Œå•ä¸ªå­—èŠ‚å†…éƒ¨çš„å­˜å‚¨é¡ºåºæ˜¯ä¸€è‡´çš„ï¼Œå› ä¸ºå­—èŠ‚æ˜¯è®¡ç®—æœºæ•°æ®å¤„ç†çš„æœ€å°å¯å¯»å€å•ä½æ˜¯å­—èŠ‚ï¼Œå› æ­¤å­—èŠ‚å†…éƒ¨ä¹Ÿå°±ä¸å­˜åœ¨é«˜å€ä½Žå€çš„æ¦‚å¿µï¼Œæ•…è€Œæ›´ä¸ä¼šæœ‰å¤§å°ç«¯çš„æ¦‚å¿µäº†ã€‚ BOM, Byte Order Mark, å­—èŠ‚åºæ ‡å¿—ã€‚ åˆšæ‰ä¹Ÿæåˆ°è¿‡ï¼Œåªæœ‰å¯¹äºŽå¤šäºŽä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ç»“æž„æ‰å­˜åœ¨å­—èŠ‚åºï¼ˆByte Orderï¼‰è¿™ä¸ªæ¦‚å¿µï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å‘å­—ç¬¦ç¼–ç ä¸­ç±»æŽ¨ï¼š UTF-8é‡‡ç”¨å•ä¸ªå­—èŠ‚ä½œä¸ºä»£ç å•å…ƒï¼Œå› æ­¤æ²¡æœ‰å¹¶ä¸ä¼šæ¶‰åŠå­—èŠ‚åºï¼Œè€ŒUTF-16ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚ä½œä¸ºä¸€ä¸ªä»£ç å•å…ƒï¼Œå› æ­¤åœ¨ä»£ç å•å…ƒçš„ä¿å­˜ä¸Šç”¨åˆ°äº†BOMï¼ˆåŒç†ï¼ŒUTF - 32ä¹Ÿä¼šç”¨åˆ°BOMï¼‰ã€‚ UTF - 16 Big EndIan BOMï¼š FE FF UTF - 16 Little EndIan BOMï¼š FF FE å®žé™…ä¸ŠUTF-8æ—©æœŸä¹Ÿæ˜¯æœ‰BOMçš„ï¼Œå…¶å€¼ä¸ºEF BB BFï¼Œä½†æ˜¯é€šè¿‡ä¹‹å‰çš„åˆ†æžä¹Ÿå¯ä»¥çŸ¥é“è¿™ä¸ªBOMæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚æ›´å¤šçš„æ—¶å€™å®ƒå¹¶æ²¡æœ‰èµ·åˆ°å­—èŠ‚åºæ ‡å¿—çš„ä½œç”¨ï¼Œè€Œæ˜¯ç”¨ä½œæ ‡å¿—æ­¤æ–‡ä»¶æ˜¯UTF - 8ç¼–ç ï¼Œç±»ä¼¼äºŽé­”æ•°ï¼ˆMagic Numberï¼‰çš„ä½œç”¨ã€‚ Javaä¸­é»˜è®¤ä½¿ç”¨Big EndIanï¼Œä¸‹é¢è¿™æ®µä»£ç ç®€å•æ¼”ç¤ºäº†â€œæ‹œæ‹œbyeâ€å­—ç¬¦ä¸²åˆ†åˆ«ä½¿ç”¨UTF-16å¤§å°ç«¯ç¼–ç æ—¶çš„æ•°æ®ï¼š 123456789101112public class Demo &#123; public static void main(String[] args) &#123; String sample = "æ‹œæ‹œbye"; try &#123; //Java UTF-16é»˜è®¤ä½¿ç”¨å¤§ç«¯ System.out.println(printHexBinary(sample.getBytes("UTF-16"))); System.out.println(printHexBinary(sample.getBytes("UTF-16LE"))); &#125; catch (UnsupportedEncodingException e) &#123; e.printStackTrace(); &#125; &#125;&#125; è¾“å‡ºçš„ç»“æžœå¦‚ä¸‹ï¼š 12FEFF62DC62DC006200790065DC62DC62620079006500 åœ¨è¿™é‡Œæˆ‘ä»¬ä¸ä»…çœ‹åˆ°äº†å¤§ç«¯æ—¶çš„BOMæ˜¯FEFFï¼Œå¹¶ä¸”è¿˜å¯ä»¥å›žå¿†éªŒè¯ä¸€ä¸‹UTF-16çš„ç¼–ç è§„åˆ™ï¼šæ‰€æœ‰è‹±æ–‡å’Œå¤§éƒ¨åˆ†æ±‰å­—ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå› æ­¤è¿™é‡Œé‡‡ç”¨åä¸ªå­—èŠ‚æ¥ç¼–ç sampleå­—ç¬¦ä¸²ã€‚æ¯ä¸ªä»£ç å•å…ƒä¸¤ä¸ªå­—èŠ‚ï¼Œå­—èŠ‚é¡ºåºå¤§å°ç«¯åˆšå¥½é¢ å€’ã€‚ å®šé•¿ç¼–ç ä¸Žå˜é•¿ç¼–ç  å‰æ–‡UTF-8éƒ¨åˆ†æå‡ºäº†çš„å‡ ä¸ªé—®é¢˜ï¼šå½“å¤šå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µæ—¶ï¼Œæ—¢ç„¶é¦–å­—èŠ‚å·²ç»æ ‡è®°äº†å¦‚ä½•æ–­å¥ï¼Œä¸ºä»€ä¹ˆåŽé¢çš„å­—èŠ‚ä¹Ÿè¦æŒ‡å®š10å¼€å¤´ï¼Ÿå¦‚æžœé¦–å­—èŠ‚åŽé¢çš„å­—èŠ‚ä¸æŒ‡å®šç”¨10å¼€å¤´å²‚ä¸æ˜¯å¯ä»¥å¢žåŠ ä¸¤ä¸ªæœ‰æ•ˆä½ï¼Œå¢žåŠ ç¼–ç ç©ºé—´ä½¿å¾—ç›¸åŒçš„å­—èŠ‚é•¿åº¦å¯ä»¥è¡¨ç¤ºæ›´å¤šçš„å­—ç¬¦ï¼Ÿ â€‹ é¦–å­—èŠ‚ä¸­110ï¼Œ1110ï¼Œ11110è¿™äº›æ ‡è®°ç¡®å®žå·²ç»å‘Šè¯‰è®¡ç®—æœºè¯¥å¦‚ä½•â€œæ–­å¥â€ï¼Œä½†æ˜¯é™¤äº†æ–­å¥ä»¥å¤–ï¼Œè®¡ç®—æœºè¿˜éœ€è¦å®Œæˆæˆ‘ä»¬çš„å¦ä¸€é¡¹éœ€æ±‚ï¼šå­—ç¬¦æœç´¢ã€‚å­—ç¬¦æœç´¢å®žé™…ä¸Šå°±æ˜¯è¿›è¡Œæ¯”ç‰¹ä¸²åŒ¹é…ã€‚å‡å¦‚UTF-8é¦–å­—èŠ‚åŽé¢çš„å­—èŠ‚ä¸æŒ‡å®šç”¨10å¼€å¤´å¾ˆå¯èƒ½å‡ºçŽ°ä¸‹é¢è¿™ç§æƒ…å†µï¼š â€‹ æˆ‘ä»¬æƒ³è¦æœç´¢&quot;a&quot;ï¼Œå…¶UTF-8ç¼–ç ä¸º0x61(0b01100001)ã€‚å½“æˆ‘ä»¬æœç´¢â€œaâ€æ—¶ï¼Œè®¡ç®—æœºä¼šè‡ªåŠ¨æœç´¢åŒ¹é…01100001å­—ç¬¦ä¸²ï¼Œå½“ç„¶â€œaâ€ä¼šè¢«æœç´¢åŒ¹é…å‡ºæ¥ï¼Œä½†æ˜¯110XXXXX_01100001ï¼Œ1110XXXX_01100001_XXXXXXXXè¿™äº›äºŒä¸‰å­—èŠ‚è¡¨ç¤ºçš„å­—ç¬¦ä¹Ÿä¼šè¢«é”™è¯¯åŒ¹é…ä¸ºâ€œaâ€ã€‚å› æ­¤åœ¨å˜é•¿ç¼–ç è®¾è®¡ä¹‹åˆå°±éœ€è¦è€ƒè™‘åˆ°æœç´¢åŒ¹é…çš„é—®é¢˜ï¼Œå¤šå­—èŠ‚æ¨¡å¼ä¸å¯ä»¥ä¸Žå•å­—èŠ‚æ¨¡å¼æˆ–è€…è¾ƒå°‘å­—èŠ‚æ¨¡å¼çš„æ¯”ç‰¹ä¸²å‘ç”Ÿå­—èŠ‚é‡å ã€‚å¯¹äºŽUTF-8ä¸­é¦–å­—èŠ‚ä¹‹åŽçš„å­—èŠ‚çš„å¼€å§‹ä¸¤ä½â€œ10â€å°±æ˜¯èµ·è¿™ä¸ªä½œç”¨ï¼ˆè¯¦è§ä¸‹å›¾ï¼‰ã€‚ç»†å¿ƒçš„ç«¥éž‹å¯èƒ½ç•™æ„åˆ°GB2312åœ¨ç”¨äºŒå­—èŠ‚è¡¨ç¤ºä¸­æ–‡å­—ç¬¦æ—¶ä¹Ÿè§„å®šä¸¤ä¸ªå­—èŠ‚çš„é¦–ä½éƒ½å¿…é¡»ä¸º1ï¼Œå…¶ä¸­ç¬¬äºŒä¸ªå­—èŠ‚é¦–ä½å¿…é¡»ä¸º1çš„è§„å®šä¹Ÿæ˜¯ä¸ºäº†é¿å…å’ŒASCIIç¼–ç æ¯”ç‰¹ä¸²ï¼ˆGB2312ç”¨ä¸€å­—èŠ‚è¡¨ç¤ºè‹±æ–‡å­—ç¬¦çš„æ–¹å¼å’ŒASCIIå…¼å®¹ï¼‰é‡å ã€‚ ä¹±ç åŽŸå›  ç¼–ç æ–¹å¼ä¸å…¼å®¹ä¼šå¯¼è‡´ä¹±ç ã€‚å…·ä½“æ˜¯æ€Žä¹ˆä¸€å›žäº‹å‘¢ï¼Ÿå½“ä½ æƒ³æ‰“å¼€ä¸€ä¸ªä¿å­˜æœ‰æ–‡å­—çš„æ–‡ä»¶æ—¶ï¼Œé¦–å…ˆè¿™ä¸ªæ–‡ä»¶è‚¯å®šæ˜¯äº‹å…ˆç»è¿‡å­—ç¬¦è¾“å…¥çš„ï¼Œé‚£ä¹ˆåœ¨è¾“å…¥å­—ç¬¦çš„è¿‡ç¨‹ä¸­å¿…é¡»é‡‡ç”¨ä¸€ç§ç¼–ç æ–¹å¼Aæ¥å°†å­—ç¬¦è½¬åŒ–ä¸ºå­—èŠ‚ä¿å­˜åœ¨å­˜è´®è½½ä½“ä¸Šã€‚ç„¶è€Œä½ é€šè¿‡æŸç§æ¸ é“ï¼ˆç½‘ç»œä¼ è¾“ï¼Œæ‹·è´ç­‰ï¼‰èŽ·å¾—äº†è¿™ä»½æ–‡ä»¶ï¼Œè®¡ç®—æœºæ‰“å¼€è¿™ä¸ªæ–‡ä»¶æ—¶å¿…é¡»é€‰æ‹©ä¸€ç§ç¼–ç æ–¹å¼Bæ¥å°†å­—èŠ‚ç¿»è¯‘æˆå­—ç¬¦ä»¥ä¾›é˜…è¯»ã€‚å¦‚æžœç¼–ç æ–¹å¼Bå’Œç¼–ç æ–¹å¼Aæ˜¯åŒä¸€ç§ç¼–ç æ–¹å¼ï¼Œæˆ–è€…ç¼–ç æ–¹å¼Bå¯ä»¥å…¼å®¹ç¼–ç æ–¹å¼Aï¼Œæˆ‘ä»¬å°±å¯ä»¥é¡ºåˆ©åœ°æŸ¥çœ‹æ–‡ä»¶ä¸­ä¿å­˜çš„æ–‡å­—ï¼Œå¦åˆ™å°±æ˜¾ç¤ºä¹±ç ã€‚ ä½ å¯èƒ½ç¢°åˆ°è¿‡è¿™æ ·çš„äº‹ï¼ŒæŠŠä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä»ŽWindowså¹³å°ä¸Šä¼ åˆ°Linuxå¹³å°ï¼Œå¹¶åœ¨Linuxå¹³å°ä¸‹æ‰“å¼€æ—¶å‘çŽ°ä¹±ç äº†ï¼Œä½†è¿™ä¸æ„å‘³ç€æ–‡ä»¶å†…å®¹æœ‰äº†ä»€ä¹ˆå˜åŒ–ï¼Œé€šå¸¸çš„åŽŸå› æ˜¯ä½ çš„æ–‡ä»¶æ˜¯ç”¨GBKç¼–ç çš„ï¼Œä½†Linuxå¹³å°ä¸‹æ‰“å¼€æ—¶å®ƒç¼ºçœå¯èƒ½ç”¨çš„æ˜¯UTF-8ç¼–ç åŽ»è¯»å–ï¼Œå› æ­¤ï¼Œä½ åªè¦è°ƒæ•´æˆæ­£ç¡®çš„ç¼–ç åŽ»è¯»å–å³å¯ã€‚ å¯¹äºŽWebç³»ç»Ÿçš„æƒ…å†µï¼Œå¦‚æžœæƒ³è¦htmlä¸­æ­£å¸¸æ˜¾ç¤ºæ–‡å­—å­—ç¬¦ï¼Œå°±å¿…é¡»ä¿è¯æ•°æ®åº“ç¼–ç ï¼Œwebåº”ç”¨ç¨‹åºç¼–ç ä»¥åŠhtmlé¡µé¢çš„ç¼–ç éƒ½ç›¸åŒæˆ–è€…å…¼å®¹ã€‚ Javaé‡‡ç”¨çš„ç¼–ç é›† Javaå†…éƒ¨å­—ç¬¦ä¸²é‡‡ç”¨Unicodeå­—ç¬¦é›†ï¼Œæœ¬æƒ³åœ¨è¿™ç¯‡ç¬”è®°ä¸­ä¸€èµ·ä»‹ç»Javaæ¶‰åŠçš„ç¼–ç æ–¹å¼ä»¥åŠä¸€äº›ç›¸å…³å®žéªŒéªŒè¯ï¼Œä½†æ˜¯è€ƒè™‘åˆ°ç¯‡å¹…æœ‰é™ï¼Œè¿˜æ˜¯ä»¥åŽæœ‰ç©ºå¦å¼€ä¸€ç¯‡åšå®¢ä¸“é—¨ä»‹ç»ã€‚ æ›´æ–°äºŽ2017/03/09 é¿å…ç«‹ä¸‹å¤ªå¤šflagï¼Œå†³å®šä¸å†å•ç‹¬å¼€åšå®¢ä»‹ç»Javaä¸­æ¶‰åŠçš„ç¼–ç æ–¹å¼ï¼Œè®°ä½â€œå­—ç¬¦ä¼ è¾“å­˜å‚¨ç”¨UTF-8ï¼Œå­—ç¬¦å†…å­˜æ“ä½œç”¨UTF-16â€è¿™å¥è¯åŸºæœ¬å¯ä»¥åº”å¯¹å¤§å¤šæ•°åœºæ™¯éœ€æ±‚äº†ã€‚å¯æ˜¯ï¼Œä¸ºä»€ä¹ˆé€‰æ‹©UTF-8ç”¨ä½œä¼ è¾“å­˜å‚¨ï¼Œè€ŒUTF-16ç”¨ä½œå†…å­˜æ“ä½œï¼Ÿ å…¶å®žä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå¦‚ä»Šç½‘ç»œå¸¦å®½è¿˜æ¯”è¾ƒæœ‰é™ï¼Œå› æ­¤å°½é‡é€‰æ‹©æ•ˆçŽ‡é«˜ï¼Œå ç”¨ç©ºé—´å°çš„ç¼–ç æ–¹å¼æ¥ç¼–ç éœ€è¦ç½‘ç»œä¼ è¾“çš„æ•°æ®ã€‚è€Œå¯¹äºŽå†…å­˜æ“ä½œè€Œè¨€ï¼Œå˜é•¿ç¼–ç å¯èƒ½ä¼šå¯¼è‡´ç®—æ³•å¤æ‚åº¦ä»¥åŠæ“ä½œå¤æ‚åº¦çš„å¢žåŠ ï¼Œè™½ç„¶ç©ºé—´ä¹Ÿå¾ˆé‡è¦ï¼ˆå³å†…å­˜èµ„æºï¼‰ï¼Œä½†æ˜¯å¯¹äºŽå¤„ç†é€»è¾‘ï¼ˆå³CPUèµ„æºä»¥åŠç®—æ³•è®¾è®¡å¤æ‚åº¦ï¼‰è€Œè¨€ï¼Œæ˜¾å¾—æ²¡é‚£ä¹ˆé‡è¦ã€‚UTF-8é‡‡ç”¨1-4å­—èŠ‚å˜é•¿ç¼–ç ï¼Œå¤§éƒ¨åˆ†å¸¸ç”¨å­—ç¬¦ç”¨ä¸€ä¸ªå­—èŠ‚å°±å¯ä»¥è¡¨ç¤ºï¼Œç›¸æ¯”UTF-16æœ€å°‘é‡‡ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºå­—ç¬¦è€Œè¨€ï¼ŒUTF-8åœ¨èŠ‚çœç©ºé—´ä¸Šè¡¨çŽ°å‡ºäº†æ˜Žæ˜¾çš„ä¼˜åŠ¿ï¼Œå› æ­¤è¢«å¹¿æ³›ç”¨äºŽç½‘ç»œä¼ è¾“ã€‚è€ŒUTF-16é‡‡ç”¨ä¸¤ä¸ªæˆ–å››ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè™½ç„¶ä¹Ÿæ˜¯å˜é•¿ç¼–ç ï¼Œä½†æ˜¯é™¤åŽ»ç”Ÿåƒ»çš„å­—ç¬¦å¤–ï¼Œå¤§å¤šæ•°å¸¸ç”¨å­—ç¬¦éƒ½åªéœ€è¦ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œå› æ­¤æ¯”è¾ƒæ–¹ä¾¿è®¾è®¡å­—ç¬¦çš„å­˜å‚¨é€»è¾‘ä»¥åŠæ“ä½œé€»è¾‘ï¼ˆæ¯”å¦‚Javaä¸­çš„åŸºç¡€æ•°æ®ç±»åž‹charé‡‡ç”¨ä¸¤ä¸ªå­—èŠ‚å­˜å‚¨ï¼Œè€ŒStringåº•å±‚ä¹Ÿæ˜¯ç®€å•é‡‡ç”¨charæ•°ç»„å®žçŽ°ï¼Œéƒ½æ˜¯åˆ©ç”¨äº†UTF-16å¤§å¤šæ•°å­—ç¬¦é‡‡ç”¨ä¸¤ä¸ªå­—èŠ‚å­˜å‚¨çš„ç‰¹æ€§ï¼‰ã€‚ å†å°±æ˜¯ï¼Œæˆ‘ä»¬åº”è¯¥å¼„æ˜Žç™½Javaä¸­Stringç±»çš„æž„é€ å™¨new String(byte[] data) å’ŒStringç±»çš„å®žä¾‹æ–¹æ³•public byte[] getBytes()æ˜¯å¦‚ä½•å®žçŽ°å­—ç¬¦ç¼–ç çš„è½¬æ¢çš„ã€‚ Stringç±»çš„å†…éƒ¨å®žé™…é‡‡ç”¨private final char[] valueè¿™ä¸ªå­—ç¬¦æ•°ç»„æ¥ä¿å­˜å­—ç¬¦ä¸²ï¼Œè€Œnew String(byte[] data)æž„é€ å™¨å†…éƒ¨ä¼šè°ƒç”¨é»˜è®¤çš„ç¼–ç æ–¹å¼Xæ¥è§£æžå­—èŠ‚æ•°ç»„dataï¼Œç„¶åŽå°†å…¶è½¬æ¢ä¸ºUTF-16ç¼–ç å­˜å‚¨åˆ°Stringå†…éƒ¨çš„å­—ç¬¦æ•°ç»„valueä¸­ã€‚ç±»ä¼¼çš„ï¼Œpublic byte[] getBytes() æ–¹æ³•ä¼šç”¨UTF-16è§£æžStringå†…éƒ¨çš„valueå­—ç¬¦æ•°ç»„ï¼Œç„¶åŽè½¬ç”¨é»˜è®¤çš„ç¼–ç æ–¹å¼Xè¿›è¡Œç¼–ç åŽä¿å­˜æ•°æ®åˆ°æ–¹æ³•çš„è¿”å›žå€¼byteæ•°ç»„ä¸­ã€‚å½“ç„¶å¦‚æžœä½ è°ƒç”¨çš„æ˜¯ä¸Šè¿°æ–¹æ³•çš„é‡è½½æ–¹æ³•ï¼š public String(byte bytes[], Charset charset) public byte[] getBytes(Charset charset) é‚£ä¹ˆï¼Œæ­å–œä½ ï¼Œä½ å¯ä»¥è‡ªç”±é€‰æ‹©ç¼–ç æ–¹å¼Xã€‚ å¯æ˜¯è¿™é‡Œä»ç„¶æœ‰ä¸ªç–‘é—®ï¼ŒJavaé»˜è®¤é‡‡ç”¨UTF-16æ¥è¿›è¡Œå­—ç¬¦å†…å­˜æ“ä½œï¼Œé‚£è¿™æ˜¯ä¸æ˜¯æ„å‘³ç€ä¸Šä¸€æ®µæåˆ°çš„é»˜è®¤çš„ç¼–ç æ–¹å¼X å°±æ˜¯æŒ‡UTF-16ï¼Ÿ https://www.zhihu.com/question/27562173 ç„¶è€Œäº‹æƒ…å¹¶ä¸æ˜¯é‚£ä¹ˆç®€å•ï¼Œè¿™ä¸ªç–‘é—®å®žé™…ä¸Šæ˜¯ç”±äºŽä¸æ˜Žç™½â€œå­—ç¬¦å†…å­˜æ“ä½œâ€çš„å®šä¹‰å¯¼è‡´çš„ã€‚é¦–å…ˆåº”è¯¥æ˜Žç¡®çš„æ˜¯ï¼Œå¯¹äºŽJavaè€Œè¨€ï¼Œä»€ä¹ˆæ˜¯å­—ç¬¦å†…å­˜æ“ä½œï¼Ÿç®€è€Œè¨€ä¹‹ï¼Œå­—ç¬¦å†…å­˜æ“ä½œå³æ‰€æœ‰å’Œcharè¿™ç§åŸºæœ¬æ•°æ®ç±»åž‹æ‰“äº¤é“çš„æ“ä½œï¼Œå°±æ˜¯å­—ç¬¦å†…å­˜æ“ä½œã€‚è€ŒJavaé»˜è®¤é‡‡ç”¨UTF-16æ¥è¿›è¡Œå­—ç¬¦å†…å­˜æ“ä½œçš„å«ä¹‰åœ¨äºŽï¼ŒJavaå¿…é¡»ä¿è¯charä¸­ä¿å­˜çš„æ•°æ®æ˜¯é‡‡ç”¨UTF-16ç¼–ç çš„ã€‚ æ„Ÿå…´è¶£çš„ç«¥éž‹å¯ä»¥ç§»æ­¥ä¸‹é¢è¿™å‡ ç¯‡ä¸“é—¨è®¨è®ºJavaç¼–ç åŽŸç†çš„åšå®¢ï¼š æ–‡æœ¬åœ¨å†…å­˜ä¸­çš„ç¼–ç (1) æ–‡æœ¬åœ¨å†…å­˜ä¸­çš„ç¼–ç (2) æ–‡æœ¬åœ¨å†…å­˜ä¸­çš„ç¼–ç (3) å¦‚æžœå¯¹Javaä¸­çš„å­—ç¬¦æ“ä½œæ¯”è¾ƒæ„Ÿå…´è¶£ä¹Ÿå¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™äº›é—®é¢˜çš„è®¨è®ºï¼š why does InputStream#read() return an int and not a byte ç£¨ç£¨å”§å”§ï¼Œç»ˆäºŽå†™å®Œäº†ï¼Œä¼°è®¡ä½ ä»¬æ—©å°±çœ‹ç´¯äº†ã€‚è¿˜æ˜¯é‚£å¥è€è¯ï¼Œæ–‡ç« å¦‚æœ‰çº°è¯¯ï¼Œæ¬¢è¿Žå¤§å®¶åœ¨è¯„è®ºåŒºæ‰¹è¯„æ–§æ­£ï¼Œæå‰è°¢è¿‡~~ References [1] http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html [2] http://wenku.baidu.com/view/cb9fe505cc17552707220865.html [3] http://blog.csdn.net/yjier/article/details/6237697 [4] https://my.oschina.net/sunnyboy177/blog/399097 [5] https://my.oschina.net/goldenshaw/blog/307708]]></content>
      <categories>
        <category>Misc</category>
      </categories>
      <tags>
        <tag>Charset</tag>
        <tag>Encoding</tag>
        <tag>Unicode</tag>
        <tag>UTF-8</tag>
        <tag>UTF-16</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Sparkæ¦‚å¿µæ¨¡åž‹-2ã€‘RDD & Dependency & å®½çª„ä¾èµ–åˆ’åˆ†]]></title>
    <url>%2F2016%2F05%2F15%2F%E3%80%90Spark%E6%A6%82%E5%BF%B5%E6%A8%A1%E5%9E%8B-2%E3%80%91RDD-Dependency-%E5%AE%BD%E7%AA%84%E4%BE%9D%E8%B5%96%E5%88%92%E5%88%86%2F</url>
    <content type="text"><![CDATA[RDD RDDæ˜¯ç”±è¯¸å¤špartitionæ‰€æž„æˆçš„åˆ†å¸ƒå¼åªè¯»æ•°æ®é›†ä»¥åŠç›¸å…³ç®—å­çš„å°è£…ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µä¸Šçš„æ•°æ®é›†è€Œå¹¶éžæ˜¯ä¸€ä¸ªå°†æ‰€æœ‰æ•°æ®éƒ½è½½å…¥å†…å­˜çš„æ•°æ®ç»“æž„ï¼ˆè¿™é‡Œåªæ˜¯ç®€å•æä¸€ä¸‹RDDï¼Œåœ¨å¦ä¸€ç¯‡åšå®¢è¯¦ç»†è®²è§£RDDçš„æ¦‚å¿µï¼Œæœ¬æ–‡é‡ç‚¹åœ¨äºŽDependencyï¼‰ã€‚ Dependency Dependencyæè¿°äº†RDDä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæ¯ä¸ªRDDå†…éƒ¨éƒ½è®°å½•äº†å®ƒä¸Žå…¶ä»–RDDï¼ˆparent RDDï¼‰çš„ä¾èµ–å…³ç³»ã€‚é€šè¿‡Dependencyç±»çš„getParents(partitionId:Int)æˆ‘ä»¬å¯ä»¥èŽ·å–å½“å‰RDDçš„æ¯ä¸ªpartitionæ‰€ä¾èµ–çš„parent partitionsã€‚ RDDä¹‹é—´çš„ä¾èµ–å…³ç³»å¯ä»¥åˆ†ä¸ºNarrow Dependencyå’ŒShuffle(Wide) Dependencyã€‚åˆ°åº•åº”è¯¥å¦‚ä½•åŒºåˆ†RDDä¹‹é—´çš„å…³ç³»æ˜¯å®½ä¾èµ–è¿˜æ˜¯çª„ä¾èµ–ï¼Ÿ è¿™ä¸»è¦å–å†³äºŽparent RDDçš„ä¸€ä¸ªpartitionè¢«child RDDçš„å¤šå°‘ä¸ªpartitionæ‰€åˆ©ç”¨ï¼šå¦‚æžœparent RDDçš„æ¯ä¸€ä¸ªpartitionæœ€å¤šåªä¼šè¢«child RDDçš„ä¸€ä¸ªpartitionåˆ©ç”¨ï¼Œåˆ™çˆ¶å­RDDä¹‹é—´çš„å…³ç³»ä¸ºçª„ä¾èµ–ï¼Œç›¸åï¼Œå¦‚æžœè¢«child RDDçš„å¤šä¸ªpartitionåˆ©ç”¨ï¼Œåˆ™ä¸ºå®½ä¾èµ–ã€‚ è¿™ç§å®šä¹‰æ— ç–‘æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯å¾ˆå½¢è±¡ çŽ°åœ¨æŠŠæ¯ä¸€æ¡æ•°æ®çœ‹åšæ˜¯ä¸€ä¸ªå¸¦æœ‰åºå·å’Œé¢œè‰²çš„å°çƒï¼ˆåºå·å¯ä»¥é‡å¤ï¼‰ï¼Œå°†partitionçœ‹åšæ˜¯æ”¾å°çƒçš„ç›’å­ï¼ˆç›’å­ä¹Ÿæœ‰åºå·ä¸”åºå·ä¸é‡å¤ï¼‰ï¼Œä¸€ä¸ªRDDæ˜¯æŒ‡ä¸€ä¸ªæŒæœ‰å¤šä¸ªç›’å­çš„äººã€‚æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±æ”¾ç½®å°çƒçš„ç­–ç•¥ï¼Œå°†partitionerçœ‹åšæ˜¯äººå°†å°çƒæ”¾ç½®åˆ°ç›’å­ä¸­çš„ç­–ç•¥ï¼ˆæ¯”å¦‚å¸¸è§çš„HashPartitioner)ï¼Œè€Œä¸”æ¯ä¸ªäººæ ¹æ®è‡ªå·±çš„èŒä¸šéƒ½æœ‰è‡ªå·±å¯¹å°çƒå¤„ç†çš„å–œå¥½ã€‚çŽ°åœ¨è¿›è¡Œç›’å­ä¼ é€’ï¼ˆä¸€ä¸ªäººæŠŠç›’å­ç»™å¦ä¸€ä¸ªäººï¼‰ã€‚ä¼ é€’ç›’å­çš„äººæ˜¯çˆ¶RDD,æŽ¥å—ç›’å­çš„äººæ˜¯å­RDDï¼Œç”±äºŽæŽ¥å—ç›’å­çš„äººæœ‰è‡ªå·±çš„å¤„ç†å–œå¥½å’Œæ”¾ç½®å°çƒçš„ç­–ç•¥ï¼Œå› æ­¤å‡¡æ˜¯è¿›è¡Œäº†ç›’å­ä¼ é€’å¿…å®šä¼šè¿›è¡Œå°çƒçš„å¤„ç†å’Œé‡æ–°æ”¾ç½®ï¼ˆç›¸å½“äºŽtransformationï¼‰ã€‚ â€œä¸åŒçš„ç®—å­ä¼šäº§ç”Ÿä¸åŒçš„RDDâ€ï¼Œè¿™å¥è¯å…¶å®žå¹¶ä¸æ˜¯é‚£ä¹ˆå‡†ç¡®ï¼Œæˆ‘ä»¬çŸ¥é“æ¯ä¸ªRDDéƒ½æœ‰computeæ–¹æ³•ï¼Œä½†æ˜¯ä¸åŒçš„RDDå¯¹åº”çš„computeå®žçŽ°å¹¶ä¸ç›¸åŒï¼ˆå¦‚MappedRDDçš„computeæ–¹æ³•é‡Œå¯¹æ¯ä¸€æ¡æ•°æ®è¿›è¡Œäº†mapæ“ä½œï¼Œç›¸å½“äºŽåœ¨RDDå†…éƒ¨åŒ…å«äº†ç®—å­å®šä¹‰çš„æ“ä½œï¼Œè¯¦è§RDDæºç è§£æžï¼‰ã€‚å› æ­¤ï¼Œä¸ªäººè§‰å¾—è¿™å¥è¯æ”¹æˆä¸åŒçš„RDDå¸¦æœ‰ä¸åŒçš„ç®—å­æ›´ä¸ºæ°å½“ã€‚åŒç†ï¼ŒRDDä¸­æœ‰ä¸€ä¸ªå±žæ€§partitionerï¼Œå› æ­¤ï¼Œåˆ†åŒºç­–ç•¥ä¹Ÿæ˜¯RDDçš„å›ºæœ‰å±žæ€§ã€‚ å¯¹åº”äºŽçŽ°åœ¨çš„åœºæ™¯ï¼Œä¸åŒçš„äººæ ¹æ®è‡ªå·±çš„èŒä¸šæœ‰ä¸åŒçš„å¤„ç†å°çƒçš„å–œå¥½ï¼Œä¸”æœ‰è‡ªå·±æ”¾ç½®å°çƒçš„ç­–ç•¥ï¼Œå¯¹åº”äºŽä¸åŒçš„RDDå¸¦æœ‰ä¸åŒçš„ç®—å­ï¼Œä¸”ä¼ å…¥äº†ä¸åŒçš„partitionerã€‚ å…¶å®žä¸Šé¢çš„æ¯”å–»ä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£RDDï¼Œå¦‚æžœæˆ‘ä»¬æƒ³åœ¨ä¸€ç¾¤äººä¹‹é—´ä¼ é€’ç›’å­ä»¥ä¾¿è®©ä¸åŒèŒä¸šçš„äººå¯¹ç›’å­ä¸­çš„å°çƒè¿›è¡Œå¤„ç†ï¼ˆæ­¤è¿‡ç¨‹ç›¸å½“äºŽå°†ä¸€ç³»åˆ—partitionä¸­çš„æ•°æ®ç”¨ä¸åŒç®—å­å¤„ç†ä»¥å¾—åˆ°ç›®æ ‡ç»“æžœï¼‰ï¼Œåˆ™å¯¹äºŽæ¯ä¸ªäººæˆ‘ä»¬è‡³å°‘éœ€è¦äº”ä¸ªä¿¡æ¯ï¼šå½“å‰äººæ‰€æŒæœ‰çš„æ‰€æœ‰ç›’å­çš„åˆ—è¡¨ï¼Œå½“å‰äººå¯¹å°çƒçš„å¤„ç†å–œå¥½ï¼Œä¼ é€’ç›’å­ç»™å½“å‰äººçš„äººæ˜¯å“ªäº›äººï¼Œå½“å‰äººå¯¹å°çƒçš„æ”¾ç½®ç­–ç•¥ï¼Œä»¥åŠå½“å‰äººæ”¾ç½®ç›’å­çš„åœ°ç‚¹ è¿™æ°å¥½å’ŒRDDçš„æ¦‚å¿µç†è§£ä¸­æåˆ°è¿‡RDDç±»çš„äº”ä¸ªé‡è¦ç‰¹å¾ç›¸å¯¹åº”ï¼š 1ã€partitionsçš„åˆ—è¡¨ï¼ˆâ€œå½“å‰äººâ€æ‰€æŒæœ‰çš„ç›’å­åˆ—è¡¨) 2ã€computeæ–¹æ³•æ¥è®¡ç®—iteratorï¼ˆâ€œå½“å‰äººâ€å¯¹å°çƒçš„å¤„ç†å–œå¥½ï¼‰ 3ã€getDependencies(ä¼ é€’ç»™â€œå½“å‰äººâ€ç›’å­çš„äººæœ‰å“ªäº›) 4ã€partitionerï¼ˆâ€œå½“å‰äººâ€æ”¾ç½®å°çƒçš„ç­–ç•¥ï¼‰ 5ã€getPreferredLocationsï¼ˆâ€œå½“å‰äººâ€æ”¾ç½®ç›’å­çš„ä½ç½®ï¼‰ çŽ°åœ¨æœ‰ä¸€ä¸ªäººæŒæœ‰å¤šä¸ªç®±å­ï¼Œä»–æŒ‰ç…§æ”¾ç½®ç­–ç•¥Aæ”¾ç½®å¥½äº†å°çƒï¼Œä½ å¯ä»¥é€‰æ‹©è®©ä»–æŠŠç®±å­ä¼ ç»™ä¸‹é¢ä¸åŒèŒä¸šçš„äºº å°†ç®—å­ä½œç”¨äºŽå°çƒçš„å˜åŒ–è¿‡ç¨‹çœ‹åšæ˜¯å¦‚ä¸‹æ“ä½œï¼š egï¼š map() -&gt; å½“åšæ˜¯ç»™å°çƒæ¶‚è‰² -&gt; å¯¹åº”äºŽMappedRDDï¼Œç›¸å½“äºŽå°†ç›’å­ä¼ é€’ç»™äº†ä¸€ä¸ªç”»åŒ  filter() -&gt; å½“åšæ˜¯ä»Žç›’å­é‡Œå–å‡ºå°çƒæ‰”æŽ‰ -&gt; å¯¹åº”äºŽFilteredRDDï¼Œç›¸å½“äºŽå°†ç›’å­ä¼ é€’ç»™äº†ä¸€ä¸ªæŠ•æ‰‹ã€‚ã€‚ã€‚æƒ³ä¸åˆ°æ›´åˆé€‚çš„èŒä¸šäº†ã€‚ã€‚ã€‚ union(rdd) -&gt; å½“åšæ˜¯å°†å¤šä¸ªå°ç›’å­åˆæˆä¸€ä¸ªå¤§ç›’å­ï¼ˆæ‰€æœ‰è¢«åˆå¹¶å°ç›’å­çš„ç¼–å·å‡å¯çœ‹åšåˆå¹¶åŽå¤§ç›’å­çš„ç¼–å·ï¼‰-&gt; å¯¹åº”äºŽUnionRDDï¼Œç›¸å½“äºŽå°†ç›’å­ä¼ é€’ç»™äº†ä¸€ä¸ªè£…ç®±å·¥äºº join(rdd,partitioner) -&gt; å½“åšæ˜¯å°†å·ç ç›¸åŒçš„å°çƒï¼ˆä¸ç®¡æ˜¯ä¸æ˜¯åœ¨ä¸€ä¸ªç›’å­é‡Œï¼‰ç†”æˆä¸€ä¸ªå¤§çƒï¼Œå¹¶æ ¹æ®æ”¾ç½®ç­–ç•¥partitioneré‡æ–°æ”¾ç½® -&gt; ç›¸å½“äºŽå°†ç›’å­ä¼ é€’ç»™äº†ä¸€ä¸ªé“åŒ  å¦‚æžœç»è¿‡ä¸Šè¿°æŸä¸ªæ“ä½œåŽï¼Œå¯¹äºŽæ‰€æœ‰ç•™ä¸‹æ¥çš„å°çƒï¼Œå¦‚æžœåŽŸæ¥åœ¨åŒä¸€ä¸ªç›’å­é‡Œçš„å°çƒçŽ°åœ¨å…¨éƒ¨è¿˜åœ¨åŒä¸€ä¸ªç›’å­é‡Œï¼Œåˆ™ä¸ºçª„ä¾èµ–ï¼›å¦‚æžœä»»ä½•ä¸€ä¸ªå°çƒå’ŒåŽŸæ¥åœ¨åŒä¸€ä¸ªç›’å­é‡Œçš„å…¶ä»–å°çƒåˆ†å¼€äº†ï¼Œåˆ™ä¸ºå®½ä¾èµ–ã€‚ é€šä¿—ä¸€ç‚¹æ¥è¯´ï¼Œä¸ç®¡è¢«ä¼ é€’çš„äººæ€Žä¹ˆæŠ˜è…¾ï¼ŒåŽŸæœ¬åœ¨åŒä¸€ä¸ªç›’å­é‡Œçš„å°çƒéƒ½è¿˜åœ¨ä¸€ä¸ªç›’å­é‡Œï¼ˆæˆ–è€…è¡ç”Ÿçš„å¤§ç›’å­ï¼‰ï¼Œè¿™ä¸ªä¼ é€’å…³ç³»å°±æ˜¯çª„ä¾èµ–ï¼›å¦åˆ™ï¼Œåˆ™æ˜¯å®½ä¾èµ–ã€‚ é€ä¸€çœ‹ä¸€ä¸‹ä¸Šé¢åˆ—ä¸¾çš„ç®—å­ï¼Œæ˜¾ç„¶ï¼Œmapå’Œfilteræ˜¯çª„ä¾èµ–ï¼Œå› ä¸ºéƒ½åªæ˜¯ç®€å•çš„ä¼ é€’äº†ç›’å­ï¼Œå¯¹å•ä¸ªå°çƒæ¶‚è‰²æˆ–æ‰”æŽ‰ï¼Œå¹¶æ²¡æœ‰ä¼ å…¥æ–°çš„partitionerï¼Œå³æŽ¥æ”¶ç›’å­çš„äººå¹¶æ²¡æœ‰å¯¹å°çƒè¿›è¡Œé‡æ–°æ”¾ç½®ã€‚å› æ­¤æ‰€æœ‰å°çƒéƒ½å¾…åœ¨è‡ªå·±åŽŸæ¥çš„ç›’å­é‡Œï¼Œæ˜¾ç„¶æ˜¯çª„ä¾èµ–ã€‚å¯¹äºŽunionï¼Œä¹Ÿæ˜¯çª„ä¾èµ–ï¼Œå› ä¸ºæ¯ä¸ªå°çƒéƒ½ä¼šåœ¨åŽŸæ¥å°ç›’å­æ‰€è¡ç”Ÿçš„å¤§ç›’å­ä¸­ã€‚ join å¯¹äºŽjoin(rddB)æ—¢å¯èƒ½æ˜¯çª„ä¾èµ–ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å®½ä¾èµ–ï¼Œå®žé™…ä¸Šè®¨è®ºjoinæ˜¯å®½ä¾èµ–è¿˜æ˜¯çª„ä¾èµ–å…¶å®žç›¸å½“äºŽè®¨è®ºcogroupï¼Œå¯ä»¥å‚çœ‹ä¸‹é¢æºç å¯çŸ¥ï¼Œjoinå†…éƒ¨æ˜¯è°ƒç”¨cogroupå®žçŽ°çš„ 12345def join[W](other: RDD[(K, W)], partitioner: Partitioner): RDD[(K, (V, W))] = &#123; this.cogroup(other, partitioner).flatMapValues( pair =&gt; for (v &lt;- pair._1; w &lt;- pair._2) yield (v, w) ) &#125; æˆ‘ä»¬éœ€è¦åˆ†æƒ…å†µè®¨è®ºï¼š çª„ä¾èµ–join æƒ³è¦çª„ä¾èµ–ï¼Œåˆ™å¿…é¡»ä¿è¯åŽŸæ¥åŒä¸€ä¸ªç›’å­é‡Œçš„çƒä¼ é€’ä¸ªå¦ä¸€ä¸ªäººä¹‹åŽä¾ç„¶åœ¨åŒä¸€ä¸ªç›’å­é‡Œã€‚ å¦‚æžœä¼ é€’ç›’å­çš„äººå’ŒæŽ¥å—ç›’å­çš„äººæœ‰ç›¸åŒçš„æ”¾ç½®å°çƒçš„ç­–ç•¥ï¼Œå¹¶ä¸”ä¼ é€’ç›’å­çš„äººå’ŒæŽ¥å—ç›’å­çš„äººçš„ç›’å­æ•°ç›®ç›¸åŒï¼Œåˆ™joinä¸ºçª„ä¾èµ–ï¼Œå¦åˆ™ä¸ºå®½ä¾èµ–ã€‚æ¯”å¦‚ä¼ é€’è€…Aå’Œä¼ é€’è€…Bï¼ˆrddBï¼‰ä¸¤äººéƒ½é‡‡ç”¨äº†HashParitionerï¼ˆæ¯”å¦‚ç”¨å°çƒçš„åºå·å¯¹ç›’å­çš„åºå·å–ä½™ï¼‰ï¼Œåˆ™äºŒäººæ‰€æŒæœ‰çš„ç›¸åŒåºå·çš„å°çƒä¸€å®šæ”¾åœ¨åºå·ç›¸åŒçš„ç›’å­é‡Œï¼Œjoinä¹‹åŽæŽ¥å—ç›’å­çš„äººä¹Ÿä½¿ç”¨åŒæ ·çš„HashParitionerï¼Œåˆ™ç†”æˆçš„æ‰“çƒä¸€å®šè¿˜ä¼šè¢«æ”¾ç½®åœ¨åºå·ç›¸åŒçš„ç›’å­é‡Œï¼Œè¿™æ ·çœ‹æ¥ï¼ŒåŽŸæœ¬æ”¾åœ¨ç›’å­1ä¸­çš„å°çƒæœ€åŽä¸€å®šè¿˜æ˜¯ä¼šè¢«æ”¾ç½®åœ¨ç›’å­1ä¸­ã€‚ï¼ˆå¦‚åŽæ–‡å›¾ä¸­çš„join with inputs co-partitionedï¼‰ å®½ä¾èµ–join å¤§å¤šæ•°æƒ…å†µçš„joinéƒ½æ˜¯å®½ä¾èµ–ï¼Œç¬¬ä¸€ä¸ªäººå°†ç›¸åŒåºå·çš„çƒæ‰“æ•£æ”¾ç½®åœ¨ä¸åŒçš„ç›’å­é‡Œï¼Œä¼ é€’ç»™ç¬¬äºŒä¸ªäººä¹‹åŽï¼Œå¦‚æžœé‡‡ç”¨ä¸åŒçš„æ”¾ç½®ç­–ç•¥ï¼ŒåŸºæœ¬éƒ½ä¼šä½¿åŽŸæœ¬åœ¨åŒä¸€ä¸ªç›’å­é‡Œçš„çƒåˆ†æ•£åˆ°ä¸åŒçš„ç›’å­ä¸­åŽ»ã€‚ è¿™ç§åŒºåˆ«ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è§çš„join with inputs co-partitioned å’Œ join with inputs not co-partitioned(å¦‚ä¸‹å›¾æ‰€ç¤º) ä¸‹å›¾ä¸­çš„ join with inputs co-partitioned å¯¹åº”äºŽä¸Šè¿°çª„ä¾èµ–çš„æƒ…å†µ3 å›¾ä¸­æ¶‰åŠåˆ°ä¸€ä¸ªäººå‘å¦ä¸€ä¸ªäººä¼ é€’ç›’å­ä»¥åŠä¸¤ä¸ªäººå‘ç¬¬ä¸‰ä¸ªäººä¼ é€’ç›’å­çš„æƒ…å†µ å®žé™…ä¸Šæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»Žæºç è§’åº¦æ¥çœ‹å¦‚ä½•åŒºåˆ†cogroupæ˜¯å¦ä¸ºå®½ä¾èµ–ï¼Œcogroupæ–¹æ³•å®žé™…ä¸Šåˆ›å»ºäº†CoGroupedRDDï¼Œè¯¥RDDçš„getDependenciesæ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112override def getDependencies: Seq[Dependency[_]] = &#123; //rddsæ˜¯CoGroupedRDDçš„çˆ¶RDDåˆ—è¡¨ï¼Œpartæ˜¯CoGroupedRDDçš„partitioner rdds.map &#123; rdd: RDD[_ &lt;: Product2[K, _]] =&gt; if (rdd.partitioner == Some(part)) &#123; logDebug("Adding one-to-one dependency with " + rdd) new OneToOneDependency(rdd) &#125; else &#123; logDebug("Adding shuffle dependency with " + rdd) new ShuffleDependency[K, Any, CoGroupCombiner](rdd, part, serializer) &#125; &#125; &#125; ä»£ç é€»è¾‘éžå¸¸æ¸…æ™°ï¼Œå¦‚æžœCoGroupedRDDå’Œå…¶çˆ¶RDDæœ‰ç›¸åŒçš„partitioneråˆ™äºŒè€…å…³ç³»ä¸ºçª„ä¾èµ–ï¼Œå¦åˆ™ä¸ºå®½ä¾èµ–ã€‚ References http://smallx.me/2016/06/07/spark%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/ https://github.com/JerryLead/SparkInternals/blob/master/markdown/2-JobLogicalPlan.md https://github.com/JerryLead/SparkInternals/blob/master/markdown/3-JobPhysicalPlan.md]]></content>
      <categories>
        <category>Spark</category>
        <category>Sparkæ¦‚å¿µæ¨¡åž‹</category>
      </categories>
      <tags>
        <tag>Spark</tag>
      </tags>
  </entry>
</search>